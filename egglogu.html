<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>EGGlogU 360 ‚Äî Gesti√≥n Av√≠cola Inteligente</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1A3C6E">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="icon" type="image/png" href="favicon.png">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/mqtt@5.14.1/dist/mqtt.min.js"></script>
<script src="https://unpkg.com/simple-statistics@7.8.8/dist/simple-statistics.min.js"></script>
<style>
:root{--primary:#1A3C6E;--primary-light:#4A7AB5;--primary-dark:#0E2240;--secondary:#FF8F00;--accent:#2E7D32;--danger:#C62828;--danger-light:#EF5350;--warning:#F9A825;--success:#2E7D32;--bg:#F5F5F5;--card:#FFF;--text:#212121;--text-light:#757575;--sidebar-bg:#0E2240;--sidebar-width:240px;--border:#E0E0E0;--radius:8px;--primary-hover:rgba(26,60,110,.04);--primary-ring:rgba(26,60,110,.15);--primary-fill:rgba(26,60,110,.1)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
.app{display:flex;min-height:100vh}
.sidebar{width:var(--sidebar-width);background:var(--sidebar-bg);color:#fff;display:flex;flex-direction:column;position:fixed;height:100vh;z-index:100;transition:transform .3s}
.sidebar-logo{padding:20px;font-size:24px;font-weight:700;text-align:center;border-bottom:1px solid rgba(255,255,255,.2);letter-spacing:2px}
.sidebar-logo small{display:block;font-size:10px;font-weight:400;opacity:.7}
.sidebar nav{flex:1;padding:10px 0;overflow-y:auto}
.sidebar nav a{display:flex;align-items:center;gap:12px;padding:12px 20px;color:rgba(255,255,255,.8);text-decoration:none;transition:all .2s;cursor:pointer;font-size:14px}
.sidebar nav a:hover{background:rgba(255,255,255,.1);color:#fff}
.sidebar nav a.active{background:rgba(255,255,255,.2);color:#fff;font-weight:600;border-left:3px solid var(--secondary)}
.sidebar nav a i{font-style:normal;font-size:18px;width:24px;text-align:center}
.lang-toggle{padding:15px;display:flex;gap:8px;justify-content:center;border-top:1px solid rgba(255,255,255,.2)}
.lang-toggle button{padding:6px 16px;border:1px solid rgba(255,255,255,.5);background:transparent;color:#fff;border-radius:4px;cursor:pointer;font-size:13px}
.lang-toggle button.active{background:#fff;color:var(--sidebar-bg);font-weight:600}
.hamburger{display:none;position:fixed;top:10px;left:10px;z-index:101;background:var(--primary);color:#fff;border:none;padding:8px 12px;border-radius:var(--radius);font-size:20px;cursor:pointer}
.main-content{margin-left:var(--sidebar-width);flex:1;padding:20px 30px;min-height:100vh}
.section{display:none}.section.active{display:block}
.page-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:12px}
.page-header h2{font-size:24px;color:var(--primary-dark)}
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;margin-bottom:24px}
.kpi-card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.08);border-left:4px solid var(--primary)}
.kpi-card.warning{border-left-color:var(--warning)}.kpi-card.danger{border-left-color:var(--danger)}.kpi-card.accent{border-left-color:var(--accent)}.kpi-card.secondary{border-left-color:var(--secondary)}
.kpi-card .kpi-label{font-size:12px;color:var(--text-light);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}
.kpi-card .kpi-value{font-size:28px;font-weight:700}.kpi-card .kpi-sub{font-size:12px;color:var(--text-light);margin-top:4px}
.card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:20px}
.card h3{margin-bottom:16px;color:var(--primary-dark);font-size:18px}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:10px 12px;text-align:left;border-bottom:1px solid var(--border)}
th{background:var(--bg);font-weight:600;color:var(--text-light);font-size:12px;text-transform:uppercase;letter-spacing:.5px;position:sticky;top:0}
tr:hover{background:var(--primary-hover)}
.table-wrap{overflow-x:auto;max-height:500px;overflow-y:auto}
.btn{padding:8px 20px;border:none;border-radius:var(--radius);cursor:pointer;font-size:14px;font-weight:500;transition:all .2s;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:var(--primary);color:#fff}.btn-primary:hover{background:var(--primary-dark)}
.btn-secondary{background:var(--bg);color:var(--text);border:1px solid var(--border)}.btn-secondary:hover{background:var(--border)}
.btn-danger{background:var(--danger);color:#fff}.btn-danger:hover{background:#a51c1c}
.btn-warning{background:var(--warning);color:#000}.btn-sm{padding:4px 12px;font-size:12px}
.btn-group{display:flex;gap:6px;flex-wrap:wrap}
.form-group{margin-bottom:16px}
.form-group label{display:block;margin-bottom:6px;font-weight:500;font-size:14px}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:var(--radius);font-size:14px;font-family:inherit;transition:border-color .2s}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-ring)}
.form-group textarea{min-height:80px;resize:vertical}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.form-row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
.modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:200;justify-content:center;align-items:flex-start;padding:40px 20px;overflow-y:auto}
.modal-overlay.open{display:flex}
.modal{background:var(--card);border-radius:var(--radius);width:100%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.3)}
.modal-header{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid var(--border)}
.modal-header h3{font-size:18px;color:var(--primary-dark)}
.modal-header button{background:none;border:none;font-size:24px;cursor:pointer;color:var(--text-light);padding:0 4px}
.modal-body{padding:20px}
.modal-footer{padding:15px 20px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:10px}
.toast{position:fixed;bottom:20px;right:20px;background:var(--primary);color:#fff;padding:12px 24px;border-radius:var(--radius);box-shadow:0 4px 12px rgba(0,0,0,.2);transform:translateY(100px);opacity:0;transition:all .3s;z-index:300;font-size:14px}
.toast.show{transform:translateY(0);opacity:1}.toast.error{background:var(--danger)}
.badge{display:inline-block;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:600;text-transform:uppercase}
.badge-success{background:#E8F5E9;color:#2E7D32}.badge-warning{background:#FFF8E1;color:#F57F17}.badge-danger{background:#FFEBEE;color:#C62828}.badge-info{background:#E3F2FD;color:#1565C0}.badge-secondary{background:#F5F5F5;color:#757575}
.health-score{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;font-weight:700;font-size:14px;color:#fff}
.health-score.good{background:var(--success)}.health-score.warn{background:var(--warning);color:#000}.health-score.bad{background:var(--danger)}
.tabs{display:flex;gap:0;margin-bottom:20px;border-bottom:2px solid var(--border)}
.tab{padding:10px 20px;cursor:pointer;font-size:14px;font-weight:500;color:var(--text-light);border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .2s}
.tab:hover{color:var(--text)}.tab.active{color:var(--primary);border-bottom-color:var(--primary);font-weight:600}
.alert-card{padding:12px 16px;border-radius:var(--radius);margin-bottom:10px;font-size:14px;display:flex;align-items:center;gap:10px}
.alert-card.alert-danger{background:#FFEBEE;border-left:4px solid var(--danger);color:var(--danger)}
.alert-card.alert-warning{background:#FFF8E1;border-left:4px solid var(--warning);color:#E65100}
.alert-card.alert-success{background:#E8F5E9;border-left:4px solid var(--success);color:var(--success)}
.alert-card.alert-info{background:#E3F2FD;border-left:4px solid var(--accent);color:var(--accent)}
.checklist-item{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid var(--border)}
.checklist-item input[type=checkbox]{width:18px;height:18px;accent-color:var(--primary)}
.checklist-item.done span{text-decoration:line-through;color:var(--text-light)}
.empty-state{text-align:center;padding:40px;color:var(--text-light)}
.empty-state .empty-icon{font-size:48px;margin-bottom:12px}.empty-state p{margin-bottom:16px}
.chart-container{position:relative;height:300px;margin-bottom:20px}
.filter-bar{display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap;align-items:center}
.filter-bar select,.filter-bar input{padding:8px 12px;border:1px solid var(--border);border-radius:var(--radius);font-size:13px}
.stat-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border);font-size:14px}
.stat-row:last-child{border-bottom:none}.stat-row .stat-label{color:var(--text-light)}.stat-row .stat-value{font-weight:600}
.lifecycle-bar{display:flex;border-radius:var(--radius);overflow:hidden;height:48px;margin:16px 0}
.lifecycle-stage{display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;padding:4px 8px;position:relative;cursor:pointer;transition:opacity .2s;text-align:center;line-height:1.2}
.lifecycle-stage:hover{opacity:.85}
.lifecycle-stage.current{box-shadow:inset 0 0 0 3px var(--primary-dark);z-index:1}
.lifecycle-detail{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin:16px 0}
.lifecycle-card{border-radius:var(--radius);padding:12px;text-align:center;font-size:13px}
.lifecycle-card .lc-icon{font-size:28px;margin-bottom:4px}
.lifecycle-card .lc-name{font-weight:700;margin-bottom:4px}
.lifecycle-card .lc-weeks{font-size:11px;color:var(--text-light)}
.lifecycle-card .lc-info{font-size:11px;margin-top:6px;text-align:left}
.snapshot-badge{display:inline-block;padding:2px 8px;border-radius:12px;font-size:10px;font-weight:600;margin-left:6px}
.snapshot-up{background:#E8F5E9;color:#2E7D32}.snapshot-down{background:#FFEBEE;color:#C62828}.snapshot-same{background:#F5F5F5;color:#757575}
@media(max-width:768px){
.sidebar{transform:translateX(-100%)}.sidebar.open{transform:translateX(0)}.hamburger{display:block}
.main-content{margin-left:0;padding:60px 15px 20px}
.kpi-grid{grid-template-columns:1fr 1fr}.form-row,.form-row-3{grid-template-columns:1fr}
.page-header{flex-direction:column;align-items:flex-start}.modal{max-width:95vw}
.lifecycle-bar{flex-wrap:wrap;height:auto}.lifecycle-stage{padding:8px}
}
@media(max-width:480px){.kpi-grid{grid-template-columns:1fr}.kpi-card .kpi-value{font-size:22px}}
.leaflet-container{height:400px;width:100%;border-radius:var(--radius);z-index:1}
.weather-widget{background:linear-gradient(135deg,#4A7AB5,#1A3C6E);color:#fff;border-radius:var(--radius);padding:20px;margin-bottom:20px}
.weather-widget .weather-main{display:flex;align-items:center;gap:16px;margin-bottom:12px}
.weather-widget .weather-temp{font-size:42px;font-weight:700}.weather-widget .weather-desc{font-size:14px;opacity:.9}
.weather-widget .weather-details{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;font-size:13px}
.weather-widget .weather-details div{background:rgba(255,255,255,.15);padding:8px;border-radius:6px;text-align:center}
.weather-forecast{display:flex;gap:8px;margin-top:12px}.weather-forecast .fc-day{flex:1;background:rgba(255,255,255,.1);border-radius:6px;padding:8px;text-align:center;font-size:12px}
.gauge-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:16px;margin:16px 0}
.gauge{text-align:center;background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.08)}
.gauge svg{width:120px;height:120px}.gauge .gauge-value{font-size:24px;font-weight:700;margin-top:8px}.gauge .gauge-label{font-size:12px;color:var(--text-light);margin-top:4px}
.stress-timeline{position:relative;padding-left:24px;margin:16px 0}
.stress-timeline::before{content:'';position:absolute;left:8px;top:0;bottom:0;width:2px;background:var(--border)}
.stress-event{position:relative;margin-bottom:16px;padding:12px;background:var(--card);border-radius:var(--radius);box-shadow:0 1px 4px rgba(0,0,0,.08)}
.stress-event::before{content:'';position:absolute;left:-20px;top:16px;width:12px;height:12px;border-radius:50%;border:2px solid var(--card)}
.stress-event.sev-1::before{background:#4CAF50}.stress-event.sev-2::before{background:#8BC34A}.stress-event.sev-3::before{background:#FFC107}
.stress-event.sev-4::before{background:#FF9800}.stress-event.sev-5::before{background:#F44336}
.mqtt-status{display:inline-flex;align-items:center;gap:6px;font-size:12px;padding:4px 10px;border-radius:12px}
.mqtt-status.connected{background:#E8F5E9;color:#2E7D32}.mqtt-status.disconnected{background:#FFEBEE;color:#C62828}
.mqtt-status .dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.mqtt-status.connected .dot{background:#2E7D32}.mqtt-status.disconnected .dot{background:#C62828}
.pred-card{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);text-align:center}
.pred-card .pred-score{font-size:36px;font-weight:700;margin:8px 0}.pred-card .pred-label{font-size:12px;color:var(--text-light)}
.anomaly-icon{color:var(--warning);font-weight:700;cursor:help}
.nav-badge{background:var(--secondary);color:#fff;font-size:10px;padding:2px 6px;border-radius:10px;margin-left:auto}
/* Mode toggles */
.mode-toggles{padding:8px 12px;display:flex;gap:6px}
.mode-btn{background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:var(--radius);padding:6px 10px;font-size:12px;cursor:pointer;flex:1;text-align:center;transition:.2s}
.mode-btn:hover{background:rgba(255,255,255,.2)}.mode-btn.active{background:var(--secondary);border-color:var(--secondary);font-weight:600}
/* Zone risk badges */
.risk-badge{display:inline-block;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:600;color:#fff}
.risk-green{background:#4CAF50}.risk-yellow{background:#FFC107;color:#333}.risk-red{background:#F44336}
/* Pest severity */
.severity-bar{width:100%;height:8px;background:var(--border);border-radius:4px;overflow:hidden}.severity-bar>div{height:100%;border-radius:4px;transition:width .3s}.severity-dot{width:10px;height:10px;border-radius:50%;background:var(--border)}
.severity-dot.active{background:var(--secondary)}
/* Recommendation card */
.rec-card{background:#E3F2FD;border:1px solid #90CAF9;border-radius:var(--radius);padding:16px;margin-top:12px}
.rec-item{display:flex;align-items:flex-start;gap:10px;padding:8px 0;border-bottom:1px solid #BBDEFB}
.rec-item:last-child{border-bottom:none}
.rec-priority{font-size:10px;font-weight:700;padding:2px 8px;border-radius:10px;white-space:nowrap}
.rec-priority.high{background:#FFCDD2;color:#C62828}.rec-priority.medium{background:#FFF9C4;color:#F57F17}.rec-priority.low{background:#C8E6C9;color:#2E7D32}
/* Traffic light */
.traffic-light{display:flex;align-items:center;gap:8px;font-size:24px}
.traffic-dot{width:28px;height:28px;border-radius:50%;border:2px solid var(--border);opacity:.3}.traffic-dot.active{opacity:1;box-shadow:0 0 8px currentColor}
.traffic-dot.green{background:#4CAF50;border-color:#4CAF50}.traffic-dot.yellow{background:#FFC107;border-color:#FFC107}.traffic-dot.red{background:#F44336;border-color:#F44336}
/* Campo mode */
body.campo-mode .campo-hide{display:none!important}
.campo-kpi{font-size:48px;font-weight:800;text-align:center;color:var(--primary)}
.campo-btn-big{display:block;width:100%;padding:24px;font-size:24px;font-weight:700;border:none;border-radius:var(--radius);background:var(--secondary);color:#fff;cursor:pointer;margin-top:16px}
/* Dark mode */
body.dark-mode{--bg:#1E1E1E;--card:#2D2D2D;--text:#E0E0E0;--text-light:#BDBDBD;--border:#424242}
body.dark-mode .sidebar{background:#121212}
body.dark-mode .kpi-card{background:#2D2D2D;border-color:#424242}
body.dark-mode input,body.dark-mode select,body.dark-mode textarea{background:#383838;color:#E0E0E0;border-color:#555}
body.dark-mode .modal{background:#2D2D2D;color:#E0E0E0}
body.dark-mode .rec-card{background:#1A237E;border-color:#3949AB}
body.dark-mode .card{background:#2D2D2D}
/* QR display */
.qr-display{padding:12px;background:#fff;border:1px solid var(--border);border-radius:var(--radius);font-family:monospace;word-break:break-all;text-align:center;font-size:11px}
/* Font scale */
body.font-small{font-size:13px}body.font-normal{font-size:15px}body.font-large{font-size:18px}body.font-xlarge{font-size:21px}
</style>
</head>
<body>
<div class="app">
<aside class="sidebar" id="sidebar" role="navigation" aria-label="Main Navigation">
<div class="sidebar-logo" aria-label="EGGlogU 360"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" style="width:36px;height:36px;vertical-align:middle;margin-right:4px;border-radius:6px"><rect width="32" height="32" rx="6" fill="#1E3A5F"/><path d="M16,3.5 C13,3.5 9.5,8 9.5,14.5 C9.5,19.5 12,24 16,24 C20,24 22.5,19.5 22.5,14.5 C22.5,8 19,3.5 16,3.5Z" fill="#FFF"/><path d="M10.8,17 Q12,14.5 14.5,13.5 Q16,13 17,13.2 Q19,13.8 21,16 Q22,17.5 22,19.5 Q22,22 19.5,23 C17.5,24 13,23.5 11.5,21.5 Q10.5,19.5 10.8,17Z" fill="#F5A623"/><path d="M12,21 Q13,20 14,21 Q15,20 16,21 Q17,20 18,21 Q19,20 20,21 Q20.5,22 19,22.5 Q16,24 13,22.5 Q12,22 12,21Z" fill="#E8912D"/><path d="M13.5,13.8 Q13,11.5 13.2,9.5 Q13.5,7.5 15,6.8 Q16.3,6 17.5,6.8 Q18.5,7.5 18.5,9.5 Q18.5,11 17.5,13 Q17,13.5 16,13.5Z" fill="#F5A623"/><path d="M15,6.8 Q14.3,5 15.3,4.5 Q15.8,4.2 16,4.8 Q16.3,3.8 17,4.2 Q18,3.6 18.3,4.5 Q18.8,5.2 17.8,6.5 Q17,7 16,6.5Z" fill="#E74C3C"/><path d="M12.8,10 L11.2,10.7 L12.8,11.2Z" fill="#E8912D"/><path d="M13.3,11.5 Q13.8,12.5 13.4,13.2 Q13,13.3 12.8,12.8 Q12.5,12 13.3,11.5Z" fill="#E74C3C"/><circle cx="15.5" cy="9" r="1.5" fill="#FFF"/><circle cx="15.5" cy="9" r="1" fill="#2C3E50"/><circle cx="15.8" cy="8.7" r=".4" fill="#FFF"/></svg> EGGlogU <span style="color:#FF8F00;font-size:16px">360</span><small data-t="sidebar_subtitle">Gesti√≥n Av√≠cola Inteligente</small></div>
<nav id="main-nav" role="menubar" aria-label="Modules">
<a data-section="dashboard" class="active" onclick="nav('dashboard')"><i>üìä</i><span data-t="nav_dashboard">Dashboard</span></a>
<a data-section="produccion" onclick="nav('produccion')"><i>ü•ö</i><span data-t="nav_production">Producci√≥n</span></a>
<a data-section="lotes" onclick="nav('lotes')"><i>üêî</i><span data-t="nav_flocks">Lotes</span></a>
<a data-section="sanidad" onclick="nav('sanidad')"><i>üíâ</i><span data-t="nav_health">Sanidad</span></a>
<a data-section="alimento" onclick="nav('alimento')"><i>üåæ</i><span data-t="nav_feed">Alimento</span></a>
<a data-section="clientes" onclick="nav('clientes')"><i>üë•</i><span data-t="nav_clients">Clientes</span></a>
<a data-section="finanzas" onclick="nav('finanzas')"><i>üí∞</i><span data-t="nav_finances">Finanzas</span></a>
<a data-section="analisis" onclick="nav('analisis')"><i>üìà</i><span data-t="nav_analysis">An√°lisis</span></a>
<a data-section="operaciones" onclick="nav('operaciones')"><i>üìã</i><span data-t="nav_operations">Operaciones</span></a>
<a data-section="bioseguridad" onclick="nav('bioseguridad')"><i>üõ°Ô∏è</i><span data-t="nav_biosecurity">Bioseguridad</span></a>
<a data-section="trazabilidad" onclick="nav('trazabilidad')"><i>üì¶</i><span data-t="nav_traceability">Trazabilidad</span></a>
<a data-section="planificacion" onclick="nav('planificacion')"><i>üìÖ</i><span data-t="nav_planning">Planificaci√≥n</span></a>
<a data-section="ambiente" onclick="nav('ambiente')"><i>üå°Ô∏è</i><span data-t="nav_environment">Ambiente</span></a>
<a data-section="config" onclick="nav('config')"><i>‚öôÔ∏è</i><span data-t="nav_config">Config</span></a>
</nav>
<div class="mode-toggles">
<button onclick="toggleCampoMode()" id="btn-campo" class="mode-btn" aria-label="Toggle Campo Mode">üåæ <span data-t="nav_campo_mode">Modo Campo</span></button>
<button onclick="toggleVetMode()" id="btn-vet" class="mode-btn" aria-label="Toggle Vet Mode">ü©∫ <span data-t="nav_vet_mode">Modo Vet</span></button>
</div>
<div class="lang-toggle">
<select id="langSelect" onchange="switchLang(this.value)" style="padding:4px 8px;border-radius:6px;border:1px solid var(--border);background:var(--card-bg);color:var(--text);font-size:0.85rem;cursor:pointer;">
<option value="es">üá®üá± Espa√±ol</option>
<option value="en">üá∫üá∏ English</option>
<option value="pt">üáßüá∑ Portugu√™s</option>
<option value="fr">üá´üá∑ Fran√ßais</option>
<option value="de">üá©üá™ Deutsch</option>
<option value="it">üáÆüáπ Italiano</option>
<option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
<option value="zh">üá®üá≥ ‰∏≠Êñá</option>
</select>
</div>
</aside>
<main class="main-content" role="main" aria-label="Content">
<button class="hamburger" onclick="toggleSidebar()" aria-label="Toggle menu">‚ò∞</button>
<div id="sec-dashboard" class="section active"></div>
<div id="sec-produccion" class="section"></div>
<div id="sec-lotes" class="section"></div>
<div id="sec-sanidad" class="section"></div>
<div id="sec-alimento" class="section"></div>
<div id="sec-clientes" class="section"></div>
<div id="sec-finanzas" class="section"></div>
<div id="sec-analisis" class="section"></div>
<div id="sec-operaciones" class="section"></div>
<div id="sec-bioseguridad" class="section"></div>
<div id="sec-trazabilidad" class="section"></div>
<div id="sec-planificacion" class="section"></div>
<div id="sec-ambiente" class="section"></div>
<div id="sec-config" class="section"></div>
</main>
</div>
<div class="modal-overlay" id="modal-overlay" onclick="closeModal()" role="dialog" aria-modal="true" aria-labelledby="modal-title">
<div class="modal" onclick="event.stopPropagation()">
<div class="modal-header"><h3 id="modal-title"></h3><button onclick="closeModal()" aria-label="Close dialog">‚úï</button></div>
<div class="modal-body" id="modal-body"></div>
</div>
</div>
<div class="toast" id="toast"></div>
<script>
// ============ TRANSLATIONS ============
const T={es:{
save:'Guardar',cancel:'Cancelar',delete:'Eliminar',edit:'Editar',add:'Agregar',close:'Cerrar',actions:'Acciones',date:'Fecha',notes:'Notas',name:'Nombre',phone:'Tel√©fono',email:'Email',address:'Direcci√≥n',confirm_delete:'¬øEliminar este registro?',no_data:'No hay datos registrados',total:'Total',all:'Todos',loading:'Cargando',search:'Buscar',from:'Desde',to:'Hasta',status:'Estado',export_csv:'Exportar CSV',today:'Hoy',active:'Activo',inactive:'Inactivo',
nav_dashboard:'Dashboard',nav_production:'Producci√≥n',nav_flocks:'Lotes',nav_health:'Sanidad',nav_feed:'Alimento',nav_clients:'Clientes',nav_finances:'Finanzas',nav_analysis:'An√°lisis',nav_operations:'Operaciones',nav_environment:'Ambiente',nav_config:'Configuraci√≥n',
dash_title:'Panel Principal',kpi_today:'Producci√≥n Hoy',kpi_henday:'Tasa Hen-Day',kpi_fcr:'Conversi√≥n (FCR)',kpi_mortality:'Mortalidad',kpi_cost_egg:'Costo/Huevo',kpi_income_net:'Ingreso Neto',kpi_alerts:'Alertas',kpi_active_hens:'Gallinas Activas',kpi_active_flocks:'Lotes Activos',dash_alerts:'Alertas',dash_trend:'Tendencia 30 D√≠as',dash_no_alerts:'Sin alertas',dash_snapshot:'Guardar Snapshot KPI',dash_kpi_history:'Historial KPI',
alert_vaccine_overdue:'Vacuna vencida',alert_vaccine_soon:'Vacuna pr√≥xima',alert_low_feed:'Stock alimento bajo',alert_high_mortality:'Mortalidad alta',alert_active_outbreak:'Brote activo',alert_withdrawal:'Retiro activo',
flock_title:'Gesti√≥n de Lotes',flock_add:'Nuevo Lote',flock_name:'Nombre',flock_breed:'Raza',flock_count:'Cantidad Inicial',flock_birthdate:'Fecha Nacimiento',flock_purchase_date:'Fecha Compra',flock_supplier:'Proveedor',flock_cost:'Costo Total',flock_status:'Estado',flock_notes:'Notas',flock_age:'Edad',flock_health:'Salud',flock_weeks:'sem',flock_days:'d√≠as',flock_current:'Actuales',flock_status_cria:'Cr√≠a',flock_status_recria:'Recr√≠a',flock_status_produccion:'Producci√≥n',flock_status_descarte:'Descarte',flock_edit:'Editar Lote',flock_lifecycle:'Ciclo de Vida',flock_roadmap:'Roadmap',
lc_pollito:'Pollito',lc_cria:'Cr√≠a',lc_recria:'Recr√≠a',lc_prepostura:'Pre-postura',lc_pico:'Postura Pico',lc_media:'Postura Media',lc_baja:'Postura Baja',lc_descarte:'Descarte',lc_feed:'Alimento',lc_temp:'Temp',lc_weeks:'Semanas',lc_milestone:'Hitos',lc_current_stage:'Etapa Actual',
prod_title:'Registro de Producci√≥n',prod_add:'Nuevo Registro',prod_flock:'Lote',prod_eggs:'Huevos Recolectados',prod_broken:'Rotos/Defectuosos',prod_size_s:'Peque√±o (S)',prod_size_m:'Mediano (M)',prod_size_l:'Grande (L)',prod_size_xl:'Extra Grande (XL)',prod_size_jumbo:'Jumbo',prod_shell:'Color C√°scara',prod_yolk:'Calidad Yema (1-10)',prod_deaths:'Muertes',prod_death_cause:'Causa de Muerte',prod_date:'Fecha',
san_title:'Sanidad',san_vaccines:'Vacunas',san_medications:'Medicamentos',san_outbreaks:'Brotes',
vac_title:'Plan de Vacunaci√≥n',vac_add:'Registrar Vacuna',vac_vaccine:'Vacuna',vac_scheduled:'Programada',vac_applied:'Aplicada',vac_batch:'Lote Vacuna',vac_route:'V√≠a',vac_overdue:'Vencida',vac_upcoming:'Pr√≥xima',vac_applied_status:'Aplicada',vac_pending:'Pendiente',vac_generate:'Generar Calendario',vac_mark_applied:'Marcar Aplicada',
med_title:'Medicamentos',med_add:'Registrar Medicamento',med_name:'Medicamento',med_reason:'Motivo',med_start:'Inicio',med_end:'Fin',med_withdrawal:'D√≠as Retiro',med_withdrawal_end:'Fin Retiro',med_dosage:'Dosis',med_in_withdrawal:'En Retiro',
out_title:'Brotes',out_add:'Registrar Brote',out_disease:'Enfermedad',out_start:'Inicio',out_end:'Fin',out_affected:'Afectadas',out_deaths:'Muertes',out_symptoms:'S√≠ntomas',out_treatment:'Tratamiento',out_loss:'P√©rdida Econ√≥mica',out_active:'Activo',out_controlled:'Controlado',out_resolved:'Resuelto',
feed_title:'Alimentaci√≥n',feed_purchases:'Compras',feed_consumption:'Consumo',feed_stock:'Stock Actual',feed_add_purchase:'Nueva Compra',feed_add_consumption:'Registrar Consumo',feed_type:'Tipo',feed_qty:'Cantidad (kg)',feed_cost:'Costo',feed_supplier:'Proveedor',feed_flock:'Lote',feed_low_alert:'Stock bajo',
cli_title:'Clientes',cli_add:'Nuevo Cliente',cli_route:'Ruta/Zona',cli_price:'Precios Acordados',cli_total:'Total Clientes',
fin_title:'Finanzas',fin_income:'Ingresos',fin_expenses:'Gastos',fin_receivables:'Cuentas por Cobrar',fin_summary:'Resumen',fin_add_income:'Nuevo Ingreso',fin_add_expense:'Nuevo Gasto',fin_add_receivable:'Nueva Cuenta',fin_type:'Tipo',fin_qty:'Cantidad',fin_unit_price:'Precio Unit.',fin_client:'Cliente',fin_category:'Categor√≠a',fin_description:'Descripci√≥n',fin_amount:'Monto',fin_due_date:'Vencimiento',fin_paid:'Pagado',fin_total_income:'Total Ingresos',fin_total_expenses:'Total Gastos',fin_net:'Resultado Neto',fin_cost_per_egg:'Costo/Huevo',fin_break_even:'Punto Equilibrio',fin_month:'Mes',
fin_cat_feed:'Alimento',fin_cat_vaccines:'Vacunas/Med.',fin_cat_transport:'Transporte',fin_cat_labor:'Mano de Obra',fin_cat_infrastructure:'Infraestructura',fin_cat_other:'Otros',
fin_type_eggs:'Venta Huevos',fin_type_birds:'Venta Aves',fin_type_manure:'Venta Abono',fin_type_other:'Otro',
ana_title:'An√°lisis',ana_comparison:'Comparaci√≥n Lotes',ana_seasonality:'Estacionalidad',ana_profitability:'Rentabilidad',ana_benchmarks:'Benchmarks',ana_best_flock:'Mejor Lote',ana_worst_flock:'Peor Lote',ana_avg_production:'Producci√≥n Promedio',ana_trend:'Tendencia',ana_kpi_evolution:'Evoluci√≥n KPI',ana_no_snapshots:'Sin snapshots. Guarde snapshots desde el Dashboard.',
ops_title:'Operaciones',ops_checklist:'Checklist Diario',ops_logbook:'Bit√°cora',ops_personnel:'Personal',ops_task:'Tarea',ops_done:'Completado',ops_add_task:'Agregar Tarea',ops_check_date:'Fecha',ops_log_entry:'Entrada',ops_log_category:'Categor√≠a',ops_log_add:'Nueva Entrada',
ops_log_cat_general:'General',ops_log_cat_health:'Sanidad',ops_log_cat_production:'Producci√≥n',ops_log_cat_maintenance:'Mantenimiento',ops_log_cat_observation:'Observaci√≥n',
ops_per_name:'Nombre',ops_per_role:'Cargo',ops_per_salary:'Salario',ops_per_start:'Fecha Inicio',ops_per_active:'Activo',ops_per_add:'Agregar Personal',
env_title:'Condiciones Ambientales',env_add:'Nuevo Registro',env_temp:'Temperatura (¬∞C)',env_humidity:'Humedad (%)',env_light:'Horas Luz',env_ventilation:'Ventilaci√≥n',env_density:'Densidad (aves/m¬≤)',env_optimal:'Rango √ìptimo',env_temp_range:'18-24¬∞C',env_humidity_range:'40-70%',env_light_range:'14-16 hrs',env_density_range:'4-5 aves/m¬≤',
cfg_title:'Configuraci√≥n',cfg_farm:'Datos de la Granja',cfg_farm_name:'Nombre Granja',cfg_location:'Ubicaci√≥n',cfg_capacity:'Capacidad (aves)',cfg_currency:'Moneda',cfg_alerts:'Umbrales de Alertas',cfg_min_feed:'Stock M√≠n. Alimento (kg)',cfg_max_mortality:'Mortalidad M√°x. (%)',cfg_alert_days:'D√≠as Anticipaci√≥n',cfg_data:'Datos',cfg_export:'Exportar (JSON)',cfg_import:'Importar (JSON)',cfg_reset:'Borrar Todo',cfg_reset_confirm:'¬øEliminar TODOS los datos?',cfg_saved:'Guardado',cfg_exported:'Datos exportados',cfg_imported:'Datos importados',cfg_reset_done:'Datos eliminados',cfg_checklist:'Checklist Predeterminado',cfg_checklist_items:'Tareas del checklist',cfg_theme:'Tema de Color',cfg_theme_blue:'Azul Marino',cfg_theme_green:'Verde',cfg_theme_purple:'P√∫rpura',cfg_theme_black:'Negro',
sidebar_subtitle:'Sistema Av√≠cola 360¬∞',prod_shell_white:'Blanco',prod_shell_brown:'Marr√≥n',prod_shell_cream:'Crema',required:'Campo requerido',no_flocks_birthdate:'No hay lotes con fecha de nacimiento',vac_select_flocks:'Seleccione lotes para generar calendario:',feed_type_placeholder:'Postura, Iniciador, etc.',avg_per_day:'Prom/d√≠a',per_flock:'Lote',history:'Historial',env_latest_reading:'√öltima Lectura',env_ok:'OK',env_out_of_range:'Fuera de rango',data_stats:'Estad√≠sticas de Datos',final_warning:'‚ö†Ô∏è ADVERTENCIA FINAL ‚Äî Se eliminar√°n TODOS los datos',total_salaries:'Total Salarios',eggs_unit:'huevos',csv_income:'Ingreso',csv_expense:'Gasto',fcr_unit:'kg alimento/kg huevo',lc_feed_starter:'Iniciador',lc_feed_grower:'Crecimiento',lc_feed_developer:'Desarrollo',lc_feed_prelay:'Pre-postura',lc_feed_layer:'Postura',lc_feed_lowlay:'Postura baja',lc_prod_label:'Prod',lc_prod_first:'Primeros huevos',lc_mile_1:'Vacunas Marek, Newcastle+BI, Gumboro',lc_mile_2:'Newcastle refuerzo, desarrollo plumaje',lc_mile_3:'Viruela, Encefalomielitis, Coriza, Salmonella',lc_mile_4:'Newcastle+BI refuerzo, cambio dieta, 16h luz',lc_mile_5:'Pico producci√≥n sem 26-30, monitorear FCR',lc_mile_6:'Newcastle refuerzo c/8-12 sem, evaluar rentabilidad',lc_mile_7:'Evaluar descarte vs muda forzada',lc_mile_8:'Venta ave descarte, limpieza galp√≥n',vac_route_injection:'Inyecci√≥n',vac_route_ocular:'Ocular/spray',vac_route_water:'Agua',vac_route_wing:'Punci√≥n alar',snapshots:'snapshots',error_prefix:'Error',chk_collect_eggs:'Recolectar huevos',chk_feed_birds:'Alimentar aves',chk_check_water:'Verificar agua',chk_check_health:'Revisar salud',chk_cleaning:'Limpieza',chk_record_temp:'Registrar temperatura',
weather_title:'Clima',weather_temp:'Temperatura',weather_humidity:'Humedad',weather_wind:'Viento',weather_forecast:'Pron√≥stico 3 D√≠as',weather_no_key:'Configure API key de OpenWeatherMap en Configuraci√≥n',weather_heat_alert:'Alerta de Estr√©s Cal√≥rico',weather_thi:'√çndice THI',weather_feels:'Sensaci√≥n',weather_last_update:'√öltima actualizaci√≥n',weather_test:'Probar',
geo_set_location:'Ubicaci√≥n de la Granja',geo_use_gps:'Usar mi GPS',geo_click_map:'Clic en el mapa para ubicar',geo_lat:'Latitud',geo_lng:'Longitud',geo_saved:'Ubicaci√≥n guardada',
iot_title:'IoT Sensores',iot_broker:'Broker MQTT (wss://)',iot_user:'Usuario MQTT',iot_pass:'Contrase√±a MQTT',iot_topic:'Prefijo Topic',iot_connect:'Conectar',iot_disconnect:'Desconectar',iot_live:'IoT En Vivo',iot_no_config:'Configure MQTT en Configuraci√≥n',iot_save_reading:'Guardar lectura actual',iot_connected:'Conectado',iot_disconnected:'Desconectado',iot_ammonia:'Amon√≠aco',iot_light:'Luz',iot_lux:'lux',iot_ppm:'ppm',
pred_title:'Predicciones',pred_forecast:'Pron√≥stico Producci√≥n',pred_anomaly:'Anomal√≠as',pred_drop_risk:'Riesgo de Ca√≠da',pred_breed_curve:'Curva de Raza',pred_fcr_trend:'Tendencia FCR',pred_next_7d:'Pr√≥ximos 7 d√≠as',pred_improving:'Mejorando',pred_worsening:'Empeorando',pred_stable:'Estable',pred_score:'Puntuaci√≥n',pred_low:'Bajo',pred_medium:'Medio',pred_high:'Alto',pred_vs_expected:'Real vs Esperado',
stress_title:'Eventos de Estr√©s',stress_type:'Tipo',stress_severity:'Severidad',stress_heat:'Calor',stress_disease:'Enfermedad',stress_feed_change:'Cambio Alimento',stress_power:'Corte El√©ctrico',stress_predator:'Depredador',stress_other:'Otro',stress_description:'Descripci√≥n',stress_add:'Nuevo Evento',stress_impact:'Impacto en Producci√≥n',stress_auto:'(Auto-generado)',
env_ammonia:'Amon√≠aco (ppm)',env_wind:'Velocidad Viento (km/h)',env_thi:'√çndice THI',env_manual:'Entrada Manual',env_history:'Historial',env_iot:'IoT En Vivo',
pwa_install:'Instalar App',pwa_offline:'Modo Offline Disponible',
cfg_owm_key:'API Key OpenWeatherMap',cfg_mqtt:'Configuraci√≥n MQTT',cfg_geo:'Geolocalizaci√≥n',
flock_housing:'Tipo Alojamiento',flock_housing_floor:'Piso',flock_housing_cage:'Jaula',flock_housing_free:'Libre',flock_target_curve:'Curva Objetivo',flock_egg_color:'Color Huevo',
ana_predictions:'Predicciones',
per_day:'por d√≠a',actual:'Real',expected:'Esperado',not_available:'no disponible',
// Biosecurity
nav_biosecurity:'Bioseguridad',bio_title:'Bioseguridad y Control de Plagas',bio_visitors:'Visitantes',bio_zones:'Zonas',bio_pests:'Plagas',bio_protocols:'Protocolos',
bio_add_visitor:'Nuevo Visitante',bio_visitor_name:'Nombre',bio_visitor_company:'Empresa',bio_visitor_purpose:'Prop√≥sito',bio_visitor_zone:'Zona',bio_visitor_plate:'Placa Veh√≠culo',bio_visitor_disinfected:'Desinfectado',bio_visitor_from_farm:'Granja Origen',bio_visitor_from_health:'Salud Granja Origen',bio_cross_risk:'‚ö†Ô∏è Riesgo contaminaci√≥n cruzada',
bio_add_zone:'Nueva Zona',bio_zone_name:'Nombre Zona',bio_zone_risk:'Nivel Riesgo',bio_zone_last_disinfection:'√öltima Desinfecci√≥n',bio_zone_frequency:'Frecuencia (d√≠as)',bio_risk_green:'Verde',bio_risk_yellow:'Amarillo',bio_risk_red:'Rojo',
bio_add_pest:'Nuevo Avistamiento',bio_pest_type:'Tipo',bio_pest_rodent:'Roedor',bio_pest_fly:'Mosca',bio_pest_wild_bird:'Ave Silvestre',bio_pest_other:'Otro',bio_pest_location:'Ubicaci√≥n',bio_pest_severity:'Severidad',bio_pest_action:'Acci√≥n Tomada',bio_pest_resolved:'Resuelto',
bio_add_protocol:'Nuevo Protocolo',bio_protocol_name:'Nombre Protocolo',bio_protocol_frequency:'Frecuencia',bio_protocol_daily:'Diario',bio_protocol_weekly:'Semanal',bio_protocol_monthly:'Mensual',bio_protocol_last:'√öltimo Completado',bio_protocol_items:'√çtems del Protocolo',bio_protocol_complete:'Completar',bio_protocol_overdue:'Vencido',
bio_pest_score:'Puntuaci√≥n Plagas',bio_overdue_disinfection:'Desinfecci√≥n vencida',bio_unresolved_pests:'Plagas sin resolver',
alert_bio_disinfection:'Desinfecci√≥n vencida zona',alert_bio_pests:'Plagas sin resolver',alert_bio_cross:'Riesgo contaminaci√≥n cruzada',
// Traceability
nav_traceability:'Trazabilidad',trace_title:'Trazabilidad de Huevos',trace_add:'Nuevo Lote',trace_batch_id:'ID Lote',trace_rack:'Rack',trace_box_count:'Cajas',trace_eggs_per_box:'Huevos/Caja',trace_qr:'C√≥digo QR',trace_delivery:'Fecha Entrega',trace_search:'Buscar por ID/QR',trace_origin:'Origen',trace_house:'Galp√≥n',
// Planning
nav_planning:'Planificaci√≥n',plan_title:'Planificaci√≥n de Producci√≥n',plan_add:'Nuevo Plan',plan_name:'Nombre Plan',plan_target_date:'Fecha Objetivo',plan_eggs_needed:'Huevos Necesarios',plan_allocations:'Asignaci√≥n de Lotes',plan_expected:'Producci√≥n Esperada',plan_gap:'Brecha',plan_on_track:'En Meta',plan_behind:'Atr√°s',plan_ahead:'Adelante',plan_estimate:'Estimaci√≥n',plan_commitment:'Compromiso',
// Egg types + market
prod_egg_type:'Tipo Huevo',prod_type_conventional:'Convencional',prod_type_free_range:'Campo Libre',prod_type_organic:'Org√°nico',prod_type_pasture:'Pastoreo',prod_type_decorative:'Decorativo',
prod_market:'Canal de Venta',prod_market_wholesale:'Mayorista',prod_market_supermarket:'Supermercado',prod_market_restaurant:'Restaurant',prod_market_direct:'Venta Directa',prod_market_export:'Exportaci√≥n',prod_market_pasteurized:'Pasteurizado',
ana_by_segment:'Rentabilidad por Segmento',ana_by_type:'Por Tipo',ana_by_channel:'Por Canal',
// Campo & Vet modes
nav_campo_mode:'Modo Campo',nav_vet_mode:'Modo Vet',campo_today:'HOY',campo_quick_entry:'Entrada R√°pida',vet_visit:'Visita realizada',vet_vaccines:'Vacunas aplicadas',vet_pending:'Pendiente revisi√≥n',vet_select_farm:'Seleccionar Granja/Lote',
// Accessibility
cfg_font_size:'Tama√±o Texto',cfg_font_small:'Peque√±o',cfg_font_normal:'Normal',cfg_font_large:'Grande',cfg_font_xlarge:'Extra Grande',cfg_dark_mode:'Modo Oscuro',cfg_theme_dark:'Oscuro',
// ML/Intelligence
pred_outbreak_risk:'Riesgo de Brote',pred_outbreak_high:'Alto Riesgo',pred_outbreak_medium:'Riesgo Medio',pred_outbreak_low:'Bajo Riesgo',pred_outbreak_factor:'Factor',pred_outbreak_weight:'Peso',pred_outbreak_value:'Valor',pred_probability:'Probabilidad',pred_factors:'Factores',pred_recommendations:'Recomendaciones',pred_confidence:'Confianza',pred_forecast_7d:'7 d√≠as',pred_forecast_14d:'14 d√≠as',pred_ensemble:'Pron√≥stico Conjunto',pred_forecast_upper:'Banda Superior',pred_forecast_lower:'Banda Inferior',
ana_segment_profit:'Rentabilidad por Segmento',cfg_accessibility:'Accesibilidad',
rec_title:'Recomendaciones',rec_dismiss:'Descartar',rec_check_diet:'Revisar dieta / dise√±o de alimentaci√≥n / descartar enfermedad',rec_check_env:'Verificar ambiente / enfermedad / estr√©s inmediatamente',rec_below_curve:'Producci√≥n bajo est√°ndar ‚Äî revisar estr√©s, luz, alimentaci√≥n',rec_buy_feed:'Programar compra de alimento',rec_record_env:'Registrar condiciones ambientales',rec_disinfect:'Ejecutar protocolo de desinfecci√≥n zona',rec_heat_plan:'Estr√©s cal√≥rico prolongado ‚Äî activar plan de enfriamiento',rec_lab_samples:'Llevar muestras al laboratorio',rec_ventilation:'Aumentar ventilaci√≥n, verificar agua fresca'
},en:{
save:'Save',cancel:'Cancel',delete:'Delete',edit:'Edit',add:'Add',close:'Close',actions:'Actions',date:'Date',notes:'Notes',name:'Name',phone:'Phone',email:'Email',address:'Address',confirm_delete:'Delete this record?',no_data:'No data recorded',total:'Total',all:'All',loading:'Loading',search:'Search',from:'From',to:'To',status:'Status',export_csv:'Export CSV',today:'Today',active:'Active',inactive:'Inactive',
nav_dashboard:'Dashboard',nav_production:'Production',nav_flocks:'Flocks',nav_health:'Health',nav_feed:'Feed',nav_clients:'Clients',nav_finances:'Finances',nav_analysis:'Analysis',nav_operations:'Operations',nav_environment:'Environment',nav_config:'Settings',
dash_title:'Main Dashboard',kpi_today:'Production Today',kpi_henday:'Hen-Day Rate',kpi_fcr:'Feed Conversion (FCR)',kpi_mortality:'Mortality',kpi_cost_egg:'Cost/Egg',kpi_income_net:'Net Income',kpi_alerts:'Alerts',kpi_active_hens:'Active Hens',kpi_active_flocks:'Active Flocks',dash_alerts:'Alerts',dash_trend:'30 Day Trend',dash_no_alerts:'No alerts',dash_snapshot:'Save KPI Snapshot',dash_kpi_history:'KPI History',
alert_vaccine_overdue:'Vaccine overdue',alert_vaccine_soon:'Vaccine upcoming',alert_low_feed:'Feed stock low',alert_high_mortality:'High mortality',alert_active_outbreak:'Active outbreak',alert_withdrawal:'Active withdrawal',
flock_title:'Flock Management',flock_add:'New Flock',flock_name:'Name',flock_breed:'Breed',flock_count:'Initial Count',flock_birthdate:'Birth Date',flock_purchase_date:'Purchase Date',flock_supplier:'Supplier',flock_cost:'Total Cost',flock_status:'Status',flock_notes:'Notes',flock_age:'Age',flock_health:'Health',flock_weeks:'wks',flock_days:'days',flock_current:'Current',flock_status_cria:'Brooding',flock_status_recria:'Growing',flock_status_produccion:'Production',flock_status_descarte:'Culled',flock_edit:'Edit Flock',flock_lifecycle:'Lifecycle',flock_roadmap:'Roadmap',
lc_pollito:'Chick',lc_cria:'Brooding',lc_recria:'Growing',lc_prepostura:'Pre-lay',lc_pico:'Peak Lay',lc_media:'Mid Lay',lc_baja:'Low Lay',lc_descarte:'Culled',lc_feed:'Feed',lc_temp:'Temp',lc_weeks:'Weeks',lc_milestone:'Milestones',lc_current_stage:'Current Stage',
prod_title:'Production Log',prod_add:'New Record',prod_flock:'Flock',prod_eggs:'Eggs Collected',prod_broken:'Broken/Defective',prod_size_s:'Small (S)',prod_size_m:'Medium (M)',prod_size_l:'Large (L)',prod_size_xl:'Extra Large (XL)',prod_size_jumbo:'Jumbo',prod_shell:'Shell Color',prod_yolk:'Yolk Quality (1-10)',prod_deaths:'Deaths',prod_death_cause:'Cause of Death',prod_date:'Date',
san_title:'Health Management',san_vaccines:'Vaccines',san_medications:'Medications',san_outbreaks:'Outbreaks',
vac_title:'Vaccination Plan',vac_add:'Record Vaccine',vac_vaccine:'Vaccine',vac_scheduled:'Scheduled',vac_applied:'Applied',vac_batch:'Batch',vac_route:'Route',vac_overdue:'Overdue',vac_upcoming:'Upcoming',vac_applied_status:'Applied',vac_pending:'Pending',vac_generate:'Generate Calendar',vac_mark_applied:'Mark Applied',
med_title:'Medications',med_add:'Record Medication',med_name:'Medication',med_reason:'Reason',med_start:'Start',med_end:'End',med_withdrawal:'Withdrawal Days',med_withdrawal_end:'Withdrawal End',med_dosage:'Dosage',med_in_withdrawal:'In Withdrawal',
out_title:'Outbreaks',out_add:'Record Outbreak',out_disease:'Disease',out_start:'Start',out_end:'End',out_affected:'Affected',out_deaths:'Deaths',out_symptoms:'Symptoms',out_treatment:'Treatment',out_loss:'Economic Loss',out_active:'Active',out_controlled:'Controlled',out_resolved:'Resolved',
feed_title:'Feed Management',feed_purchases:'Purchases',feed_consumption:'Consumption',feed_stock:'Current Stock',feed_add_purchase:'New Purchase',feed_add_consumption:'Record Consumption',feed_type:'Type',feed_qty:'Quantity (kg)',feed_cost:'Cost',feed_supplier:'Supplier',feed_flock:'Flock',feed_low_alert:'Low stock',
cli_title:'Clients',cli_add:'New Client',cli_route:'Route/Zone',cli_price:'Agreed Prices',cli_total:'Total Clients',
fin_title:'Finances',fin_income:'Income',fin_expenses:'Expenses',fin_receivables:'Receivables',fin_summary:'Summary',fin_add_income:'New Income',fin_add_expense:'New Expense',fin_add_receivable:'New Receivable',fin_type:'Type',fin_qty:'Quantity',fin_unit_price:'Unit Price',fin_client:'Client',fin_category:'Category',fin_description:'Description',fin_amount:'Amount',fin_due_date:'Due Date',fin_paid:'Paid',fin_total_income:'Total Income',fin_total_expenses:'Total Expenses',fin_net:'Net Result',fin_cost_per_egg:'Cost/Egg',fin_break_even:'Break-even',fin_month:'Month',
fin_cat_feed:'Feed',fin_cat_vaccines:'Vaccines/Meds',fin_cat_transport:'Transport',fin_cat_labor:'Labor',fin_cat_infrastructure:'Infrastructure',fin_cat_other:'Other',
fin_type_eggs:'Egg Sales',fin_type_birds:'Bird Sales',fin_type_manure:'Manure Sales',fin_type_other:'Other',
ana_title:'Analysis',ana_comparison:'Flock Comparison',ana_seasonality:'Seasonality',ana_profitability:'Profitability',ana_benchmarks:'Benchmarks',ana_best_flock:'Best Flock',ana_worst_flock:'Worst Flock',ana_avg_production:'Avg Production',ana_trend:'Trend',ana_kpi_evolution:'KPI Evolution',ana_no_snapshots:'No snapshots. Save snapshots from Dashboard.',
ops_title:'Operations',ops_checklist:'Daily Checklist',ops_logbook:'Logbook',ops_personnel:'Personnel',ops_task:'Task',ops_done:'Completed',ops_add_task:'Add Task',ops_check_date:'Date',ops_log_entry:'Entry',ops_log_category:'Category',ops_log_add:'New Entry',
ops_log_cat_general:'General',ops_log_cat_health:'Health',ops_log_cat_production:'Production',ops_log_cat_maintenance:'Maintenance',ops_log_cat_observation:'Observation',
ops_per_name:'Name',ops_per_role:'Role',ops_per_salary:'Salary',ops_per_start:'Start Date',ops_per_active:'Active',ops_per_add:'Add Personnel',
env_title:'Environmental Conditions',env_add:'New Record',env_temp:'Temperature (¬∞C)',env_humidity:'Humidity (%)',env_light:'Light Hours',env_ventilation:'Ventilation',env_density:'Density (birds/m¬≤)',env_optimal:'Optimal Range',env_temp_range:'18-24¬∞C',env_humidity_range:'40-70%',env_light_range:'14-16 hrs',env_density_range:'4-5 birds/m¬≤',
cfg_title:'Settings',cfg_farm:'Farm Details',cfg_farm_name:'Farm Name',cfg_location:'Location',cfg_capacity:'Capacity (birds)',cfg_currency:'Currency',cfg_alerts:'Alert Thresholds',cfg_min_feed:'Min Feed Stock (kg)',cfg_max_mortality:'Max Mortality (%)',cfg_alert_days:'Alert Days Ahead',cfg_data:'Data',cfg_export:'Export (JSON)',cfg_import:'Import (JSON)',cfg_reset:'Delete All',cfg_reset_confirm:'Delete ALL data permanently?',cfg_saved:'Saved',cfg_exported:'Data exported',cfg_imported:'Data imported',cfg_reset_done:'Data deleted',cfg_checklist:'Default Checklist',cfg_checklist_items:'Daily checklist tasks',cfg_theme:'Color Theme',cfg_theme_blue:'Navy Blue',cfg_theme_green:'Green',cfg_theme_purple:'Purple',cfg_theme_black:'Black',
sidebar_subtitle:'Poultry System 360¬∞',prod_shell_white:'White',prod_shell_brown:'Brown',prod_shell_cream:'Cream',required:'Required field',no_flocks_birthdate:'No flocks with birth date',vac_select_flocks:'Select flocks to generate calendar:',feed_type_placeholder:'Layer, Starter, etc.',avg_per_day:'Avg/day',per_flock:'Flock',history:'History',env_latest_reading:'Latest Reading',env_ok:'OK',env_out_of_range:'Out of range',data_stats:'Data Statistics',final_warning:'‚ö†Ô∏è FINAL WARNING ‚Äî ALL data will be deleted',total_salaries:'Total Salaries',eggs_unit:'eggs',csv_income:'Income',csv_expense:'Expense',fcr_unit:'kg feed/kg egg',lc_feed_starter:'Starter',lc_feed_grower:'Grower',lc_feed_developer:'Developer',lc_feed_prelay:'Pre-lay',lc_feed_layer:'Layer',lc_feed_lowlay:'Low-lay',lc_prod_label:'Prod',lc_prod_first:'First eggs',lc_mile_1:'Marek, Newcastle+IB, Gumboro vaccines',lc_mile_2:'Newcastle booster, feather development',lc_mile_3:'Fowl Pox, AE, Coryza, Salmonella',lc_mile_4:'Newcastle+IB booster, diet change, 16h light',lc_mile_5:'Peak production wk 26-30, monitor FCR',lc_mile_6:'Newcastle booster every 8-12 wk, evaluate profitability',lc_mile_7:'Evaluate culling vs forced molting',lc_mile_8:'Sell culled birds, clean house',vac_route_injection:'Injection',vac_route_ocular:'Ocular/spray',vac_route_water:'Water',vac_route_wing:'Wing web',snapshots:'snapshots',error_prefix:'Error',chk_collect_eggs:'Collect eggs',chk_feed_birds:'Feed birds',chk_check_water:'Check water',chk_check_health:'Check health',chk_cleaning:'Cleaning',chk_record_temp:'Record temperature',
weather_title:'Weather',weather_temp:'Temperature',weather_humidity:'Humidity',weather_wind:'Wind',weather_forecast:'3-Day Forecast',weather_no_key:'Configure OpenWeatherMap API key in Settings',weather_heat_alert:'Heat Stress Alert',weather_thi:'THI Index',weather_feels:'Feels like',weather_last_update:'Last updated',weather_test:'Test',
geo_set_location:'Farm Location',geo_use_gps:'Use my GPS',geo_click_map:'Click map to set location',geo_lat:'Latitude',geo_lng:'Longitude',geo_saved:'Location saved',
iot_title:'IoT Sensors',iot_broker:'MQTT Broker (wss://)',iot_user:'MQTT User',iot_pass:'MQTT Password',iot_topic:'Topic Prefix',iot_connect:'Connect',iot_disconnect:'Disconnect',iot_live:'IoT Live',iot_no_config:'Configure MQTT in Settings',iot_save_reading:'Save current reading',iot_connected:'Connected',iot_disconnected:'Disconnected',iot_ammonia:'Ammonia',iot_light:'Light',iot_lux:'lux',iot_ppm:'ppm',
pred_title:'Predictions',pred_forecast:'Production Forecast',pred_anomaly:'Anomalies',pred_drop_risk:'Drop Risk',pred_breed_curve:'Breed Curve',pred_fcr_trend:'FCR Trend',pred_next_7d:'Next 7 days',pred_improving:'Improving',pred_worsening:'Worsening',pred_stable:'Stable',pred_score:'Score',pred_low:'Low',pred_medium:'Medium',pred_high:'High',pred_vs_expected:'Actual vs Expected',
stress_title:'Stress Events',stress_type:'Type',stress_severity:'Severity',stress_heat:'Heat',stress_disease:'Disease',stress_feed_change:'Feed Change',stress_power:'Power Outage',stress_predator:'Predator',stress_other:'Other',stress_description:'Description',stress_add:'New Event',stress_impact:'Production Impact',stress_auto:'(Auto-generated)',
env_ammonia:'Ammonia (ppm)',env_wind:'Wind Speed (km/h)',env_thi:'THI Index',env_manual:'Manual Entry',env_history:'History',env_iot:'IoT Live',
pwa_install:'Install App',pwa_offline:'Offline Mode Available',
cfg_owm_key:'OpenWeatherMap API Key',cfg_mqtt:'MQTT Settings',cfg_geo:'Geolocation',
flock_housing:'Housing Type',flock_housing_floor:'Floor',flock_housing_cage:'Cage',flock_housing_free:'Free-range',flock_target_curve:'Target Curve',flock_egg_color:'Egg Color',
ana_predictions:'Predictions',
per_day:'per day',actual:'Actual',expected:'Expected',not_available:'not available',
nav_biosecurity:'Biosecurity',bio_title:'Biosecurity & Pest Control',bio_visitors:'Visitors',bio_zones:'Zones',bio_pests:'Pests',bio_protocols:'Protocols',
bio_add_visitor:'New Visitor',bio_visitor_name:'Name',bio_visitor_company:'Company',bio_visitor_purpose:'Purpose',bio_visitor_zone:'Zone',bio_visitor_plate:'Vehicle Plate',bio_visitor_disinfected:'Disinfected',bio_visitor_from_farm:'Origin Farm',bio_visitor_from_health:'Origin Farm Health',bio_cross_risk:'‚ö†Ô∏è Cross-contamination risk',
bio_add_zone:'New Zone',bio_zone_name:'Zone Name',bio_zone_risk:'Risk Level',bio_zone_last_disinfection:'Last Disinfection',bio_zone_frequency:'Frequency (days)',bio_risk_green:'Green',bio_risk_yellow:'Yellow',bio_risk_red:'Red',
bio_add_pest:'New Sighting',bio_pest_type:'Type',bio_pest_rodent:'Rodent',bio_pest_fly:'Fly',bio_pest_wild_bird:'Wild Bird',bio_pest_other:'Other',bio_pest_location:'Location',bio_pest_severity:'Severity',bio_pest_action:'Action Taken',bio_pest_resolved:'Resolved',
bio_add_protocol:'New Protocol',bio_protocol_name:'Protocol Name',bio_protocol_frequency:'Frequency',bio_protocol_daily:'Daily',bio_protocol_weekly:'Weekly',bio_protocol_monthly:'Monthly',bio_protocol_last:'Last Completed',bio_protocol_items:'Protocol Items',bio_protocol_complete:'Complete',bio_protocol_overdue:'Overdue',
bio_pest_score:'Pest Score',bio_overdue_disinfection:'Overdue disinfection',bio_unresolved_pests:'Unresolved pests',
alert_bio_disinfection:'Zone disinfection overdue',alert_bio_pests:'Unresolved pests',alert_bio_cross:'Cross-contamination risk',
nav_traceability:'Traceability',trace_title:'Egg Traceability',trace_add:'New Batch',trace_batch_id:'Batch ID',trace_rack:'Rack',trace_box_count:'Boxes',trace_eggs_per_box:'Eggs/Box',trace_qr:'QR Code',trace_delivery:'Delivery Date',trace_search:'Search by ID/QR',trace_origin:'Origin',trace_house:'House',
nav_planning:'Planning',plan_title:'Production Planning',plan_add:'New Plan',plan_name:'Plan Name',plan_target_date:'Target Date',plan_eggs_needed:'Eggs Needed',plan_allocations:'Flock Allocations',plan_expected:'Expected Production',plan_gap:'Gap',plan_on_track:'On Track',plan_behind:'Behind',plan_ahead:'Ahead',plan_estimate:'Estimate',plan_commitment:'Commitment',
prod_egg_type:'Egg Type',prod_type_conventional:'Conventional',prod_type_free_range:'Free Range',prod_type_organic:'Organic',prod_type_pasture:'Pasture Raised',prod_type_decorative:'Decorative',
prod_market:'Market Channel',prod_market_wholesale:'Wholesale',prod_market_supermarket:'Supermarket',prod_market_restaurant:'Restaurant',prod_market_direct:'Direct Sale',prod_market_export:'Export',prod_market_pasteurized:'Pasteurized',
ana_by_segment:'Profitability by Segment',ana_by_type:'By Type',ana_by_channel:'By Channel',
nav_campo_mode:'Campo Mode',nav_vet_mode:'Vet Mode',campo_today:'TODAY',campo_quick_entry:'Quick Entry',vet_visit:'Visit completed',vet_vaccines:'Vaccines applied',vet_pending:'Pending review',vet_select_farm:'Select Farm/Flock',
cfg_font_size:'Text Size',cfg_font_small:'Small',cfg_font_normal:'Normal',cfg_font_large:'Large',cfg_font_xlarge:'Extra Large',cfg_dark_mode:'Dark Mode',cfg_theme_dark:'Dark',
pred_outbreak_risk:'Outbreak Risk',pred_outbreak_high:'High Risk',pred_outbreak_medium:'Medium Risk',pred_outbreak_low:'Low Risk',pred_outbreak_factor:'Factor',pred_outbreak_weight:'Weight',pred_outbreak_value:'Value',pred_probability:'Probability',pred_factors:'Factors',pred_recommendations:'Recommendations',pred_confidence:'Confidence',pred_forecast_7d:'7 days',pred_forecast_14d:'14 days',pred_ensemble:'Ensemble Forecast',pred_forecast_upper:'Upper Band',pred_forecast_lower:'Lower Band',
ana_segment_profit:'Profitability by Segment',cfg_accessibility:'Accessibility',
rec_title:'Recommendations',rec_dismiss:'Dismiss',rec_check_diet:'Check diet / feed design / rule out disease',rec_check_env:'Check environment / disease / stress immediately',rec_below_curve:'Below standard production ‚Äî check stress, light, feed',rec_buy_feed:'Schedule feed purchase',rec_record_env:'Record environmental conditions',rec_disinfect:'Execute disinfection protocol zone',rec_heat_plan:'Prolonged heat stress ‚Äî activate cooling plan',rec_lab_samples:'Take samples to laboratory',rec_ventilation:'Increase ventilation, check fresh water'
},pt:{
save:'Salvar',cancel:'Cancelar',delete:'Excluir',edit:'Editar',add:'Adicionar',close:'Fechar',actions:'A√ß√µes',date:'Data',notes:'Observa√ß√µes',name:'Nome',phone:'Telefone',email:'Email',address:'Endere√ßo',confirm_delete:'Excluir este registro?',no_data:'Nenhum dado registrado',total:'Total',all:'Todos',loading:'Carregando',search:'Buscar',from:'De',to:'At√©',status:'Status',export_csv:'Exportar CSV',today:'Hoje',active:'Ativo',inactive:'Inativo',
nav_dashboard:'Dashboard',nav_production:'Produ√ß√£o',nav_flocks:'Lotes',nav_health:'Sanidade',nav_feed:'Alimenta√ß√£o',nav_clients:'Clientes',nav_finances:'Finan√ßas',nav_analysis:'An√°lise',nav_operations:'Opera√ß√µes',nav_environment:'Ambiente',nav_config:'Configura√ß√£o',
dash_title:'Painel Principal',kpi_today:'Produ√ß√£o Hoje',kpi_henday:'Taxa Hen-Day',kpi_fcr:'Convers√£o (FCR)',kpi_mortality:'Mortalidade',kpi_cost_egg:'Custo/Ovo',kpi_income_net:'Receita L√≠quida',kpi_alerts:'Alertas',kpi_active_hens:'Galinhas Ativas',kpi_active_flocks:'Lotes Ativos',dash_alerts:'Alertas',dash_trend:'Tend√™ncia 30 Dias',dash_no_alerts:'Sem alertas',dash_snapshot:'Salvar Snapshot KPI',dash_kpi_history:'Hist√≥rico KPI',
alert_vaccine_overdue:'Vacina vencida',alert_vaccine_soon:'Vacina pr√≥xima',alert_low_feed:'Estoque de ra√ß√£o baixo',alert_high_mortality:'Mortalidade alta',alert_active_outbreak:'Surto ativo',alert_withdrawal:'Car√™ncia ativa',
flock_title:'Gest√£o de Lotes',flock_add:'Novo Lote',flock_name:'Nome',flock_breed:'Ra√ßa',flock_count:'Quantidade Inicial',flock_birthdate:'Data de Nascimento',flock_purchase_date:'Data de Compra',flock_supplier:'Fornecedor',flock_cost:'Custo Total',flock_status:'Status',flock_notes:'Observa√ß√µes',flock_age:'Idade',flock_health:'Sa√∫de',flock_weeks:'sem',flock_days:'dias',flock_current:'Atuais',flock_status_cria:'Cria',flock_status_recria:'Recria',flock_status_produccion:'Produ√ß√£o',flock_status_descarte:'Descarte',flock_edit:'Editar Lote',flock_lifecycle:'Ciclo de Vida',flock_roadmap:'Roadmap',
lc_pollito:'Pintinho',lc_cria:'Cria',lc_recria:'Recria',lc_prepostura:'Pr√©-postura',lc_pico:'Postura Pico',lc_media:'Postura M√©dia',lc_baja:'Postura Baixa',lc_descarte:'Descarte',lc_feed:'Ra√ß√£o',lc_temp:'Temp',lc_weeks:'Semanas',lc_milestone:'Marcos',lc_current_stage:'Etapa Atual',
prod_title:'Registro de Produ√ß√£o',prod_add:'Novo Registro',prod_flock:'Lote',prod_eggs:'Ovos Coletados',prod_broken:'Quebrados/Defeituosos',prod_size_s:'Pequeno (S)',prod_size_m:'M√©dio (M)',prod_size_l:'Grande (L)',prod_size_xl:'Extra Grande (XL)',prod_size_jumbo:'Jumbo',prod_shell:'Cor da Casca',prod_yolk:'Qualidade Gema (1-10)',prod_deaths:'Mortes',prod_death_cause:'Causa da Morte',prod_date:'Data',
san_title:'Sanidade',san_vaccines:'Vacinas',san_medications:'Medicamentos',san_outbreaks:'Surtos',
vac_title:'Plano de Vacina√ß√£o',vac_add:'Registrar Vacina',vac_vaccine:'Vacina',vac_scheduled:'Programada',vac_applied:'Aplicada',vac_batch:'Lote Vacina',vac_route:'Via',vac_overdue:'Vencida',vac_upcoming:'Pr√≥xima',vac_applied_status:'Aplicada',vac_pending:'Pendente',vac_generate:'Gerar Calend√°rio',vac_mark_applied:'Marcar Aplicada',
med_title:'Medicamentos',med_add:'Registrar Medicamento',med_name:'Medicamento',med_reason:'Motivo',med_start:'In√≠cio',med_end:'Fim',med_withdrawal:'Dias de Car√™ncia',med_withdrawal_end:'Fim da Car√™ncia',med_dosage:'Dosagem',med_in_withdrawal:'Em Car√™ncia',
out_title:'Surtos',out_add:'Registrar Surto',out_disease:'Doen√ßa',out_start:'In√≠cio',out_end:'Fim',out_affected:'Afetadas',out_deaths:'Mortes',out_symptoms:'Sintomas',out_treatment:'Tratamento',out_loss:'Perda Econ√¥mica',out_active:'Ativo',out_controlled:'Controlado',out_resolved:'Resolvido',
feed_title:'Alimenta√ß√£o',feed_purchases:'Compras',feed_consumption:'Consumo',feed_stock:'Estoque Atual',feed_add_purchase:'Nova Compra',feed_add_consumption:'Registrar Consumo',feed_type:'Tipo',feed_qty:'Quantidade (kg)',feed_cost:'Custo',feed_supplier:'Fornecedor',feed_flock:'Lote',feed_low_alert:'Estoque baixo',
cli_title:'Clientes',cli_add:'Novo Cliente',cli_route:'Rota/Zona',cli_price:'Pre√ßos Acordados',cli_total:'Total de Clientes',
fin_title:'Finan√ßas',fin_income:'Receitas',fin_expenses:'Despesas',fin_receivables:'Contas a Receber',fin_summary:'Resumo',fin_add_income:'Nova Receita',fin_add_expense:'Nova Despesa',fin_add_receivable:'Nova Conta',fin_type:'Tipo',fin_qty:'Quantidade',fin_unit_price:'Pre√ßo Unit.',fin_client:'Cliente',fin_category:'Categoria',fin_description:'Descri√ß√£o',fin_amount:'Valor',fin_due_date:'Vencimento',fin_paid:'Pago',fin_total_income:'Total Receitas',fin_total_expenses:'Total Despesas',fin_net:'Resultado L√≠quido',fin_cost_per_egg:'Custo/Ovo',fin_break_even:'Ponto de Equil√≠brio',fin_month:'M√™s',
fin_cat_feed:'Ra√ß√£o',fin_cat_vaccines:'Vacinas/Med.',fin_cat_transport:'Transporte',fin_cat_labor:'M√£o de Obra',fin_cat_infrastructure:'Infraestrutura',fin_cat_other:'Outros',
fin_type_eggs:'Venda de Ovos',fin_type_birds:'Venda de Aves',fin_type_manure:'Venda de Adubo',fin_type_other:'Outro',
ana_title:'An√°lise',ana_comparison:'Compara√ß√£o de Lotes',ana_seasonality:'Sazonalidade',ana_profitability:'Rentabilidade',ana_benchmarks:'Benchmarks',ana_best_flock:'Melhor Lote',ana_worst_flock:'Pior Lote',ana_avg_production:'Produ√ß√£o M√©dia',ana_trend:'Tend√™ncia',ana_kpi_evolution:'Evolu√ß√£o KPI',ana_no_snapshots:'Sem snapshots. Salve snapshots pelo Dashboard.',
ops_title:'Opera√ß√µes',ops_checklist:'Checklist Di√°rio',ops_logbook:'Di√°rio de Bordo',ops_personnel:'Pessoal',ops_task:'Tarefa',ops_done:'Conclu√≠do',ops_add_task:'Adicionar Tarefa',ops_check_date:'Data',ops_log_entry:'Entrada',ops_log_category:'Categoria',ops_log_add:'Nova Entrada',
ops_log_cat_general:'Geral',ops_log_cat_health:'Sanidade',ops_log_cat_production:'Produ√ß√£o',ops_log_cat_maintenance:'Manuten√ß√£o',ops_log_cat_observation:'Observa√ß√£o',
ops_per_name:'Nome',ops_per_role:'Cargo',ops_per_salary:'Sal√°rio',ops_per_start:'Data de In√≠cio',ops_per_active:'Ativo',ops_per_add:'Adicionar Pessoal',
env_title:'Condi√ß√µes Ambientais',env_add:'Novo Registro',env_temp:'Temperatura (¬∞C)',env_humidity:'Umidade (%)',env_light:'Horas de Luz',env_ventilation:'Ventila√ß√£o',env_density:'Densidade (aves/m¬≤)',env_optimal:'Faixa Ideal',env_temp_range:'18-24¬∞C',env_humidity_range:'40-70%',env_light_range:'14-16 hrs',env_density_range:'4-5 aves/m¬≤',
cfg_title:'Configura√ß√£o',cfg_farm:'Dados da Granja',cfg_farm_name:'Nome da Granja',cfg_location:'Localiza√ß√£o',cfg_capacity:'Capacidade (aves)',cfg_currency:'Moeda',cfg_alerts:'Limites de Alertas',cfg_min_feed:'Estoque M√≠n. Ra√ß√£o (kg)',cfg_max_mortality:'Mortalidade M√°x. (%)',cfg_alert_days:'Dias de Anteced√™ncia',cfg_data:'Dados',cfg_export:'Exportar (JSON)',cfg_import:'Importar (JSON)',cfg_reset:'Excluir Tudo',cfg_reset_confirm:'Excluir TODOS os dados permanentemente?',cfg_saved:'Salvo',cfg_exported:'Dados exportados',cfg_imported:'Dados importados',cfg_reset_done:'Dados exclu√≠dos',cfg_checklist:'Checklist Padr√£o',cfg_checklist_items:'Tarefas do checklist di√°rio',cfg_theme:'Tema de Cor',cfg_theme_blue:'Azul Marinho',cfg_theme_green:'Verde',cfg_theme_purple:'Roxo',cfg_theme_black:'Preto',
sidebar_subtitle:'Sistema Av√≠cola 360¬∞',prod_shell_white:'Branco',prod_shell_brown:'Marrom',prod_shell_cream:'Creme',required:'Campo obrigat√≥rio',no_flocks_birthdate:'Nenhum lote com data de nascimento',vac_select_flocks:'Selecione lotes para gerar calend√°rio:',feed_type_placeholder:'Postura, Inicial, etc.',avg_per_day:'M√©d/dia',per_flock:'Lote',history:'Hist√≥rico',env_latest_reading:'√öltima Leitura',env_ok:'OK',env_out_of_range:'Fora da faixa',data_stats:'Estat√≠sticas de Dados',final_warning:'‚ö†Ô∏è AVISO FINAL ‚Äî TODOS os dados ser√£o exclu√≠dos',total_salaries:'Total Sal√°rios',eggs_unit:'ovos',csv_income:'Receita',csv_expense:'Despesa',fcr_unit:'kg ra√ß√£o/kg ovo',lc_feed_starter:'Inicial',lc_feed_grower:'Crescimento',lc_feed_developer:'Desenvolvimento',lc_feed_prelay:'Pr√©-postura',lc_feed_layer:'Postura',lc_feed_lowlay:'Postura baixa',lc_prod_label:'Prod',lc_prod_first:'Primeiros ovos',lc_mile_1:'Vacinas Marek, Newcastle+BI, Gumboro',lc_mile_2:'Newcastle refor√ßo, desenvolvimento plumagem',lc_mile_3:'Var√≠ola, Encefalomielite, Coriza, Salmonela',lc_mile_4:'Newcastle+BI refor√ßo, mudan√ßa dieta, 16h luz',lc_mile_5:'Pico produ√ß√£o sem 26-30, monitorar FCR',lc_mile_6:'Newcastle refor√ßo a cada 8-12 sem, avaliar rentabilidade',lc_mile_7:'Avaliar descarte vs muda for√ßada',lc_mile_8:'Venda ave descarte, limpeza galp√£o',vac_route_injection:'Inje√ß√£o',vac_route_ocular:'Ocular/spray',vac_route_water:'√Ågua',vac_route_wing:'Pun√ß√£o alar',snapshots:'snapshots',error_prefix:'Erro',chk_collect_eggs:'Coletar ovos',chk_feed_birds:'Alimentar aves',chk_check_water:'Verificar √°gua',chk_check_health:'Verificar sa√∫de',chk_cleaning:'Limpeza',chk_record_temp:'Registrar temperatura',
weather_title:'Clima',weather_temp:'Temperatura',weather_humidity:'Umidade',weather_wind:'Vento',weather_forecast:'Previs√£o 3 Dias',weather_no_key:'Configure a chave API OpenWeatherMap em Configura√ß√£o',weather_heat_alert:'Alerta de Estresse T√©rmico',weather_thi:'√çndice THI',weather_feels:'Sensa√ß√£o',weather_last_update:'√öltima atualiza√ß√£o',weather_test:'Testar',
geo_set_location:'Localiza√ß√£o da Granja',geo_use_gps:'Usar meu GPS',geo_click_map:'Clique no mapa para localizar',geo_lat:'Latitude',geo_lng:'Longitude',geo_saved:'Localiza√ß√£o salva',
iot_title:'IoT Sensores',iot_broker:'Broker MQTT (wss://)',iot_user:'Usu√°rio MQTT',iot_pass:'Senha MQTT',iot_topic:'Prefixo T√≥pico',iot_connect:'Conectar',iot_disconnect:'Desconectar',iot_live:'IoT Ao Vivo',iot_no_config:'Configure MQTT em Configura√ß√£o',iot_save_reading:'Salvar leitura atual',iot_connected:'Conectado',iot_disconnected:'Desconectado',iot_ammonia:'Am√¥nia',iot_light:'Luz',iot_lux:'lux',iot_ppm:'ppm',
pred_title:'Predi√ß√µes',pred_forecast:'Previs√£o de Produ√ß√£o',pred_anomaly:'Anomalias',pred_drop_risk:'Risco de Queda',pred_breed_curve:'Curva da Ra√ßa',pred_fcr_trend:'Tend√™ncia FCR',pred_next_7d:'Pr√≥ximos 7 dias',pred_improving:'Melhorando',pred_worsening:'Piorando',pred_stable:'Est√°vel',pred_score:'Pontua√ß√£o',pred_low:'Baixo',pred_medium:'M√©dio',pred_high:'Alto',pred_vs_expected:'Real vs Esperado',
stress_title:'Eventos de Estresse',stress_type:'Tipo',stress_severity:'Severidade',stress_heat:'Calor',stress_disease:'Doen√ßa',stress_feed_change:'Mudan√ßa de Ra√ß√£o',stress_power:'Queda de Energia',stress_predator:'Predador',stress_other:'Outro',stress_description:'Descri√ß√£o',stress_add:'Novo Evento',stress_impact:'Impacto na Produ√ß√£o',stress_auto:'(Auto-gerado)',
env_ammonia:'Am√¥nia (ppm)',env_wind:'Velocidade do Vento (km/h)',env_thi:'√çndice THI',env_manual:'Entrada Manual',env_history:'Hist√≥rico',env_iot:'IoT Ao Vivo',
pwa_install:'Instalar App',pwa_offline:'Modo Offline Dispon√≠vel',
cfg_owm_key:'Chave API OpenWeatherMap',cfg_mqtt:'Configura√ß√£o MQTT',cfg_geo:'Geolocaliza√ß√£o',
flock_housing:'Tipo de Alojamento',flock_housing_floor:'Piso',flock_housing_cage:'Gaiola',flock_housing_free:'Livre',flock_target_curve:'Curva Alvo',flock_egg_color:'Cor do Ovo',
ana_predictions:'Predi√ß√µes',
per_day:'por dia',actual:'Real',expected:'Esperado',not_available:'n√£o dispon√≠vel',
nav_biosecurity:'Biosseguran√ßa',bio_title:'Biosseguran√ßa e Controle de Pragas',bio_visitors:'Visitantes',bio_zones:'Zonas',bio_pests:'Pragas',bio_protocols:'Protocolos',
bio_add_visitor:'Novo Visitante',bio_visitor_name:'Nome',bio_visitor_company:'Empresa',bio_visitor_purpose:'Prop√≥sito',bio_visitor_zone:'Zona',bio_visitor_plate:'Placa Ve√≠culo',bio_visitor_disinfected:'Desinfetado',bio_visitor_from_farm:'Granja de Origem',bio_visitor_from_health:'Sa√∫de Granja Origem',bio_cross_risk:'‚ö†Ô∏è Risco de contamina√ß√£o cruzada',
bio_add_zone:'Nova Zona',bio_zone_name:'Nome da Zona',bio_zone_risk:'N√≠vel de Risco',bio_zone_last_disinfection:'√öltima Desinfec√ß√£o',bio_zone_frequency:'Frequ√™ncia (dias)',bio_risk_green:'Verde',bio_risk_yellow:'Amarelo',bio_risk_red:'Vermelho',
bio_add_pest:'Novo Avistamento',bio_pest_type:'Tipo',bio_pest_rodent:'Roedor',bio_pest_fly:'Mosca',bio_pest_wild_bird:'Ave Silvestre',bio_pest_other:'Outro',bio_pest_location:'Localiza√ß√£o',bio_pest_severity:'Severidade',bio_pest_action:'A√ß√£o Tomada',bio_pest_resolved:'Resolvido',
bio_add_protocol:'Novo Protocolo',bio_protocol_name:'Nome do Protocolo',bio_protocol_frequency:'Frequ√™ncia',bio_protocol_daily:'Di√°rio',bio_protocol_weekly:'Semanal',bio_protocol_monthly:'Mensal',bio_protocol_last:'√öltimo Completado',bio_protocol_items:'Itens do Protocolo',bio_protocol_complete:'Completar',bio_protocol_overdue:'Vencido',
bio_pest_score:'Pontua√ß√£o de Pragas',bio_overdue_disinfection:'Desinfec√ß√£o vencida',bio_unresolved_pests:'Pragas n√£o resolvidas',
alert_bio_disinfection:'Desinfec√ß√£o de zona vencida',alert_bio_pests:'Pragas n√£o resolvidas',alert_bio_cross:'Risco de contamina√ß√£o cruzada',
nav_traceability:'Rastreabilidade',trace_title:'Rastreabilidade de Ovos',trace_add:'Novo Lote',trace_batch_id:'ID do Lote',trace_rack:'Rack',trace_box_count:'Caixas',trace_eggs_per_box:'Ovos/Caixa',trace_qr:'C√≥digo QR',trace_delivery:'Data de Entrega',trace_search:'Buscar por ID/QR',trace_origin:'Origem',trace_house:'Galp√£o',
nav_planning:'Planejamento',plan_title:'Planejamento de Produ√ß√£o',plan_add:'Novo Plano',plan_name:'Nome do Plano',plan_target_date:'Data Alvo',plan_eggs_needed:'Ovos Necess√°rios',plan_allocations:'Aloca√ß√£o de Lotes',plan_expected:'Produ√ß√£o Esperada',plan_gap:'Diferen√ßa',plan_on_track:'No Alvo',plan_behind:'Atrasado',plan_ahead:'Adiantado',plan_estimate:'Estimativa',plan_commitment:'Compromisso',
prod_egg_type:'Tipo de Ovo',prod_type_conventional:'Convencional',prod_type_free_range:'Caipira',prod_type_organic:'Org√¢nico',prod_type_pasture:'Pastoreio',prod_type_decorative:'Decorativo',
prod_market:'Canal de Venda',prod_market_wholesale:'Atacado',prod_market_supermarket:'Supermercado',prod_market_restaurant:'Restaurante',prod_market_direct:'Venda Direta',prod_market_export:'Exporta√ß√£o',prod_market_pasteurized:'Pasteurizado',
ana_by_segment:'Rentabilidade por Segmento',ana_by_type:'Por Tipo',ana_by_channel:'Por Canal',
nav_campo_mode:'Modo Campo',nav_vet_mode:'Modo Vet',campo_today:'HOJE',campo_quick_entry:'Entrada R√°pida',vet_visit:'Visita realizada',vet_vaccines:'Vacinas aplicadas',vet_pending:'Pendente revis√£o',vet_select_farm:'Selecionar Granja/Lote',
cfg_font_size:'Tamanho do Texto',cfg_font_small:'Pequeno',cfg_font_normal:'Normal',cfg_font_large:'Grande',cfg_font_xlarge:'Extra Grande',cfg_dark_mode:'Modo Escuro',cfg_theme_dark:'Escuro',
pred_outbreak_risk:'Risco de Surto',pred_outbreak_high:'Alto Risco',pred_outbreak_medium:'Risco M√©dio',pred_outbreak_low:'Baixo Risco',pred_outbreak_factor:'Fator',pred_outbreak_weight:'Peso',pred_outbreak_value:'Valor',pred_probability:'Probabilidade',pred_factors:'Fatores',pred_recommendations:'Recomenda√ß√µes',pred_confidence:'Confian√ßa',pred_forecast_7d:'7 dias',pred_forecast_14d:'14 dias',pred_ensemble:'Previs√£o Conjunta',pred_forecast_upper:'Banda Superior',pred_forecast_lower:'Banda Inferior',
ana_segment_profit:'Rentabilidade por Segmento',cfg_accessibility:'Acessibilidade',
rec_title:'Recomenda√ß√µes',rec_dismiss:'Descartar',rec_check_diet:'Verificar dieta / formula√ß√£o de ra√ß√£o / descartar doen√ßa',rec_check_env:'Verificar ambiente / doen√ßa / estresse imediatamente',rec_below_curve:'Produ√ß√£o abaixo do padr√£o ‚Äî verificar estresse, luz, alimenta√ß√£o',rec_buy_feed:'Programar compra de ra√ß√£o',rec_record_env:'Registrar condi√ß√µes ambientais',rec_disinfect:'Executar protocolo de desinfec√ß√£o zona',rec_heat_plan:'Estresse t√©rmico prolongado ‚Äî ativar plano de resfriamento',rec_lab_samples:'Levar amostras ao laborat√≥rio',rec_ventilation:'Aumentar ventila√ß√£o, verificar √°gua fresca'
},
fr:{
save:'Enregistrer',cancel:'Annuler',delete:'Supprimer',edit:'Modifier',add:'Ajouter',close:'Fermer',actions:'Actions',date:'Date',notes:'Notes',name:'Nom',phone:'T√©l√©phone',email:'E-mail',address:'Adresse',confirm_delete:'Supprimer cet enregistrement ?',no_data:'Aucune donn√©e enregistr√©e',total:'Total',all:'Tout',loading:'Chargement',search:'Rechercher',from:'Du',to:'Au',status:'Statut',export_csv:'Exporter CSV',today:'Aujourd\'hui',active:'Actif',inactive:'Inactif',
nav_dashboard:'Tableau de bord',nav_production:'Production',nav_flocks:'Lots',nav_health:'Sant√©',nav_feed:'Alimentation',nav_clients:'Clients',nav_finances:'Finances',nav_analysis:'Analyses',nav_operations:'Op√©rations',nav_environment:'Environnement',nav_config:'Param√®tres',
dash_title:'Tableau de bord principal',kpi_today:'Production du jour',kpi_henday:'Taux de ponte',kpi_fcr:'Indice de consommation (FCR)',kpi_mortality:'Mortalit√©',kpi_cost_egg:'Co√ªt/≈íuf',kpi_income_net:'Revenu net',kpi_alerts:'Alertes',kpi_active_hens:'Poules actives',kpi_active_flocks:'Lots actifs',dash_alerts:'Alertes',dash_trend:'Tendance 30 jours',dash_no_alerts:'Aucune alerte',dash_snapshot:'Sauvegarder un instantan√© KPI',dash_kpi_history:'Historique KPI',
alert_vaccine_overdue:'Vaccin en retard',alert_vaccine_soon:'Vaccin √† venir',alert_low_feed:'Stock d\'aliment bas',alert_high_mortality:'Mortalit√© √©lev√©e',alert_active_outbreak:'√âpid√©mie active',alert_withdrawal:'D√©lai d\'attente actif',
flock_title:'Gestion des lots',flock_add:'Nouveau lot',flock_name:'Nom',flock_breed:'Race',flock_count:'Effectif initial',flock_birthdate:'Date de naissance',flock_purchase_date:'Date d\'achat',flock_supplier:'Fournisseur',flock_cost:'Co√ªt total',flock_status:'Statut',flock_notes:'Notes',flock_age:'√Çge',flock_health:'Sant√©',flock_weeks:'sem',flock_days:'jours',flock_current:'Actuel',flock_status_cria:'D√©marrage',flock_status_recria:'Croissance',flock_status_produccion:'Production',flock_status_descarte:'R√©form√©',flock_edit:'Modifier le lot',flock_lifecycle:'Cycle de vie',flock_roadmap:'Plan de route',
lc_pollito:'Poussin',lc_cria:'D√©marrage',lc_recria:'Croissance',lc_prepostura:'Pr√©-ponte',lc_pico:'Pic de ponte',lc_media:'Mi-ponte',lc_baja:'Fin de ponte',lc_descarte:'R√©form√©',lc_feed:'Aliment',lc_temp:'Temp',lc_weeks:'Semaines',lc_milestone:'√âtapes cl√©s',lc_current_stage:'Stade actuel',
prod_title:'Journal de production',prod_add:'Nouvel enregistrement',prod_flock:'Lot',prod_eggs:'≈íufs collect√©s',prod_broken:'Cass√©s/D√©fectueux',prod_size_s:'Petit (S)',prod_size_m:'Moyen (M)',prod_size_l:'Gros (L)',prod_size_xl:'Tr√®s gros (XL)',prod_size_jumbo:'Jumbo',prod_shell:'Couleur de coquille',prod_yolk:'Qualit√© du jaune (1-10)',prod_deaths:'Mortalit√©s',prod_death_cause:'Cause de mortalit√©',prod_date:'Date',
san_title:'Gestion sanitaire',san_vaccines:'Vaccins',san_medications:'M√©dicaments',san_outbreaks:'√âpid√©mies',
vac_title:'Plan de vaccination',vac_add:'Enregistrer un vaccin',vac_vaccine:'Vaccin',vac_scheduled:'Pr√©vu',vac_applied:'Appliqu√©',vac_batch:'Lot',vac_route:'Voie',vac_overdue:'En retard',vac_upcoming:'√Ä venir',vac_applied_status:'Appliqu√©',vac_pending:'En attente',vac_generate:'G√©n√©rer le calendrier',vac_mark_applied:'Marquer comme appliqu√©',
med_title:'M√©dicaments',med_add:'Enregistrer un m√©dicament',med_name:'M√©dicament',med_reason:'Motif',med_start:'D√©but',med_end:'Fin',med_withdrawal:'Jours d\'attente',med_withdrawal_end:'Fin du d√©lai d\'attente',med_dosage:'Posologie',med_in_withdrawal:'En d√©lai d\'attente',
out_title:'√âpid√©mies',out_add:'Enregistrer une √©pid√©mie',out_disease:'Maladie',out_start:'D√©but',out_end:'Fin',out_affected:'Affect√©s',out_deaths:'Mortalit√©s',out_symptoms:'Sympt√¥mes',out_treatment:'Traitement',out_loss:'Perte √©conomique',out_active:'Active',out_controlled:'Contr√¥l√©e',out_resolved:'R√©solue',
feed_title:'Gestion de l\'alimentation',feed_purchases:'Achats',feed_consumption:'Consommation',feed_stock:'Stock actuel',feed_add_purchase:'Nouvel achat',feed_add_consumption:'Enregistrer la consommation',feed_type:'Type',feed_qty:'Quantit√© (kg)',feed_cost:'Co√ªt',feed_supplier:'Fournisseur',feed_flock:'Lot',feed_low_alert:'Stock bas',
cli_title:'Clients',cli_add:'Nouveau client',cli_route:'Route/Zone',cli_price:'Prix convenus',cli_total:'Total clients',
fin_title:'Finances',fin_income:'Revenus',fin_expenses:'D√©penses',fin_receivables:'Cr√©ances',fin_summary:'R√©sum√©',fin_add_income:'Nouveau revenu',fin_add_expense:'Nouvelle d√©pense',fin_add_receivable:'Nouvelle cr√©ance',fin_type:'Type',fin_qty:'Quantit√©',fin_unit_price:'Prix unitaire',fin_client:'Client',fin_category:'Cat√©gorie',fin_description:'Description',fin_amount:'Montant',fin_due_date:'Date d\'√©ch√©ance',fin_paid:'Pay√©',fin_total_income:'Revenu total',fin_total_expenses:'D√©penses totales',fin_net:'R√©sultat net',fin_cost_per_egg:'Co√ªt/≈íuf',fin_break_even:'Seuil de rentabilit√©',fin_month:'Mois',
fin_cat_feed:'Alimentation',fin_cat_vaccines:'Vaccins/M√©dicaments',fin_cat_transport:'Transport',fin_cat_labor:'Main-d\'≈ìuvre',fin_cat_infrastructure:'Infrastructure',fin_cat_other:'Autre',
fin_type_eggs:'Vente d\'≈ìufs',fin_type_birds:'Vente de volailles',fin_type_manure:'Vente de fumier',fin_type_other:'Autre',
ana_title:'Analyses',ana_comparison:'Comparaison des lots',ana_seasonality:'Saisonnalit√©',ana_profitability:'Rentabilit√©',ana_benchmarks:'R√©f√©rences',ana_best_flock:'Meilleur lot',ana_worst_flock:'Lot le moins performant',ana_avg_production:'Production moyenne',ana_trend:'Tendance',ana_kpi_evolution:'√âvolution des KPI',ana_no_snapshots:'Aucun instantan√©. Sauvegardez des instantan√©s depuis le tableau de bord.',
ops_title:'Op√©rations',ops_checklist:'Liste de contr√¥le quotidienne',ops_logbook:'Journal de bord',ops_personnel:'Personnel',ops_task:'T√¢che',ops_done:'Termin√©',ops_add_task:'Ajouter une t√¢che',ops_check_date:'Date',ops_log_entry:'Entr√©e',ops_log_category:'Cat√©gorie',ops_log_add:'Nouvelle entr√©e',
ops_log_cat_general:'G√©n√©ral',ops_log_cat_health:'Sant√©',ops_log_cat_production:'Production',ops_log_cat_maintenance:'Maintenance',ops_log_cat_observation:'Observation',
ops_per_name:'Nom',ops_per_role:'Poste',ops_per_salary:'Salaire',ops_per_start:'Date d\'embauche',ops_per_active:'Actif',ops_per_add:'Ajouter du personnel',
env_title:'Conditions environnementales',env_add:'Nouvel enregistrement',env_temp:'Temp√©rature (¬∞C)',env_humidity:'Humidit√© (%)',env_light:'Heures de lumi√®re',env_ventilation:'Ventilation',env_density:'Densit√© (oiseaux/m¬≤)',env_optimal:'Plage optimale',env_temp_range:'18-24¬∞C',env_humidity_range:'40-70%',env_light_range:'14-16 h',env_density_range:'4-5 oiseaux/m¬≤',
cfg_title:'Param√®tres',cfg_farm:'D√©tails de l\'exploitation',cfg_farm_name:'Nom de l\'exploitation',cfg_location:'Localisation',cfg_capacity:'Capacit√© (oiseaux)',cfg_currency:'Devise',cfg_alerts:'Seuils d\'alerte',cfg_min_feed:'Stock min d\'aliment (kg)',cfg_max_mortality:'Mortalit√© max (%)',cfg_alert_days:'Jours d\'alerte √† l\'avance',cfg_data:'Donn√©es',cfg_export:'Exporter (JSON)',cfg_import:'Importer (JSON)',cfg_reset:'Tout supprimer',cfg_reset_confirm:'Supprimer TOUTES les donn√©es d√©finitivement ?',cfg_saved:'Enregistr√©',cfg_exported:'Donn√©es export√©es',cfg_imported:'Donn√©es import√©es',cfg_reset_done:'Donn√©es supprim√©es',cfg_checklist:'Liste de contr√¥le par d√©faut',cfg_checklist_items:'T√¢ches quotidiennes de contr√¥le',cfg_theme:'Th√®me de couleur',cfg_theme_blue:'Bleu marine',cfg_theme_green:'Vert',cfg_theme_purple:'Violet',cfg_theme_black:'Noir',
sidebar_subtitle:'Syst√®me avicole 360¬∞',prod_shell_white:'Blanc',prod_shell_brown:'Brun',prod_shell_cream:'Cr√®me',required:'Champ obligatoire',no_flocks_birthdate:'Aucun lot avec date de naissance',vac_select_flocks:'S√©lectionnez les lots pour g√©n√©rer le calendrier :',feed_type_placeholder:'Pondeuse, D√©marrage, etc.',avg_per_day:'Moy/jour',per_flock:'Lot',history:'Historique',env_latest_reading:'Derni√®re mesure',env_ok:'OK',env_out_of_range:'Hors plage',data_stats:'Statistiques des donn√©es',final_warning:'‚ö†Ô∏è DERNIER AVERTISSEMENT ‚Äî TOUTES les donn√©es seront supprim√©es',total_salaries:'Total des salaires',eggs_unit:'≈ìufs',csv_income:'Revenu',csv_expense:'D√©pense',fcr_unit:'kg aliment/kg ≈ìuf',lc_feed_starter:'D√©marrage',lc_feed_grower:'Croissance',lc_feed_developer:'D√©veloppement',lc_feed_prelay:'Pr√©-ponte',lc_feed_layer:'Pondeuse',lc_feed_lowlay:'Fin de ponte',lc_prod_label:'Prod',lc_prod_first:'Premiers ≈ìufs',lc_mile_1:'Vaccins Marek, Newcastle+BI, Gumboro',lc_mile_2:'Rappel Newcastle, d√©veloppement du plumage',lc_mile_3:'Variole aviaire, EA, Coryza, Salmonelle',lc_mile_4:'Rappel Newcastle+BI, changement d\'aliment, 16h lumi√®re',lc_mile_5:'Pic de production sem 26-30, surveiller le FCR',lc_mile_6:'Rappel Newcastle toutes les 8-12 sem, √©valuer la rentabilit√©',lc_mile_7:'√âvaluer la r√©forme vs mue forc√©e',lc_mile_8:'Vendre les poules r√©form√©es, nettoyer le b√¢timent',vac_route_injection:'Injection',vac_route_ocular:'Oculaire/n√©bulisation',vac_route_water:'Eau de boisson',vac_route_wing:'Transfixion alaire',snapshots:'instantan√©s',error_prefix:'Erreur',chk_collect_eggs:'Collecter les ≈ìufs',chk_feed_birds:'Nourrir les volailles',chk_check_water:'V√©rifier l\'eau',chk_check_health:'Contr√¥ler la sant√©',chk_cleaning:'Nettoyage',chk_record_temp:'Relever la temp√©rature',
weather_title:'M√©t√©o',weather_temp:'Temp√©rature',weather_humidity:'Humidit√©',weather_wind:'Vent',weather_forecast:'Pr√©visions 3 jours',weather_no_key:'Configurez la cl√© API OpenWeatherMap dans les param√®tres',weather_heat_alert:'Alerte stress thermique',weather_thi:'Indice THI',weather_feels:'Ressenti',weather_last_update:'Derni√®re mise √† jour',weather_test:'Tester',
geo_set_location:'Localisation de l\'exploitation',geo_use_gps:'Utiliser mon GPS',geo_click_map:'Cliquez sur la carte pour d√©finir la localisation',geo_lat:'Latitude',geo_lng:'Longitude',geo_saved:'Localisation enregistr√©e',
iot_title:'Capteurs IoT',iot_broker:'Broker MQTT (wss://)',iot_user:'Utilisateur MQTT',iot_pass:'Mot de passe MQTT',iot_topic:'Pr√©fixe du topic',iot_connect:'Connecter',iot_disconnect:'D√©connecter',iot_live:'IoT en direct',iot_no_config:'Configurez MQTT dans les param√®tres',iot_save_reading:'Enregistrer la mesure actuelle',iot_connected:'Connect√©',iot_disconnected:'D√©connect√©',iot_ammonia:'Ammoniac',iot_light:'Lumi√®re',iot_lux:'lux',iot_ppm:'ppm',
pred_title:'Pr√©dictions',pred_forecast:'Pr√©vision de production',pred_anomaly:'Anomalies',pred_drop_risk:'Risque de chute',pred_breed_curve:'Courbe de race',pred_fcr_trend:'Tendance FCR',pred_next_7d:'7 prochains jours',pred_improving:'En am√©lioration',pred_worsening:'En d√©gradation',pred_stable:'Stable',pred_score:'Score',pred_low:'Faible',pred_medium:'Moyen',pred_high:'√âlev√©',pred_vs_expected:'R√©el vs Attendu',
stress_title:'√âv√©nements de stress',stress_type:'Type',stress_severity:'Gravit√©',stress_heat:'Chaleur',stress_disease:'Maladie',stress_feed_change:'Changement d\'aliment',stress_power:'Coupure de courant',stress_predator:'Pr√©dateur',stress_other:'Autre',stress_description:'Description',stress_add:'Nouvel √©v√©nement',stress_impact:'Impact sur la production',stress_auto:'(G√©n√©r√© automatiquement)',
env_ammonia:'Ammoniac (ppm)',env_wind:'Vitesse du vent (km/h)',env_thi:'Indice THI',env_manual:'Saisie manuelle',env_history:'Historique',env_iot:'IoT en direct',
pwa_install:'Installer l\'application',pwa_offline:'Mode hors ligne disponible',
cfg_owm_key:'Cl√© API OpenWeatherMap',cfg_mqtt:'Param√®tres MQTT',cfg_geo:'G√©olocalisation',
flock_housing:'Type de logement',flock_housing_floor:'Au sol',flock_housing_cage:'En cage',flock_housing_free:'Plein air',flock_target_curve:'Courbe cible',flock_egg_color:'Couleur des ≈ìufs',
ana_predictions:'Pr√©dictions',
per_day:'par jour',actual:'R√©el',expected:'Attendu',not_available:'non disponible',
nav_biosecurity:'Bios√©curit√©',bio_title:'Bios√©curit√© & Lutte antiparasitaire',bio_visitors:'Visiteurs',bio_zones:'Zones',bio_pests:'Nuisibles',bio_protocols:'Protocoles',
bio_add_visitor:'Nouveau visiteur',bio_visitor_name:'Nom',bio_visitor_company:'Entreprise',bio_visitor_purpose:'Motif',bio_visitor_zone:'Zone',bio_visitor_plate:'Plaque du v√©hicule',bio_visitor_disinfected:'D√©sinfect√©',bio_visitor_from_farm:'Exploitation d\'origine',bio_visitor_from_health:'Sant√© de l\'exploitation d\'origine',bio_cross_risk:'‚ö†Ô∏è Risque de contamination crois√©e',
bio_add_zone:'Nouvelle zone',bio_zone_name:'Nom de la zone',bio_zone_risk:'Niveau de risque',bio_zone_last_disinfection:'Derni√®re d√©sinfection',bio_zone_frequency:'Fr√©quence (jours)',bio_risk_green:'Vert',bio_risk_yellow:'Jaune',bio_risk_red:'Rouge',
bio_add_pest:'Nouveau signalement',bio_pest_type:'Type',bio_pest_rodent:'Rongeur',bio_pest_fly:'Mouche',bio_pest_wild_bird:'Oiseau sauvage',bio_pest_other:'Autre',bio_pest_location:'Localisation',bio_pest_severity:'Gravit√©',bio_pest_action:'Action entreprise',bio_pest_resolved:'R√©solu',
bio_add_protocol:'Nouveau protocole',bio_protocol_name:'Nom du protocole',bio_protocol_frequency:'Fr√©quence',bio_protocol_daily:'Quotidien',bio_protocol_weekly:'Hebdomadaire',bio_protocol_monthly:'Mensuel',bio_protocol_last:'Dernier ach√®vement',bio_protocol_items:'√âl√©ments du protocole',bio_protocol_complete:'Termin√©',bio_protocol_overdue:'En retard',
bio_pest_score:'Score nuisibles',bio_overdue_disinfection:'D√©sinfection en retard',bio_unresolved_pests:'Nuisibles non r√©solus',
alert_bio_disinfection:'D√©sinfection de zone en retard',alert_bio_pests:'Nuisibles non r√©solus',alert_bio_cross:'Risque de contamination crois√©e',
nav_traceability:'Tra√ßabilit√©',trace_title:'Tra√ßabilit√© des ≈ìufs',trace_add:'Nouveau lot',trace_batch_id:'ID du lot',trace_rack:'Casier',trace_box_count:'Bo√Ætes',trace_eggs_per_box:'≈íufs/Bo√Æte',trace_qr:'Code QR',trace_delivery:'Date de livraison',trace_search:'Rechercher par ID/QR',trace_origin:'Origine',trace_house:'B√¢timent',
nav_planning:'Planification',plan_title:'Planification de production',plan_add:'Nouveau plan',plan_name:'Nom du plan',plan_target_date:'Date cible',plan_eggs_needed:'≈íufs n√©cessaires',plan_allocations:'R√©partition par lot',plan_expected:'Production attendue',plan_gap:'√âcart',plan_on_track:'Dans les temps',plan_behind:'En retard',plan_ahead:'En avance',plan_estimate:'Estimation',plan_commitment:'Engagement',
prod_egg_type:'Type d\'≈ìuf',prod_type_conventional:'Conventionnel',prod_type_free_range:'Plein air',prod_type_organic:'Biologique',prod_type_pasture:'√âlev√© en p√¢turage',prod_type_decorative:'D√©coratif',
prod_market:'Canal de distribution',prod_market_wholesale:'Grossiste',prod_market_supermarket:'Supermarch√©',prod_market_restaurant:'Restaurant',prod_market_direct:'Vente directe',prod_market_export:'Export',prod_market_pasteurized:'Pasteuris√©',
ana_by_segment:'Rentabilit√© par segment',ana_by_type:'Par type',ana_by_channel:'Par canal',
nav_campo_mode:'Mode terrain',nav_vet_mode:'Mode v√©t√©rinaire',campo_today:'AUJOURD\'HUI',campo_quick_entry:'Saisie rapide',vet_visit:'Visite effectu√©e',vet_vaccines:'Vaccins administr√©s',vet_pending:'En attente de r√©vision',vet_select_farm:'S√©lectionner exploitation/lot',
cfg_font_size:'Taille du texte',cfg_font_small:'Petit',cfg_font_normal:'Normal',cfg_font_large:'Grand',cfg_font_xlarge:'Tr√®s grand',cfg_dark_mode:'Mode sombre',cfg_theme_dark:'Sombre',
pred_outbreak_risk:'Risque d\'√©pid√©mie',pred_outbreak_high:'Risque √©lev√©',pred_outbreak_medium:'Risque moyen',pred_outbreak_low:'Risque faible',pred_outbreak_factor:'Facteur',pred_outbreak_weight:'Poids',pred_outbreak_value:'Valeur',pred_probability:'Probabilit√©',pred_factors:'Facteurs',pred_recommendations:'Recommandations',pred_confidence:'Confiance',pred_forecast_7d:'7 jours',pred_forecast_14d:'14 jours',pred_ensemble:'Pr√©vision d\'ensemble',pred_forecast_upper:'Bande sup√©rieure',pred_forecast_lower:'Bande inf√©rieure',
ana_segment_profit:'Rentabilit√© par segment',cfg_accessibility:'Accessibilit√©',
rec_title:'Recommandations',rec_dismiss:'Ignorer',rec_check_diet:'V√©rifier l\'alimentation / formulation / exclure une maladie',rec_check_env:'V√©rifier environnement / maladie / stress imm√©diatement',rec_below_curve:'En dessous de la courbe standard ‚Äî v√©rifier stress, lumi√®re, aliment',rec_buy_feed:'Planifier l\'achat d\'aliment',rec_record_env:'Enregistrer les conditions environnementales',rec_disinfect:'Ex√©cuter le protocole de d√©sinfection de la zone',rec_heat_plan:'Stress thermique prolong√© ‚Äî activer le plan de refroidissement',rec_lab_samples:'Envoyer des √©chantillons au laboratoire',rec_ventilation:'Augmenter la ventilation, v√©rifier l\'eau fra√Æche'
},
de:{
save:'Speichern',cancel:'Abbrechen',delete:'L√∂schen',edit:'Bearbeiten',add:'Hinzuf√ºgen',close:'Schlie√üen',actions:'Aktionen',date:'Datum',notes:'Notizen',name:'Name',phone:'Telefon',email:'E-Mail',address:'Adresse',confirm_delete:'Diesen Eintrag l√∂schen?',no_data:'Keine Daten erfasst',total:'Gesamt',all:'Alle',loading:'Laden',search:'Suche',from:'Von',to:'Bis',status:'Status',export_csv:'CSV exportieren',today:'Heute',active:'Aktiv',inactive:'Inaktiv',
nav_dashboard:'√úbersicht',nav_production:'Produktion',nav_flocks:'Herden',nav_health:'Gesundheit',nav_feed:'Futter',nav_clients:'Kunden',nav_finances:'Finanzen',nav_analysis:'Analyse',nav_operations:'Betrieb',nav_environment:'Umwelt',nav_config:'Einstellungen',
dash_title:'Haupt√ºbersicht',kpi_today:'Produktion heute',kpi_henday:'Legeleistung',kpi_fcr:'Futterverwertung (FCR)',kpi_mortality:'Mortalit√§t',kpi_cost_egg:'Kosten/Ei',kpi_income_net:'Nettoeinkommen',kpi_alerts:'Warnungen',kpi_active_hens:'Aktive Hennen',kpi_active_flocks:'Aktive Herden',dash_alerts:'Warnungen',dash_trend:'30-Tage-Trend',dash_no_alerts:'Keine Warnungen',dash_snapshot:'KPI-Snapshot speichern',dash_kpi_history:'KPI-Verlauf',
alert_vaccine_overdue:'Impfung √ºberf√§llig',alert_vaccine_soon:'Impfung bevorstehend',alert_low_feed:'Futterbestand niedrig',alert_high_mortality:'Hohe Mortalit√§t',alert_active_outbreak:'Aktiver Ausbruch',alert_withdrawal:'Aktive Wartezeit',
flock_title:'Herdenverwaltung',flock_add:'Neue Herde',flock_name:'Name',flock_breed:'Rasse',flock_count:'Anfangsbestand',flock_birthdate:'Schlupfdatum',flock_purchase_date:'Kaufdatum',flock_supplier:'Lieferant',flock_cost:'Gesamtkosten',flock_status:'Status',flock_notes:'Notizen',flock_age:'Alter',flock_health:'Gesundheit',flock_weeks:'Wo.',flock_days:'Tage',flock_current:'Aktuell',flock_status_cria:'Aufzucht',flock_status_recria:'Junghennenaufzucht',flock_status_produccion:'Produktion',flock_status_descarte:'Aussortiert',flock_edit:'Herde bearbeiten',flock_lifecycle:'Lebenszyklus',flock_roadmap:'Fahrplan',
lc_pollito:'K√ºken',lc_cria:'Aufzucht',lc_recria:'Junghennenaufzucht',lc_prepostura:'Vorlegephase',lc_pico:'Legeh√∂hepunkt',lc_media:'Mittlere Legephase',lc_baja:'Niedrige Legephase',lc_descarte:'Aussortiert',lc_feed:'Futter',lc_temp:'Temp.',lc_weeks:'Wochen',lc_milestone:'Meilensteine',lc_current_stage:'Aktuelle Phase',
prod_title:'Produktionsprotokoll',prod_add:'Neuer Eintrag',prod_flock:'Herde',prod_eggs:'Gesammelte Eier',prod_broken:'Bruch/Defekt',prod_size_s:'Klein (S)',prod_size_m:'Mittel (M)',prod_size_l:'Gro√ü (L)',prod_size_xl:'Sehr gro√ü (XL)',prod_size_jumbo:'Jumbo',prod_shell:'Schalenfarbe',prod_yolk:'Dotterqualit√§t (1-10)',prod_deaths:'Verluste',prod_death_cause:'Todesursache',prod_date:'Datum',
san_title:'Gesundheitsmanagement',san_vaccines:'Impfungen',san_medications:'Medikamente',san_outbreaks:'Ausbr√ºche',
vac_title:'Impfplan',vac_add:'Impfung erfassen',vac_vaccine:'Impfstoff',vac_scheduled:'Geplant',vac_applied:'Verabreicht',vac_batch:'Charge',vac_route:'Verabreichungsweg',vac_overdue:'√úberf√§llig',vac_upcoming:'Bevorstehend',vac_applied_status:'Verabreicht',vac_pending:'Ausstehend',vac_generate:'Kalender erstellen',vac_mark_applied:'Als verabreicht markieren',
med_title:'Medikamente',med_add:'Medikament erfassen',med_name:'Medikament',med_reason:'Grund',med_start:'Beginn',med_end:'Ende',med_withdrawal:'Wartezeit (Tage)',med_withdrawal_end:'Ende der Wartezeit',med_dosage:'Dosierung',med_in_withdrawal:'In Wartezeit',
out_title:'Ausbr√ºche',out_add:'Ausbruch erfassen',out_disease:'Krankheit',out_start:'Beginn',out_end:'Ende',out_affected:'Betroffen',out_deaths:'Verluste',out_symptoms:'Symptome',out_treatment:'Behandlung',out_loss:'Wirtschaftlicher Schaden',out_active:'Aktiv',out_controlled:'Kontrolliert',out_resolved:'Behoben',
feed_title:'Futterverwaltung',feed_purchases:'Eink√§ufe',feed_consumption:'Verbrauch',feed_stock:'Aktueller Bestand',feed_add_purchase:'Neuer Einkauf',feed_add_consumption:'Verbrauch erfassen',feed_type:'Art',feed_qty:'Menge (kg)',feed_cost:'Kosten',feed_supplier:'Lieferant',feed_flock:'Herde',feed_low_alert:'Niedriger Bestand',
cli_title:'Kunden',cli_add:'Neuer Kunde',cli_route:'Route/Gebiet',cli_price:'Vereinbarte Preise',cli_total:'Kunden gesamt',
fin_title:'Finanzen',fin_income:'Einnahmen',fin_expenses:'Ausgaben',fin_receivables:'Forderungen',fin_summary:'Zusammenfassung',fin_add_income:'Neue Einnahme',fin_add_expense:'Neue Ausgabe',fin_add_receivable:'Neue Forderung',fin_type:'Art',fin_qty:'Menge',fin_unit_price:'St√ºckpreis',fin_client:'Kunde',fin_category:'Kategorie',fin_description:'Beschreibung',fin_amount:'Betrag',fin_due_date:'F√§lligkeitsdatum',fin_paid:'Bezahlt',fin_total_income:'Gesamteinnahmen',fin_total_expenses:'Gesamtausgaben',fin_net:'Nettoergebnis',fin_cost_per_egg:'Kosten/Ei',fin_break_even:'Gewinnschwelle',fin_month:'Monat',
fin_cat_feed:'Futter',fin_cat_vaccines:'Impfstoffe/Medikamente',fin_cat_transport:'Transport',fin_cat_labor:'Personal',fin_cat_infrastructure:'Infrastruktur',fin_cat_other:'Sonstiges',
fin_type_eggs:'Eierverkauf',fin_type_birds:'Gefl√ºgelverkauf',fin_type_manure:'Mistverkauf',fin_type_other:'Sonstiges',
ana_title:'Analyse',ana_comparison:'Herdenvergleich',ana_seasonality:'Saisonalit√§t',ana_profitability:'Rentabilit√§t',ana_benchmarks:'Benchmarks',ana_best_flock:'Beste Herde',ana_worst_flock:'Schw√§chste Herde',ana_avg_production:'√ò Produktion',ana_trend:'Trend',ana_kpi_evolution:'KPI-Entwicklung',ana_no_snapshots:'Keine Snapshots. Speichern Sie Snapshots √ºber die √úbersicht.',
ops_title:'Betrieb',ops_checklist:'T√§gliche Checkliste',ops_logbook:'Logbuch',ops_personnel:'Personal',ops_task:'Aufgabe',ops_done:'Erledigt',ops_add_task:'Aufgabe hinzuf√ºgen',ops_check_date:'Datum',ops_log_entry:'Eintrag',ops_log_category:'Kategorie',ops_log_add:'Neuer Eintrag',
ops_log_cat_general:'Allgemein',ops_log_cat_health:'Gesundheit',ops_log_cat_production:'Produktion',ops_log_cat_maintenance:'Wartung',ops_log_cat_observation:'Beobachtung',
ops_per_name:'Name',ops_per_role:'Rolle',ops_per_salary:'Gehalt',ops_per_start:'Eintrittsdatum',ops_per_active:'Aktiv',ops_per_add:'Personal hinzuf√ºgen',
env_title:'Umweltbedingungen',env_add:'Neuer Eintrag',env_temp:'Temperatur (¬∞C)',env_humidity:'Luftfeuchtigkeit (%)',env_light:'Lichtstunden',env_ventilation:'Bel√ºftung',env_density:'Besatzdichte (Tiere/m¬≤)',env_optimal:'Optimalbereich',env_temp_range:'18‚Äì24 ¬∞C',env_humidity_range:'40‚Äì70 %',env_light_range:'14‚Äì16 Std.',env_density_range:'4‚Äì5 Tiere/m¬≤',
cfg_title:'Einstellungen',cfg_farm:'Betriebsdaten',cfg_farm_name:'Betriebsname',cfg_location:'Standort',cfg_capacity:'Kapazit√§t (Tiere)',cfg_currency:'W√§hrung',cfg_alerts:'Warnschwellen',cfg_min_feed:'Min. Futterbestand (kg)',cfg_max_mortality:'Max. Mortalit√§t (%)',cfg_alert_days:'Warnungstage im Voraus',cfg_data:'Daten',cfg_export:'Exportieren (JSON)',cfg_import:'Importieren (JSON)',cfg_reset:'Alle Daten l√∂schen',cfg_reset_confirm:'ALLE Daten unwiderruflich l√∂schen?',cfg_saved:'Gespeichert',cfg_exported:'Daten exportiert',cfg_imported:'Daten importiert',cfg_reset_done:'Daten gel√∂scht',cfg_checklist:'Standard-Checkliste',cfg_checklist_items:'T√§gliche Checklistenaufgaben',cfg_theme:'Farbschema',cfg_theme_blue:'Marineblau',cfg_theme_green:'Gr√ºn',cfg_theme_purple:'Lila',cfg_theme_black:'Schwarz',
sidebar_subtitle:'Gefl√ºgelsystem 360¬∞',prod_shell_white:'Wei√ü',prod_shell_brown:'Braun',prod_shell_cream:'Creme',required:'Pflichtfeld',no_flocks_birthdate:'Keine Herden mit Schlupfdatum',vac_select_flocks:'Herden f√ºr Kalender ausw√§hlen:',feed_type_placeholder:'Legehenne, Starter, usw.',avg_per_day:'√ò/Tag',per_flock:'Herde',history:'Verlauf',env_latest_reading:'Letzter Messwert',env_ok:'OK',env_out_of_range:'Au√üerhalb des Bereichs',data_stats:'Datenstatistik',final_warning:'‚ö†Ô∏è LETZTE WARNUNG ‚Äî ALLE Daten werden gel√∂scht',total_salaries:'Gesamtgeh√§lter',eggs_unit:'Eier',csv_income:'Einnahmen',csv_expense:'Ausgabe',fcr_unit:'kg Futter/kg Ei',lc_feed_starter:'Starter',lc_feed_grower:'Aufzuchtfutter',lc_feed_developer:'Entwicklungsfutter',lc_feed_prelay:'Vorlegefutter',lc_feed_layer:'Legefutter',lc_feed_lowlay:'Sp√§tlegefutter',lc_prod_label:'Prod.',lc_prod_first:'Erste Eier',lc_mile_1:'Marek-, Newcastle+IB-, Gumboro-Impfungen',lc_mile_2:'Newcastle-Auffrischung, Federentwicklung',lc_mile_3:'Gefl√ºgelpocken, AE, Coryza, Salmonellen',lc_mile_4:'Newcastle+IB-Auffrischung, Futterwechsel, 16 Std. Licht',lc_mile_5:'Legeh√∂hepunkt Wo. 26‚Äì30, FCR √ºberwachen',lc_mile_6:'Newcastle-Auffrischung alle 8‚Äì12 Wo., Rentabilit√§t pr√ºfen',lc_mile_7:'Aussortierung vs. Zwangsmauser bewerten',lc_mile_8:'Aussortierte Tiere verkaufen, Stall reinigen',vac_route_injection:'Injektion',vac_route_ocular:'Okular/Spray',vac_route_water:'Trinkwasser',vac_route_wing:'Fl√ºgelstichmethode',snapshots:'Snapshots',error_prefix:'Fehler',chk_collect_eggs:'Eier sammeln',chk_feed_birds:'Tiere f√ºttern',chk_check_water:'Wasser kontrollieren',chk_check_health:'Gesundheit kontrollieren',chk_cleaning:'Reinigung',chk_record_temp:'Temperatur erfassen',
weather_title:'Wetter',weather_temp:'Temperatur',weather_humidity:'Luftfeuchtigkeit',weather_wind:'Wind',weather_forecast:'3-Tage-Vorhersage',weather_no_key:'OpenWeatherMap-API-Schl√ºssel in den Einstellungen konfigurieren',weather_heat_alert:'Hitzestress-Warnung',weather_thi:'THI-Index',weather_feels:'Gef√ºhlt',weather_last_update:'Zuletzt aktualisiert',weather_test:'Test',
geo_set_location:'Betriebsstandort',geo_use_gps:'Mein GPS verwenden',geo_click_map:'Karte klicken, um Standort zu setzen',geo_lat:'Breitengrad',geo_lng:'L√§ngengrad',geo_saved:'Standort gespeichert',
iot_title:'IoT-Sensoren',iot_broker:'MQTT-Broker (wss://)',iot_user:'MQTT-Benutzer',iot_pass:'MQTT-Passwort',iot_topic:'Topic-Pr√§fix',iot_connect:'Verbinden',iot_disconnect:'Trennen',iot_live:'IoT Live',iot_no_config:'MQTT in den Einstellungen konfigurieren',iot_save_reading:'Aktuellen Messwert speichern',iot_connected:'Verbunden',iot_disconnected:'Getrennt',iot_ammonia:'Ammoniak',iot_light:'Licht',iot_lux:'lux',iot_ppm:'ppm',
pred_title:'Prognosen',pred_forecast:'Produktionsprognose',pred_anomaly:'Anomalien',pred_drop_risk:'R√ºckgangsrisiko',pred_breed_curve:'Rassenkurve',pred_fcr_trend:'FCR-Trend',pred_next_7d:'N√§chste 7 Tage',pred_improving:'Verbessernd',pred_worsening:'Verschlechternd',pred_stable:'Stabil',pred_score:'Bewertung',pred_low:'Niedrig',pred_medium:'Mittel',pred_high:'Hoch',pred_vs_expected:'Ist vs. Soll',
stress_title:'Stressereignisse',stress_type:'Art',stress_severity:'Schweregrad',stress_heat:'Hitze',stress_disease:'Krankheit',stress_feed_change:'Futterwechsel',stress_power:'Stromausfall',stress_predator:'Raubtier',stress_other:'Sonstiges',stress_description:'Beschreibung',stress_add:'Neues Ereignis',stress_impact:'Produktionsauswirkung',stress_auto:'(Automatisch generiert)',
env_ammonia:'Ammoniak (ppm)',env_wind:'Windgeschwindigkeit (km/h)',env_thi:'THI-Index',env_manual:'Manuelle Eingabe',env_history:'Verlauf',env_iot:'IoT Live',
pwa_install:'App installieren',pwa_offline:'Offline-Modus verf√ºgbar',
cfg_owm_key:'OpenWeatherMap-API-Schl√ºssel',cfg_mqtt:'MQTT-Einstellungen',cfg_geo:'Geolokalisierung',
flock_housing:'Haltungsform',flock_housing_floor:'Bodenhaltung',flock_housing_cage:'K√§fighaltung',flock_housing_free:'Freilandhaltung',flock_target_curve:'Sollkurve',flock_egg_color:'Eierfarbe',
ana_predictions:'Prognosen',
per_day:'pro Tag',actual:'Ist',expected:'Soll',not_available:'nicht verf√ºgbar',
nav_biosecurity:'Biosicherheit',bio_title:'Biosicherheit & Sch√§dlingsbek√§mpfung',bio_visitors:'Besucher',bio_zones:'Zonen',bio_pests:'Sch√§dlinge',bio_protocols:'Protokolle',
bio_add_visitor:'Neuer Besucher',bio_visitor_name:'Name',bio_visitor_company:'Firma',bio_visitor_purpose:'Zweck',bio_visitor_zone:'Zone',bio_visitor_plate:'Kennzeichen',bio_visitor_disinfected:'Desinfiziert',bio_visitor_from_farm:'Herkunftsbetrieb',bio_visitor_from_health:'Gesundheitsstatus Herkunftsbetrieb',bio_cross_risk:'‚ö†Ô∏è Kreuzkontaminationsrisiko',
bio_add_zone:'Neue Zone',bio_zone_name:'Zonenname',bio_zone_risk:'Risikostufe',bio_zone_last_disinfection:'Letzte Desinfektion',bio_zone_frequency:'H√§ufigkeit (Tage)',bio_risk_green:'Gr√ºn',bio_risk_yellow:'Gelb',bio_risk_red:'Rot',
bio_add_pest:'Neue Sichtung',bio_pest_type:'Art',bio_pest_rodent:'Nager',bio_pest_fly:'Fliege',bio_pest_wild_bird:'Wildvogel',bio_pest_other:'Sonstiges',bio_pest_location:'Ort',bio_pest_severity:'Schweregrad',bio_pest_action:'Ergriffene Ma√ünahme',bio_pest_resolved:'Behoben',
bio_add_protocol:'Neues Protokoll',bio_protocol_name:'Protokollname',bio_protocol_frequency:'H√§ufigkeit',bio_protocol_daily:'T√§glich',bio_protocol_weekly:'W√∂chentlich',bio_protocol_monthly:'Monatlich',bio_protocol_last:'Zuletzt durchgef√ºhrt',bio_protocol_items:'Protokollpunkte',bio_protocol_complete:'Abgeschlossen',bio_protocol_overdue:'√úberf√§llig',
bio_pest_score:'Sch√§dlingsbewertung',bio_overdue_disinfection:'Desinfektion √ºberf√§llig',bio_unresolved_pests:'Ungel√∂ste Sch√§dlinge',
alert_bio_disinfection:'Zonendesinfektion √ºberf√§llig',alert_bio_pests:'Ungel√∂ste Sch√§dlinge',alert_bio_cross:'Kreuzkontaminationsrisiko',
nav_traceability:'R√ºckverfolgbarkeit',trace_title:'Eier-R√ºckverfolgbarkeit',trace_add:'Neue Charge',trace_batch_id:'Chargen-ID',trace_rack:'Gestell',trace_box_count:'Kartons',trace_eggs_per_box:'Eier/Karton',trace_qr:'QR-Code',trace_delivery:'Lieferdatum',trace_search:'Suche nach ID/QR',trace_origin:'Herkunft',trace_house:'Stall',
nav_planning:'Planung',plan_title:'Produktionsplanung',plan_add:'Neuer Plan',plan_name:'Planname',plan_target_date:'Zieldatum',plan_eggs_needed:'Ben√∂tigte Eier',plan_allocations:'Herdenzuordnungen',plan_expected:'Erwartete Produktion',plan_gap:'Differenz',plan_on_track:'Im Plan',plan_behind:'Im R√ºckstand',plan_ahead:'Voraus',plan_estimate:'Sch√§tzung',plan_commitment:'Zusage',
prod_egg_type:'Eiertyp',prod_type_conventional:'Konventionell',prod_type_free_range:'Freiland',prod_type_organic:'Bio',prod_type_pasture:'Weidehaltung',prod_type_decorative:'Dekorativ',
prod_market:'Vertriebskanal',prod_market_wholesale:'Gro√ühandel',prod_market_supermarket:'Supermarkt',prod_market_restaurant:'Restaurant',prod_market_direct:'Direktverkauf',prod_market_export:'Export',prod_market_pasteurized:'Pasteurisiert',
ana_by_segment:'Rentabilit√§t nach Segment',ana_by_type:'Nach Typ',ana_by_channel:'Nach Kanal',
nav_campo_mode:'Feldmodus',nav_vet_mode:'Tierarztmodus',campo_today:'HEUTE',campo_quick_entry:'Schnelleingabe',vet_visit:'Besuch abgeschlossen',vet_vaccines:'Impfungen verabreicht',vet_pending:'√úberpr√ºfung ausstehend',vet_select_farm:'Betrieb/Herde ausw√§hlen',
cfg_font_size:'Schriftgr√∂√üe',cfg_font_small:'Klein',cfg_font_normal:'Normal',cfg_font_large:'Gro√ü',cfg_font_xlarge:'Sehr gro√ü',cfg_dark_mode:'Dunkelmodus',cfg_theme_dark:'Dunkel',
pred_outbreak_risk:'Ausbruchsrisiko',pred_outbreak_high:'Hohes Risiko',pred_outbreak_medium:'Mittleres Risiko',pred_outbreak_low:'Niedriges Risiko',pred_outbreak_factor:'Faktor',pred_outbreak_weight:'Gewichtung',pred_outbreak_value:'Wert',pred_probability:'Wahrscheinlichkeit',pred_factors:'Faktoren',pred_recommendations:'Empfehlungen',pred_confidence:'Konfidenz',pred_forecast_7d:'7 Tage',pred_forecast_14d:'14 Tage',pred_ensemble:'Ensemble-Prognose',pred_forecast_upper:'Oberes Band',pred_forecast_lower:'Unteres Band',
ana_segment_profit:'Rentabilit√§t nach Segment',cfg_accessibility:'Barrierefreiheit',
rec_title:'Empfehlungen',rec_dismiss:'Verwerfen',rec_check_diet:'Futter / Futterrezeptur pr√ºfen / Krankheit ausschlie√üen',rec_check_env:'Umwelt / Krankheit / Stress sofort pr√ºfen',rec_below_curve:'Unter Standardproduktion ‚Äî Stress, Licht, Futter pr√ºfen',rec_buy_feed:'Futterkauf planen',rec_record_env:'Umweltbedingungen erfassen',rec_disinfect:'Desinfektionsprotokoll Zone ausf√ºhren',rec_heat_plan:'Anhaltender Hitzestress ‚Äî K√ºhlungsplan aktivieren',rec_lab_samples:'Proben ins Labor bringen',rec_ventilation:'Bel√ºftung erh√∂hen, Frischwasser kontrollieren'
},
it:{
save:'Salva',cancel:'Annulla',delete:'Elimina',edit:'Modifica',add:'Aggiungi',close:'Chiudi',actions:'Azioni',date:'Data',notes:'Note',name:'Nome',phone:'Telefono',email:'Email',address:'Indirizzo',confirm_delete:'Eliminare questo record?',no_data:'Nessun dato registrato',total:'Totale',all:'Tutti',loading:'Caricamento',search:'Cerca',from:'Da',to:'A',status:'Stato',export_csv:'Esporta CSV',today:'Oggi',active:'Attivo',inactive:'Inattivo',
nav_dashboard:'Pannello',nav_production:'Produzione',nav_flocks:'Gruppi',nav_health:'Sanit√†',nav_feed:'Mangime',nav_clients:'Clienti',nav_finances:'Finanze',nav_analysis:'Analisi',nav_operations:'Operazioni',nav_environment:'Ambiente',nav_config:'Impostazioni',
dash_title:'Pannello Principale',kpi_today:'Produzione Oggi',kpi_henday:'Tasso Gallina-Giorno',kpi_fcr:'Indice di Conversione (FCR)',kpi_mortality:'Mortalit√†',kpi_cost_egg:'Costo/Uovo',kpi_income_net:'Reddito Netto',kpi_alerts:'Avvisi',kpi_active_hens:'Galline Attive',kpi_active_flocks:'Gruppi Attivi',dash_alerts:'Avvisi',dash_trend:'Tendenza 30 Giorni',dash_no_alerts:'Nessun avviso',dash_snapshot:'Salva Istantanea KPI',dash_kpi_history:'Storico KPI',
alert_vaccine_overdue:'Vaccino scaduto',alert_vaccine_soon:'Vaccino in arrivo',alert_low_feed:'Scorta mangime bassa',alert_high_mortality:'Mortalit√† elevata',alert_active_outbreak:'Focolaio attivo',alert_withdrawal:'Sospensione attiva',
flock_title:'Gestione Gruppi',flock_add:'Nuovo Gruppo',flock_name:'Nome',flock_breed:'Razza',flock_count:'Quantit√† Iniziale',flock_birthdate:'Data di Nascita',flock_purchase_date:'Data di Acquisto',flock_supplier:'Fornitore',flock_cost:'Costo Totale',flock_status:'Stato',flock_notes:'Note',flock_age:'Et√†',flock_health:'Sanit√†',flock_weeks:'sett.',flock_days:'giorni',flock_current:'Attuale',flock_status_cria:'Allevamento',flock_status_recria:'Accrescimento',flock_status_produccion:'Produzione',flock_status_descarte:'Scarti',flock_edit:'Modifica Gruppo',flock_lifecycle:'Ciclo di Vita',flock_roadmap:'Roadmap',
lc_pollito:'Pulcino',lc_cria:'Allevamento',lc_recria:'Accrescimento',lc_prepostura:'Pre-deposizione',lc_pico:'Picco Deposizione',lc_media:'Media Deposizione',lc_baja:'Bassa Deposizione',lc_descarte:'Scarti',lc_feed:'Mangime',lc_temp:'Temp.',lc_weeks:'Settimane',lc_milestone:'Tappe',lc_current_stage:'Fase Attuale',
prod_title:'Registro Produzione',prod_add:'Nuovo Record',prod_flock:'Gruppo',prod_eggs:'Uova Raccolte',prod_broken:'Rotte/Difettose',prod_size_s:'Piccole (S)',prod_size_m:'Medie (M)',prod_size_l:'Grandi (L)',prod_size_xl:'Extra Grandi (XL)',prod_size_jumbo:'Jumbo',prod_shell:'Colore Guscio',prod_yolk:'Qualit√† Tuorlo (1-10)',prod_deaths:'Decessi',prod_death_cause:'Causa di Morte',prod_date:'Data',
san_title:'Gestione Sanitaria',san_vaccines:'Vaccini',san_medications:'Farmaci',san_outbreaks:'Focolai',
vac_title:'Piano Vaccinale',vac_add:'Registra Vaccino',vac_vaccine:'Vaccino',vac_scheduled:'Programmato',vac_applied:'Applicato',vac_batch:'Lotto',vac_route:'Via di Somministrazione',vac_overdue:'Scaduto',vac_upcoming:'In Arrivo',vac_applied_status:'Applicato',vac_pending:'In Attesa',vac_generate:'Genera Calendario',vac_mark_applied:'Segna come Applicato',
med_title:'Farmaci',med_add:'Registra Farmaco',med_name:'Farmaco',med_reason:'Motivo',med_start:'Inizio',med_end:'Fine',med_withdrawal:'Giorni di Sospensione',med_withdrawal_end:'Fine Sospensione',med_dosage:'Dosaggio',med_in_withdrawal:'In Sospensione',
out_title:'Focolai',out_add:'Registra Focolaio',out_disease:'Malattia',out_start:'Inizio',out_end:'Fine',out_affected:'Colpiti',out_deaths:'Decessi',out_symptoms:'Sintomi',out_treatment:'Trattamento',out_loss:'Perdita Economica',out_active:'Attivo',out_controlled:'Controllato',out_resolved:'Risolto',
feed_title:'Gestione Mangimi',feed_purchases:'Acquisti',feed_consumption:'Consumo',feed_stock:'Scorta Attuale',feed_add_purchase:'Nuovo Acquisto',feed_add_consumption:'Registra Consumo',feed_type:'Tipo',feed_qty:'Quantit√† (kg)',feed_cost:'Costo',feed_supplier:'Fornitore',feed_flock:'Gruppo',feed_low_alert:'Scorta bassa',
cli_title:'Clienti',cli_add:'Nuovo Cliente',cli_route:'Percorso/Zona',cli_price:'Prezzi Concordati',cli_total:'Clienti Totali',
fin_title:'Finanze',fin_income:'Entrate',fin_expenses:'Uscite',fin_receivables:'Crediti',fin_summary:'Riepilogo',fin_add_income:'Nuova Entrata',fin_add_expense:'Nuova Uscita',fin_add_receivable:'Nuovo Credito',fin_type:'Tipo',fin_qty:'Quantit√†',fin_unit_price:'Prezzo Unitario',fin_client:'Cliente',fin_category:'Categoria',fin_description:'Descrizione',fin_amount:'Importo',fin_due_date:'Data Scadenza',fin_paid:'Pagato',fin_total_income:'Entrate Totali',fin_total_expenses:'Uscite Totali',fin_net:'Risultato Netto',fin_cost_per_egg:'Costo/Uovo',fin_break_even:'Punto di Pareggio',fin_month:'Mese',
fin_cat_feed:'Mangime',fin_cat_vaccines:'Vaccini/Farmaci',fin_cat_transport:'Trasporto',fin_cat_labor:'Manodopera',fin_cat_infrastructure:'Infrastruttura',fin_cat_other:'Altro',
fin_type_eggs:'Vendita Uova',fin_type_birds:'Vendita Avicoli',fin_type_manure:'Vendita Pollina',fin_type_other:'Altro',
ana_title:'Analisi',ana_comparison:'Confronto Gruppi',ana_seasonality:'Stagionalit√†',ana_profitability:'Redditivit√†',ana_benchmarks:'Benchmark',ana_best_flock:'Miglior Gruppo',ana_worst_flock:'Peggior Gruppo',ana_avg_production:'Produzione Media',ana_trend:'Tendenza',ana_kpi_evolution:'Evoluzione KPI',ana_no_snapshots:'Nessuna istantanea. Salvare istantanee dal Pannello.',
ops_title:'Operazioni',ops_checklist:'Checklist Giornaliera',ops_logbook:'Registro',ops_personnel:'Personale',ops_task:'Attivit√†',ops_done:'Completata',ops_add_task:'Aggiungi Attivit√†',ops_check_date:'Data',ops_log_entry:'Registrazione',ops_log_category:'Categoria',ops_log_add:'Nuova Registrazione',
ops_log_cat_general:'Generale',ops_log_cat_health:'Sanit√†',ops_log_cat_production:'Produzione',ops_log_cat_maintenance:'Manutenzione',ops_log_cat_observation:'Osservazione',
ops_per_name:'Nome',ops_per_role:'Ruolo',ops_per_salary:'Stipendio',ops_per_start:'Data Inizio',ops_per_active:'Attivo',ops_per_add:'Aggiungi Personale',
env_title:'Condizioni Ambientali',env_add:'Nuovo Record',env_temp:'Temperatura (¬∞C)',env_humidity:'Umidit√† (%)',env_light:'Ore di Luce',env_ventilation:'Ventilazione',env_density:'Densit√† (capi/m¬≤)',env_optimal:'Intervallo Ottimale',env_temp_range:'18-24¬∞C',env_humidity_range:'40-70%',env_light_range:'14-16 ore',env_density_range:'4-5 capi/m¬≤',
cfg_title:'Impostazioni',cfg_farm:'Dettagli Allevamento',cfg_farm_name:'Nome Allevamento',cfg_location:'Posizione',cfg_capacity:'Capacit√† (capi)',cfg_currency:'Valuta',cfg_alerts:'Soglie di Avviso',cfg_min_feed:'Scorta Minima Mangime (kg)',cfg_max_mortality:'Mortalit√† Massima (%)',cfg_alert_days:'Giorni di Preavviso',cfg_data:'Dati',cfg_export:'Esporta (JSON)',cfg_import:'Importa (JSON)',cfg_reset:'Elimina Tutto',cfg_reset_confirm:'Eliminare TUTTI i dati definitivamente?',cfg_saved:'Salvato',cfg_exported:'Dati esportati',cfg_imported:'Dati importati',cfg_reset_done:'Dati eliminati',cfg_checklist:'Checklist Predefinita',cfg_checklist_items:'Attivit√† checklist giornaliera',cfg_theme:'Tema Colore',cfg_theme_blue:'Blu Navy',cfg_theme_green:'Verde',cfg_theme_purple:'Viola',cfg_theme_black:'Nero',
sidebar_subtitle:'Sistema Avicolo 360¬∞',prod_shell_white:'Bianco',prod_shell_brown:'Marrone',prod_shell_cream:'Crema',required:'Campo obbligatorio',no_flocks_birthdate:'Nessun gruppo con data di nascita',vac_select_flocks:'Seleziona i gruppi per generare il calendario:',feed_type_placeholder:'Ovaiole, Starter, ecc.',avg_per_day:'Media/giorno',per_flock:'Gruppo',history:'Storico',env_latest_reading:'Ultima Lettura',env_ok:'OK',env_out_of_range:'Fuori intervallo',data_stats:'Statistiche Dati',final_warning:'‚ö†Ô∏è ULTIMO AVVERTIMENTO ‚Äî TUTTI i dati verranno eliminati',total_salaries:'Stipendi Totali',eggs_unit:'uova',csv_income:'Entrata',csv_expense:'Uscita',fcr_unit:'kg mangime/kg uovo',lc_feed_starter:'Starter',lc_feed_grower:'Accrescimento',lc_feed_developer:'Sviluppo',lc_feed_prelay:'Pre-deposizione',lc_feed_layer:'Ovaiole',lc_feed_lowlay:'Bassa deposizione',lc_prod_label:'Prod.',lc_prod_first:'Prime uova',lc_mile_1:'Vaccini Marek, Newcastle+BI, Gumboro',lc_mile_2:'Richiamo Newcastle, sviluppo piumaggio',lc_mile_3:'Vaiolo Aviare, EAV, Corizza, Salmonella',lc_mile_4:'Richiamo Newcastle+BI, cambio dieta, 16h luce',lc_mile_5:'Picco produzione sett. 26-30, monitorare FCR',lc_mile_6:'Richiamo Newcastle ogni 8-12 sett., valutare redditivit√†',lc_mile_7:'Valutare scarto vs muta forzata',lc_mile_8:'Vendita avicoli a scarto, pulizia capannone',vac_route_injection:'Iniezione',vac_route_ocular:'Oculare/spray',vac_route_water:'Acqua di bevanda',vac_route_wing:'Puntura alare',snapshots:'istantanee',error_prefix:'Errore',chk_collect_eggs:'Raccogliere uova',chk_feed_birds:'Alimentare gli avicoli',chk_check_water:'Controllare acqua',chk_check_health:'Controllare stato sanitario',chk_cleaning:'Pulizia',chk_record_temp:'Registrare temperatura',
weather_title:'Meteo',weather_temp:'Temperatura',weather_humidity:'Umidit√†',weather_wind:'Vento',weather_forecast:'Previsioni 3 Giorni',weather_no_key:'Configurare la chiave API OpenWeatherMap nelle Impostazioni',weather_heat_alert:'Allerta Stress da Calore',weather_thi:'Indice THI',weather_feels:'Percepita',weather_last_update:'Ultimo aggiornamento',weather_test:'Test',
geo_set_location:'Posizione Allevamento',geo_use_gps:'Usa il mio GPS',geo_click_map:'Clicca sulla mappa per impostare la posizione',geo_lat:'Latitudine',geo_lng:'Longitudine',geo_saved:'Posizione salvata',
iot_title:'Sensori IoT',iot_broker:'Broker MQTT (wss://)',iot_user:'Utente MQTT',iot_pass:'Password MQTT',iot_topic:'Prefisso Topic',iot_connect:'Connetti',iot_disconnect:'Disconnetti',iot_live:'IoT in Tempo Reale',iot_no_config:'Configurare MQTT nelle Impostazioni',iot_save_reading:'Salva lettura corrente',iot_connected:'Connesso',iot_disconnected:'Disconnesso',iot_ammonia:'Ammoniaca',iot_light:'Luce',iot_lux:'lux',iot_ppm:'ppm',
pred_title:'Previsioni',pred_forecast:'Previsione Produzione',pred_anomaly:'Anomalie',pred_drop_risk:'Rischio di Calo',pred_breed_curve:'Curva di Razza',pred_fcr_trend:'Tendenza FCR',pred_next_7d:'Prossimi 7 giorni',pred_improving:'In miglioramento',pred_worsening:'In peggioramento',pred_stable:'Stabile',pred_score:'Punteggio',pred_low:'Basso',pred_medium:'Medio',pred_high:'Alto',pred_vs_expected:'Effettivo vs Previsto',
stress_title:'Eventi di Stress',stress_type:'Tipo',stress_severity:'Gravit√†',stress_heat:'Calore',stress_disease:'Malattia',stress_feed_change:'Cambio Mangime',stress_power:'Interruzione Elettrica',stress_predator:'Predatore',stress_other:'Altro',stress_description:'Descrizione',stress_add:'Nuovo Evento',stress_impact:'Impatto sulla Produzione',stress_auto:'(Auto-generato)',
env_ammonia:'Ammoniaca (ppm)',env_wind:'Velocit√† del Vento (km/h)',env_thi:'Indice THI',env_manual:'Inserimento Manuale',env_history:'Storico',env_iot:'IoT in Tempo Reale',
pwa_install:'Installa App',pwa_offline:'Modalit√† Offline Disponibile',
cfg_owm_key:'Chiave API OpenWeatherMap',cfg_mqtt:'Impostazioni MQTT',cfg_geo:'Geolocalizzazione',
flock_housing:'Tipo di Alloggiamento',flock_housing_floor:'A Terra',flock_housing_cage:'In Gabbia',flock_housing_free:'All\'aperto',flock_target_curve:'Curva Obiettivo',flock_egg_color:'Colore Uovo',
ana_predictions:'Previsioni',
per_day:'al giorno',actual:'Effettivo',expected:'Previsto',not_available:'non disponibile',
nav_biosecurity:'Biosicurezza',bio_title:'Biosicurezza e Controllo Infestanti',bio_visitors:'Visitatori',bio_zones:'Zone',bio_pests:'Infestanti',bio_protocols:'Protocolli',
bio_add_visitor:'Nuovo Visitatore',bio_visitor_name:'Nome',bio_visitor_company:'Azienda',bio_visitor_purpose:'Scopo',bio_visitor_zone:'Zona',bio_visitor_plate:'Targa Veicolo',bio_visitor_disinfected:'Disinfettato',bio_visitor_from_farm:'Allevamento di Provenienza',bio_visitor_from_health:'Stato Sanitario Provenienza',bio_cross_risk:'‚ö†Ô∏è Rischio di contaminazione incrociata',
bio_add_zone:'Nuova Zona',bio_zone_name:'Nome Zona',bio_zone_risk:'Livello di Rischio',bio_zone_last_disinfection:'Ultima Disinfezione',bio_zone_frequency:'Frequenza (giorni)',bio_risk_green:'Verde',bio_risk_yellow:'Giallo',bio_risk_red:'Rosso',
bio_add_pest:'Nuovo Avvistamento',bio_pest_type:'Tipo',bio_pest_rodent:'Roditore',bio_pest_fly:'Mosca',bio_pest_wild_bird:'Uccello Selvatico',bio_pest_other:'Altro',bio_pest_location:'Posizione',bio_pest_severity:'Gravit√†',bio_pest_action:'Azione Intrapresa',bio_pest_resolved:'Risolto',
bio_add_protocol:'Nuovo Protocollo',bio_protocol_name:'Nome Protocollo',bio_protocol_frequency:'Frequenza',bio_protocol_daily:'Giornaliera',bio_protocol_weekly:'Settimanale',bio_protocol_monthly:'Mensile',bio_protocol_last:'Ultimo Completamento',bio_protocol_items:'Voci del Protocollo',bio_protocol_complete:'Completato',bio_protocol_overdue:'Scaduto',
bio_pest_score:'Punteggio Infestanti',bio_overdue_disinfection:'Disinfezione scaduta',bio_unresolved_pests:'Infestanti non risolti',
alert_bio_disinfection:'Disinfezione zona scaduta',alert_bio_pests:'Infestanti non risolti',alert_bio_cross:'Rischio di contaminazione incrociata',
nav_traceability:'Tracciabilit√†',trace_title:'Tracciabilit√† Uova',trace_add:'Nuovo Lotto',trace_batch_id:'ID Lotto',trace_rack:'Scaffale',trace_box_count:'Scatole',trace_eggs_per_box:'Uova/Scatola',trace_qr:'Codice QR',trace_delivery:'Data di Consegna',trace_search:'Cerca per ID/QR',trace_origin:'Origine',trace_house:'Capannone',
nav_planning:'Pianificazione',plan_title:'Pianificazione Produzione',plan_add:'Nuovo Piano',plan_name:'Nome Piano',plan_target_date:'Data Obiettivo',plan_eggs_needed:'Uova Necessarie',plan_allocations:'Allocazioni Gruppi',plan_expected:'Produzione Prevista',plan_gap:'Scostamento',plan_on_track:'In Linea',plan_behind:'In Ritardo',plan_ahead:'In Anticipo',plan_estimate:'Stima',plan_commitment:'Impegno',
prod_egg_type:'Tipo di Uovo',prod_type_conventional:'Convenzionale',prod_type_free_range:'Allevamento a Terra',prod_type_organic:'Biologico',prod_type_pasture:'Allevamento al Pascolo',prod_type_decorative:'Decorativo',
prod_market:'Canale di Mercato',prod_market_wholesale:'Ingrosso',prod_market_supermarket:'Supermercato',prod_market_restaurant:'Ristorante',prod_market_direct:'Vendita Diretta',prod_market_export:'Esportazione',prod_market_pasteurized:'Pastorizzato',
ana_by_segment:'Redditivit√† per Segmento',ana_by_type:'Per Tipo',ana_by_channel:'Per Canale',
nav_campo_mode:'Modalit√† Campo',nav_vet_mode:'Modalit√† Veterinario',campo_today:'OGGI',campo_quick_entry:'Inserimento Rapido',vet_visit:'Visita completata',vet_vaccines:'Vaccini applicati',vet_pending:'In attesa di revisione',vet_select_farm:'Seleziona Allevamento/Gruppo',
cfg_font_size:'Dimensione Testo',cfg_font_small:'Piccolo',cfg_font_normal:'Normale',cfg_font_large:'Grande',cfg_font_xlarge:'Extra Grande',cfg_dark_mode:'Modalit√† Scura',cfg_theme_dark:'Scuro',
pred_outbreak_risk:'Rischio Focolaio',pred_outbreak_high:'Rischio Alto',pred_outbreak_medium:'Rischio Medio',pred_outbreak_low:'Rischio Basso',pred_outbreak_factor:'Fattore',pred_outbreak_weight:'Peso',pred_outbreak_value:'Valore',pred_probability:'Probabilit√†',pred_factors:'Fattori',pred_recommendations:'Raccomandazioni',pred_confidence:'Affidabilit√†',pred_forecast_7d:'7 giorni',pred_forecast_14d:'14 giorni',pred_ensemble:'Previsione Combinata',pred_forecast_upper:'Banda Superiore',pred_forecast_lower:'Banda Inferiore',
ana_segment_profit:'Redditivit√† per Segmento',cfg_accessibility:'Accessibilit√†',
rec_title:'Raccomandazioni',rec_dismiss:'Ignora',rec_check_diet:'Controllare dieta / formulazione mangime / escludere malattia',rec_check_env:'Controllare ambiente / malattia / stress immediatamente',rec_below_curve:'Sotto la produzione standard ‚Äî controllare stress, luce, mangime',rec_buy_feed:'Programmare acquisto mangime',rec_record_env:'Registrare condizioni ambientali',rec_disinfect:'Eseguire protocollo di disinfezione zona',rec_heat_plan:'Stress da calore prolungato ‚Äî attivare piano di raffreddamento',rec_lab_samples:'Inviare campioni al laboratorio',rec_ventilation:'Aumentare ventilazione, controllare acqua fresca'
},
ja:{
save:'‰øùÂ≠ò',cancel:'„Ç≠„É£„É≥„Çª„É´',delete:'ÂâäÈô§',edit:'Á∑®ÈõÜ',add:'ËøΩÂä†',close:'Èñâ„Åò„Çã',actions:'Êìç‰Ωú',date:'Êó•‰ªò',notes:'„É°„É¢',name:'ÂêçÂâç',phone:'ÈõªË©±',email:'„É°„Éº„É´',address:'‰ΩèÊâÄ',confirm_delete:'„Åì„ÅÆ„É¨„Ç≥„Éº„Éâ„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü',no_data:'„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',total:'ÂêàË®à',all:'„Åô„Åπ„Å¶',loading:'Ë™≠„ÅøËæº„Åø‰∏≠',search:'Ê§úÁ¥¢',from:'ÈñãÂßã',to:'ÁµÇ‰∫Ü',status:'„Çπ„ÉÜ„Éº„Çø„Çπ',export_csv:'CSVÂá∫Âäõ',today:'‰ªäÊó•',active:'ÊúâÂäπ',inactive:'ÁÑ°Âäπ',
nav_dashboard:'„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ',nav_production:'Áî£ÂçµË®òÈå≤',nav_flocks:'È∂èÁæ§',nav_health:'ÂÅ•Â∫∑ÁÆ°ÁêÜ',nav_feed:'È£ºÊñô',nav_clients:'ÂèñÂºïÂÖà',nav_finances:'Ë≤°Âãô',nav_analysis:'ÂàÜÊûê',nav_operations:'ÈÅãÂñ∂',nav_environment:'Áí∞Â¢É',nav_config:'Ë®≠ÂÆö',
dash_title:'„É°„Ç§„É≥„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ',kpi_today:'Êú¨Êó•„ÅÆÁîüÁî£',kpi_henday:'„Éò„É≥„Éá„Ç§Áî£ÂçµÁéá',kpi_fcr:'È£ºÊñôË¶ÅÊ±ÇÁéáÔºàFCRÔºâ',kpi_mortality:'Ê≠ª‰∫°Áéá',kpi_cost_egg:'Âçµ1ÂÄã„ÅÇ„Åü„Çä„Ç≥„Çπ„Éà',kpi_income_net:'Á¥îÂà©Áõä',kpi_alerts:'„Ç¢„É©„Éº„Éà',kpi_active_hens:'Á®ºÂÉçÈ∂èÊï∞',kpi_active_flocks:'Á®ºÂÉçÈ∂èÁæ§Êï∞',dash_alerts:'„Ç¢„É©„Éº„Éà',dash_trend:'30Êó•Èñì„Éà„É¨„É≥„Éâ',dash_no_alerts:'„Ç¢„É©„Éº„Éà„Å™„Åó',dash_snapshot:'KPI„Çπ„Éä„ÉÉ„Éó„Ç∑„Éß„ÉÉ„Éà„Çí‰øùÂ≠ò',dash_kpi_history:'KPIÂ±•Ê≠¥',
alert_vaccine_overdue:'„ÉØ„ÇØ„ÉÅ„É≥ÊúüÈôêË∂ÖÈÅé',alert_vaccine_soon:'„ÉØ„ÇØ„ÉÅ„É≥Êé•Á®Æ‰∫àÂÆö',alert_low_feed:'È£ºÊñôÂú®Â∫´‰∏çË∂≥',alert_high_mortality:'È´òÊ≠ª‰∫°Áéá',alert_active_outbreak:'Áô∫Áîü‰∏≠„ÅÆÁñæÁóÖ',alert_withdrawal:'‰ºëËñ¨ÊúüÈñì‰∏≠',
flock_title:'È∂èÁæ§ÁÆ°ÁêÜ',flock_add:'Êñ∞Ë¶èÈ∂èÁæ§',flock_name:'ÂêçÁß∞',flock_breed:'ÂìÅÁ®Æ',flock_count:'ÂàùÊúüÁæΩÊï∞',flock_birthdate:'Â≠µÂåñÊó•',flock_purchase_date:'Ë≥ºÂÖ•Êó•',flock_supplier:'‰ªïÂÖ•ÂÖà',flock_cost:'Á∑è„Ç≥„Çπ„Éà',flock_status:'„Çπ„ÉÜ„Éº„Çø„Çπ',flock_notes:'„É°„É¢',flock_age:'Êó•ÈΩ¢',flock_health:'ÂÅ•Â∫∑Áä∂ÊÖã',flock_weeks:'ÈÄ±',flock_days:'Êó•',flock_current:'ÁèæÂú®',flock_status_cria:'ËÇ≤Èõõ',flock_status_recria:'ËÇ≤Êàê',flock_status_produccion:'Áî£ÂçµÊúü',flock_status_descarte:'Ê∑òÊ±∞',flock_edit:'È∂èÁæ§„ÇíÁ∑®ÈõÜ',flock_lifecycle:'„É©„Ç§„Éï„Çµ„Ç§„ÇØ„É´',flock_roadmap:'„É≠„Éº„Éâ„Éû„ÉÉ„Éó',
lc_pollito:'„Å≤„Çà„Åì',lc_cria:'ËÇ≤Èõõ',lc_recria:'ËÇ≤Êàê',lc_prepostura:'Áî£ÂçµÂâçÊúü',lc_pico:'„Éî„Éº„ÇØÁî£ÂçµÊúü',lc_media:'‰∏≠ÊúüÁî£ÂçµÊúü',lc_baja:'ÂæåÊúüÁî£ÂçµÊúü',lc_descarte:'Ê∑òÊ±∞',lc_feed:'È£ºÊñô',lc_temp:'Ê∏©Â∫¶',lc_weeks:'ÈÄ±ÈΩ¢',lc_milestone:'„Éû„Ç§„É´„Çπ„Éà„Éº„É≥',lc_current_stage:'ÁèæÂú®„ÅÆ„Çπ„ÉÜ„Éº„Ç∏',
prod_title:'Áî£ÂçµË®òÈå≤',prod_add:'Êñ∞Ë¶èË®òÈå≤',prod_flock:'È∂èÁæ§',prod_eggs:'Êé°ÂçµÊï∞',prod_broken:'Á†¥Êêç„Éª‰∏çËâØÂçµ',prod_size_s:'Â∞èÔºàSÔºâ',prod_size_m:'‰∏≠ÔºàMÔºâ',prod_size_l:'Â§ßÔºàLÔºâ',prod_size_xl:'ÁâπÂ§ßÔºàXLÔºâ',prod_size_jumbo:'„Ç∏„É£„É≥„Éú',prod_shell:'ÂçµÊÆªËâ≤',prod_yolk:'ÂçµÈªÑÂìÅË≥™Ôºà1-10Ôºâ',prod_deaths:'Ê≠ª‰∫°Êï∞',prod_death_cause:'Ê≠ªÂõ†',prod_date:'Êó•‰ªò',
san_title:'ÂÅ•Â∫∑ÁÆ°ÁêÜ',san_vaccines:'„ÉØ„ÇØ„ÉÅ„É≥',san_medications:'ÊäïËñ¨',san_outbreaks:'ÁñæÁóÖÁô∫Áîü',
vac_title:'„ÉØ„ÇØ„ÉÅ„É≥Ë®àÁîª',vac_add:'„ÉØ„ÇØ„ÉÅ„É≥Ë®òÈå≤',vac_vaccine:'„ÉØ„ÇØ„ÉÅ„É≥',vac_scheduled:'‰∫àÂÆöÊó•',vac_applied:'Êé•Á®ÆÊó•',vac_batch:'„É≠„ÉÉ„ÉàÁï™Âè∑',vac_route:'Êäï‰∏éÁµåË∑Ø',vac_overdue:'ÊúüÈôêË∂ÖÈÅé',vac_upcoming:'Êé•Á®Æ‰∫àÂÆö',vac_applied_status:'Êé•Á®ÆÊ∏à„Åø',vac_pending:'Êú™Êé•Á®Æ',vac_generate:'„Ç´„É¨„É≥„ÉÄ„ÉºÁîüÊàê',vac_mark_applied:'Êé•Á®ÆÊ∏à„Åø„Å´„Åô„Çã',
med_title:'ÊäïËñ¨ÁÆ°ÁêÜ',med_add:'ÊäïËñ¨Ë®òÈå≤',med_name:'Ëñ¨Ââ§Âêç',med_reason:'ÁêÜÁî±',med_start:'ÈñãÂßãÊó•',med_end:'ÁµÇ‰∫ÜÊó•',med_withdrawal:'‰ºëËñ¨Êó•Êï∞',med_withdrawal_end:'‰ºëËñ¨ÁµÇ‰∫ÜÊó•',med_dosage:'Êäï‰∏éÈáè',med_in_withdrawal:'‰ºëËñ¨ÊúüÈñì‰∏≠',
out_title:'ÁñæÁóÖÁô∫Áîü',out_add:'Áô∫ÁîüË®òÈå≤',out_disease:'ÁñæÁóÖÂêç',out_start:'Áô∫ÁîüÊó•',out_end:'ÁµÇÊÅØÊó•',out_affected:'ÁΩπÊÇ£ÁæΩÊï∞',out_deaths:'Ê≠ª‰∫°ÁæΩÊï∞',out_symptoms:'ÁóáÁä∂',out_treatment:'Ê≤ªÁôÇ',out_loss:'ÁµåÊ∏àÊêçÂ§±',out_active:'Áô∫Áîü‰∏≠',out_controlled:'Âà∂Âæ°‰∏≠',out_resolved:'ÁµÇÊÅØ',
feed_title:'È£ºÊñôÁÆ°ÁêÜ',feed_purchases:'Ë≥ºÂÖ•',feed_consumption:'Ê∂àË≤ª',feed_stock:'ÁèæÂú®„ÅÆÂú®Â∫´',feed_add_purchase:'Êñ∞Ë¶èË≥ºÂÖ•',feed_add_consumption:'Ê∂àË≤ªË®òÈå≤',feed_type:'Á®ÆÈ°û',feed_qty:'Êï∞ÈáèÔºàkgÔºâ',feed_cost:'„Ç≥„Çπ„Éà',feed_supplier:'‰ªïÂÖ•ÂÖà',feed_flock:'È∂èÁæ§',feed_low_alert:'Âú®Â∫´‰∏çË∂≥',
cli_title:'ÂèñÂºïÂÖà',cli_add:'Êñ∞Ë¶èÂèñÂºïÂÖà',cli_route:'ÈÖçÈÄÅ„É´„Éº„Éà„ÉªÂú∞Âüü',cli_price:'Âèñ„ÇäÊ±∫„ÇÅ‰æ°Ê†º',cli_total:'ÂèñÂºïÂÖàÂêàË®à',
fin_title:'Ë≤°Âãô',fin_income:'ÂèéÂÖ•',fin_expenses:'ÊîØÂá∫',fin_receivables:'Â£≤ÊéõÈáë',fin_summary:'Ê¶ÇË¶Å',fin_add_income:'Êñ∞Ë¶èÂèéÂÖ•',fin_add_expense:'Êñ∞Ë¶èÊîØÂá∫',fin_add_receivable:'Êñ∞Ë¶èÂ£≤ÊéõÈáë',fin_type:'Á®ÆÈ°û',fin_qty:'Êï∞Èáè',fin_unit_price:'Âçò‰æ°',fin_client:'ÂèñÂºïÂÖà',fin_category:'„Ç´„ÉÜ„Ç¥„É™',fin_description:'Ë™¨Êòé',fin_amount:'ÈáëÈ°ç',fin_due_date:'ÊîØÊâïÊúüÈôê',fin_paid:'ÊîØÊâïÊ∏à„Åø',fin_total_income:'Á∑èÂèéÂÖ•',fin_total_expenses:'Á∑èÊîØÂá∫',fin_net:'Á¥îÂà©Áõä',fin_cost_per_egg:'Âçµ1ÂÄã„ÅÇ„Åü„Çä„Ç≥„Çπ„Éà',fin_break_even:'ÊêçÁõäÂàÜÂ≤êÁÇπ',fin_month:'Êúà',
fin_cat_feed:'È£ºÊñô',fin_cat_vaccines:'„ÉØ„ÇØ„ÉÅ„É≥„ÉªËñ¨Ââ§',fin_cat_transport:'Ëº∏ÈÄÅ',fin_cat_labor:'‰∫∫‰ª∂Ë≤ª',fin_cat_infrastructure:'Ë®≠ÂÇô',fin_cat_other:'„Åù„ÅÆ‰ªñ',
fin_type_eggs:'ÂçµË≤©Â£≤',fin_type_birds:'È∂èË≤©Â£≤',fin_type_manure:'È∂èÁ≥ûË≤©Â£≤',fin_type_other:'„Åù„ÅÆ‰ªñ',
ana_title:'ÂàÜÊûê',ana_comparison:'È∂èÁæ§ÊØîËºÉ',ana_seasonality:'Â≠£ÁØÄÊÄß',ana_profitability:'ÂèéÁõäÊÄß',ana_benchmarks:'„Éô„É≥„ÉÅ„Éû„Éº„ÇØ',ana_best_flock:'ÊúÄÂÑ™ËâØÈ∂èÁæ§',ana_worst_flock:'ÊúÄ‰ΩéÈ∂èÁæ§',ana_avg_production:'Âπ≥ÂùáÁîüÁî£',ana_trend:'„Éà„É¨„É≥„Éâ',ana_kpi_evolution:'KPIÊé®Áßª',ana_no_snapshots:'„Çπ„Éä„ÉÉ„Éó„Ç∑„Éß„ÉÉ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Åã„Çâ‰øùÂ≠ò„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
ops_title:'ÈÅãÂñ∂ÁÆ°ÁêÜ',ops_checklist:'Êó•Ê¨°„ÉÅ„Çß„ÉÉ„ÇØ„É™„Çπ„Éà',ops_logbook:'‰ΩúÊ•≠Êó•Ë™å',ops_personnel:'‰∫∫Âì°',ops_task:'„Çø„Çπ„ÇØ',ops_done:'ÂÆå‰∫Ü',ops_add_task:'„Çø„Çπ„ÇØËøΩÂä†',ops_check_date:'Êó•‰ªò',ops_log_entry:'Ë®òÈå≤ÂÜÖÂÆπ',ops_log_category:'„Ç´„ÉÜ„Ç¥„É™',ops_log_add:'Êñ∞Ë¶èË®òÈå≤',
ops_log_cat_general:'‰∏ÄËà¨',ops_log_cat_health:'ÂÅ•Â∫∑',ops_log_cat_production:'ÁîüÁî£',ops_log_cat_maintenance:'„É°„É≥„ÉÜ„Éä„É≥„Çπ',ops_log_cat_observation:'Ë¶≥ÂØü',
ops_per_name:'ÂêçÂâç',ops_per_role:'ÂΩπËÅ∑',ops_per_salary:'Áµ¶‰∏é',ops_per_start:'ÂÖ•Á§æÊó•',ops_per_active:'Âú®Á±ç‰∏≠',ops_per_add:'‰∫∫Âì°ËøΩÂä†',
env_title:'Áí∞Â¢ÉÊù°‰ª∂',env_add:'Êñ∞Ë¶èË®òÈå≤',env_temp:'Ê∏©Â∫¶Ôºà¬∞CÔºâ',env_humidity:'ÊπøÂ∫¶Ôºà%Ôºâ',env_light:'ÁÖßÊòéÊôÇÈñì',env_ventilation:'ÊèõÊ∞ó',env_density:'È£ºÈ§äÂØÜÂ∫¶ÔºàÁæΩ/m¬≤Ôºâ',env_optimal:'ÈÅ©Ê≠£ÁØÑÂõ≤',env_temp_range:'18-24¬∞C',env_humidity_range:'40-70%',env_light_range:'14-16ÊôÇÈñì',env_density_range:'4-5ÁæΩ/m¬≤',
cfg_title:'Ë®≠ÂÆö',cfg_farm:'Ëæ≤Â†¥ÊÉÖÂ†±',cfg_farm_name:'Ëæ≤Â†¥Âêç',cfg_location:'ÊâÄÂú®Âú∞',cfg_capacity:'ÂèéÂÆπËÉΩÂäõÔºàÁæΩÔºâ',cfg_currency:'ÈÄöË≤®',cfg_alerts:'„Ç¢„É©„Éº„ÉàÈñæÂÄ§',cfg_min_feed:'ÊúÄ‰ΩéÈ£ºÊñôÂú®Â∫´ÔºàkgÔºâ',cfg_max_mortality:'ÊúÄÂ§ßÊ≠ª‰∫°ÁéáÔºà%Ôºâ',cfg_alert_days:'„Ç¢„É©„Éº„ÉàÂÖàË°åÊó•Êï∞',cfg_data:'„Éá„Éº„Çø',cfg_export:'„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÔºàJSONÔºâ',cfg_import:'„Ç§„É≥„Éù„Éº„ÉàÔºàJSONÔºâ',cfg_reset:'ÂÖ®„Éá„Éº„ÇøÂâäÈô§',cfg_reset_confirm:'„Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÇíÂÆåÂÖ®„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü',cfg_saved:'‰øùÂ≠ò„Åó„Åæ„Åó„Åü',cfg_exported:'„Éá„Éº„Çø„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åó„Åæ„Åó„Åü',cfg_imported:'„Éá„Éº„Çø„Çí„Ç§„É≥„Éù„Éº„Éà„Åó„Åæ„Åó„Åü',cfg_reset_done:'„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü',cfg_checklist:'„Éá„Éï„Ç©„É´„Éà„ÉÅ„Çß„ÉÉ„ÇØ„É™„Çπ„Éà',cfg_checklist_items:'Êó•Ê¨°„ÉÅ„Çß„ÉÉ„ÇØ„É™„Çπ„Éà„ÅÆ„Çø„Çπ„ÇØ',cfg_theme:'„Ç´„É©„Éº„ÉÜ„Éº„Éû',cfg_theme_blue:'„Éç„Ç§„Éì„Éº„Éñ„É´„Éº',cfg_theme_green:'„Ç∞„É™„Éº„É≥',cfg_theme_purple:'„Éë„Éº„Éó„É´',cfg_theme_black:'„Éñ„É©„ÉÉ„ÇØ',
sidebar_subtitle:'È§äÈ∂è„Ç∑„Çπ„ÉÜ„É† 360¬∞',prod_shell_white:'ÁôΩ',prod_shell_brown:'Ëµ§ÔºàËå∂Ôºâ',prod_shell_cream:'„ÇØ„É™„Éº„É†',required:'ÂøÖÈ†àÈ†ÖÁõÆ',no_flocks_birthdate:'Â≠µÂåñÊó•„ÅÆ„ÅÇ„ÇãÈ∂èÁæ§„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',vac_select_flocks:'„Ç´„É¨„É≥„ÉÄ„Éº„ÇíÁîüÊàê„Åô„ÇãÈ∂èÁæ§„ÇíÈÅ∏ÊäûÔºö',feed_type_placeholder:'„É¨„Ç§„É§„Éº„ÄÅ„Çπ„Çø„Éº„Çø„Éº„Å™„Å©',avg_per_day:'Âπ≥Âùá/Êó•',per_flock:'È∂èÁæ§',history:'Â±•Ê≠¥',env_latest_reading:'ÊúÄÊñ∞„ÅÆË®àÊ∏¨ÂÄ§',env_ok:'Ê≠£Â∏∏',env_out_of_range:'ÁØÑÂõ≤Â§ñ',data_stats:'„Éá„Éº„ÇøÁµ±Ë®à',final_warning:'‚ö†Ô∏è ÊúÄÁµÇË≠¶Âëä ‚Äî „Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÅåÂâäÈô§„Åï„Çå„Åæ„Åô',total_salaries:'Áµ¶‰∏éÂêàË®à',eggs_unit:'Âçµ',csv_income:'ÂèéÂÖ•',csv_expense:'ÊîØÂá∫',fcr_unit:'kgÈ£ºÊñô/kgÂçµ',lc_feed_starter:'„Çπ„Çø„Éº„Çø„Éº',lc_feed_grower:'„Ç∞„É≠„ÉØ„Éº',lc_feed_developer:'„Éá„Éô„É≠„ÉÉ„Éë„Éº',lc_feed_prelay:'„Éó„É¨„É¨„Ç§',lc_feed_layer:'„É¨„Ç§„É§„Éº',lc_feed_lowlay:'„É≠„Éº„É¨„Ç§',lc_prod_label:'Áî£Âçµ',lc_prod_first:'ÂàùÁî£Âçµ',lc_mile_1:'„Éû„É¨„ÉÉ„ÇØ„ÄÅ„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´+IB„ÄÅ„Ç¨„É≥„Éú„É≠„ÉØ„ÇØ„ÉÅ„É≥',lc_mile_2:'„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´ËøΩÂä†Êé•Á®Æ„ÄÅÁæΩÊØõÁô∫ÈÅî',lc_mile_3:'È∂èÁóò„ÄÅAE„ÄÅ„Ç≥„É™„Éº„Ç∂„ÄÅ„Çµ„É´„É¢„Éç„É©',lc_mile_4:'„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´+IBËøΩÂä†Êé•Á®Æ„ÄÅÈ£ºÊñôÂ§âÊõ¥„ÄÅ16ÊôÇÈñìÁÇπÁÅØ',lc_mile_5:'„Éî„Éº„ÇØÁî£Âçµ26-30ÈÄ±„ÄÅFCR„É¢„Éã„Çø„É™„É≥„Ç∞',lc_mile_6:'„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´ËøΩÂä†Êé•Á®Æ8-12ÈÄ±„Åî„Å®„ÄÅÂèéÁõäÊÄßË©ï‰æ°',lc_mile_7:'Ê∑òÊ±∞„Åæ„Åü„ÅØÂº∑Âà∂ÊèõÁæΩ„ÇíÊ§úË®é',lc_mile_8:'Ê∑òÊ±∞È∂è„ÇíÂá∫Ëç∑„ÄÅÈ∂èËàéÊ∏ÖÊéÉ',vac_route_injection:'Ê≥®Â∞Ñ',vac_route_ocular:'ÁÇπÁúº„ÉªÂô¥Èúß',vac_route_water:'È£≤Ê∞¥Êäï‰∏é',vac_route_wing:'ÁøºËÜúÂà∫Á®Æ',snapshots:'„Çπ„Éä„ÉÉ„Éó„Ç∑„Éß„ÉÉ„Éà',error_prefix:'„Ç®„É©„Éº',chk_collect_eggs:'Êé°Âçµ',chk_feed_birds:'Áµ¶È§å',chk_check_water:'È£≤Ê∞¥Á¢∫Ë™ç',chk_check_health:'ÂÅ•Â∫∑„ÉÅ„Çß„ÉÉ„ÇØ',chk_cleaning:'Ê∏ÖÊéÉ',chk_record_temp:'Ê∏©Â∫¶Ë®òÈå≤',
weather_title:'Â§©Ê∞ó',weather_temp:'Ê∞óÊ∏©',weather_humidity:'ÊπøÂ∫¶',weather_wind:'È¢®ÈÄü',weather_forecast:'3Êó•Èñì‰∫àÂ†±',weather_no_key:'Ë®≠ÂÆö„ÅßOpenWeatherMap API„Ç≠„Éº„ÇíË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑ',weather_heat_alert:'ÁÜ±„Çπ„Éà„É¨„ÇπË≠¶Â†±',weather_thi:'THIÊåáÊï∞',weather_feels:'‰ΩìÊÑüÊ∏©Â∫¶',weather_last_update:'ÊúÄÁµÇÊõ¥Êñ∞',weather_test:'„ÉÜ„Çπ„Éà',
geo_set_location:'Ëæ≤Â†¥„ÅÆ‰ΩçÁΩÆ',geo_use_gps:'GPS„Çí‰ΩøÁî®',geo_click_map:'Âú∞Âõ≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶‰ΩçÁΩÆ„ÇíË®≠ÂÆö',geo_lat:'Á∑ØÂ∫¶',geo_lng:'ÁµåÂ∫¶',geo_saved:'‰ΩçÁΩÆ„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü',
iot_title:'IoT„Çª„É≥„Çµ„Éº',iot_broker:'MQTT„Éñ„É≠„Éº„Ç´„ÉºÔºàwss://Ôºâ',iot_user:'MQTT„É¶„Éº„Ç∂„Éº',iot_pass:'MQTT„Éë„Çπ„ÉØ„Éº„Éâ',iot_topic:'„Éà„Éî„ÉÉ„ÇØ„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„Çπ',iot_connect:'Êé•Á∂ö',iot_disconnect:'ÂàáÊñ≠',iot_live:'IoT„É©„Ç§„Éñ',iot_no_config:'Ë®≠ÂÆö„ÅßMQTT„ÇíÊßãÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ',iot_save_reading:'ÁèæÂú®„ÅÆË®àÊ∏¨ÂÄ§„Çí‰øùÂ≠ò',iot_connected:'Êé•Á∂öÊ∏à„Åø',iot_disconnected:'Êú™Êé•Á∂ö',iot_ammonia:'„Ç¢„É≥„É¢„Éã„Ç¢',iot_light:'ÁÖßÂ∫¶',iot_lux:'lux',iot_ppm:'ppm',
pred_title:'‰∫àÊ∏¨',pred_forecast:'Áî£Âçµ‰∫àÊ∏¨',pred_anomaly:'Áï∞Â∏∏Ê§úÁü•',pred_drop_risk:'‰Ωé‰∏ã„É™„Çπ„ÇØ',pred_breed_curve:'ÂìÅÁ®ÆÊ®ôÊ∫ñÊõ≤Á∑ö',pred_fcr_trend:'FCR„Éà„É¨„É≥„Éâ',pred_next_7d:'‰ªäÂæå7Êó•Èñì',pred_improving:'ÊîπÂñÑÂÇæÂêë',pred_worsening:'ÊÇ™ÂåñÂÇæÂêë',pred_stable:'ÂÆâÂÆö',pred_score:'„Çπ„Ç≥„Ç¢',pred_low:'‰Ωé',pred_medium:'‰∏≠',pred_high:'È´ò',pred_vs_expected:'ÂÆüÁ∏æ vs ‰∫àÊ∏¨',
stress_title:'„Çπ„Éà„É¨„Çπ„Ç§„Éô„É≥„Éà',stress_type:'Á®ÆÈ°û',stress_severity:'ÈáçÁóáÂ∫¶',stress_heat:'ÁÜ±„Çπ„Éà„É¨„Çπ',stress_disease:'ÁñæÁóÖ',stress_feed_change:'È£ºÊñôÂ§âÊõ¥',stress_power:'ÂÅúÈõª',stress_predator:'Â§ñÊïµ',stress_other:'„Åù„ÅÆ‰ªñ',stress_description:'Ë™¨Êòé',stress_add:'Êñ∞Ë¶è„Ç§„Éô„É≥„Éà',stress_impact:'ÁîüÁî£„Å∏„ÅÆÂΩ±Èüø',stress_auto:'ÔºàËá™ÂãïÁîüÊàêÔºâ',
env_ammonia:'„Ç¢„É≥„É¢„Éã„Ç¢ÔºàppmÔºâ',env_wind:'È¢®ÈÄüÔºàkm/hÔºâ',env_thi:'THIÊåáÊï∞',env_manual:'ÊâãÂãïÂÖ•Âäõ',env_history:'Â±•Ê≠¥',env_iot:'IoT„É©„Ç§„Éñ',
pwa_install:'„Ç¢„Éó„É™„Çí„Ç§„É≥„Çπ„Éà„Éº„É´',pwa_offline:'„Ç™„Éï„É©„Ç§„É≥„É¢„Éº„ÉâÂà©Áî®ÂèØËÉΩ',
cfg_owm_key:'OpenWeatherMap API„Ç≠„Éº',cfg_mqtt:'MQTTË®≠ÂÆö',cfg_geo:'‰ΩçÁΩÆÊÉÖÂ†±',
flock_housing:'È£ºËÇ≤ÂΩ¢ÊÖã',flock_housing_floor:'Âπ≥È£º„ÅÑ',flock_housing_cage:'„Ç±„Éº„Ç∏',flock_housing_free:'Êîæ„ÅóÈ£º„ÅÑ',flock_target_curve:'ÁõÆÊ®ôÊõ≤Á∑ö',flock_egg_color:'ÂçµÊÆªËâ≤',
ana_predictions:'‰∫àÊ∏¨',
per_day:'Êó•„ÅÇ„Åü„Çä',actual:'ÂÆüÁ∏æ',expected:'‰∫àÊ∏¨',not_available:'Âà©Áî®‰∏çÂèØ',
nav_biosecurity:'„Éê„Ç§„Ç™„Çª„Ç≠„É•„É™„ÉÜ„Ç£',bio_title:'„Éê„Ç§„Ç™„Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÉªÂÆ≥Ëô´ÁÆ°ÁêÜ',bio_visitors:'Êù•Ë®™ËÄÖ',bio_zones:'„Çæ„Éº„É≥',bio_pests:'ÂÆ≥Ëô´',bio_protocols:'„Éó„É≠„Éà„Ç≥„É´',
bio_add_visitor:'Êñ∞Ë¶èÊù•Ë®™ËÄÖ',bio_visitor_name:'ÂêçÂâç',bio_visitor_company:'‰ºöÁ§æÂêç',bio_visitor_purpose:'ÁõÆÁöÑ',bio_visitor_zone:'„Çæ„Éº„É≥',bio_visitor_plate:'Ëªä‰∏°„Éä„É≥„Éê„Éº',bio_visitor_disinfected:'Ê∂àÊØíÊ∏à„Åø',bio_visitor_from_farm:'Âá∫Áô∫ÂÖÉËæ≤Â†¥',bio_visitor_from_health:'Âá∫Áô∫ÂÖÉËæ≤Â†¥„ÅÆÂÅ•Â∫∑Áä∂ÊÖã',bio_cross_risk:'‚ö†Ô∏è ‰∫§Â∑ÆÊ±öÊüì„É™„Çπ„ÇØ',
bio_add_zone:'Êñ∞Ë¶è„Çæ„Éº„É≥',bio_zone_name:'„Çæ„Éº„É≥Âêç',bio_zone_risk:'„É™„Çπ„ÇØ„É¨„Éô„É´',bio_zone_last_disinfection:'ÊúÄÁµÇÊ∂àÊØíÊó•',bio_zone_frequency:'È†ªÂ∫¶ÔºàÊó•Ôºâ',bio_risk_green:'„Ç∞„É™„Éº„É≥',bio_risk_yellow:'„Ç§„Ç®„É≠„Éº',bio_risk_red:'„É¨„ÉÉ„Éâ',
bio_add_pest:'Êñ∞Ë¶èÁõÆÊíÉ',bio_pest_type:'Á®ÆÈ°û',bio_pest_rodent:'„Åí„Å£Ê≠ØÈ°û',bio_pest_fly:'„Éè„Ç®',bio_pest_wild_bird:'ÈáéÈ≥•',bio_pest_other:'„Åù„ÅÆ‰ªñ',bio_pest_location:'Â†¥ÊâÄ',bio_pest_severity:'Ê∑±ÂàªÂ∫¶',bio_pest_action:'ÂØæÂá¶ÂÜÖÂÆπ',bio_pest_resolved:'Ëß£Ê±∫Ê∏à„Åø',
bio_add_protocol:'Êñ∞Ë¶è„Éó„É≠„Éà„Ç≥„É´',bio_protocol_name:'„Éó„É≠„Éà„Ç≥„É´Âêç',bio_protocol_frequency:'È†ªÂ∫¶',bio_protocol_daily:'ÊØéÊó•',bio_protocol_weekly:'ÊØéÈÄ±',bio_protocol_monthly:'ÊØéÊúà',bio_protocol_last:'ÊúÄÁµÇÂÆüÊñΩÊó•',bio_protocol_items:'„Éó„É≠„Éà„Ç≥„É´È†ÖÁõÆ',bio_protocol_complete:'ÂÆå‰∫Ü',bio_protocol_overdue:'ÊúüÈôêË∂ÖÈÅé',
bio_pest_score:'ÂÆ≥Ëô´„Çπ„Ç≥„Ç¢',bio_overdue_disinfection:'Ê∂àÊØíÊúüÈôêË∂ÖÈÅé',bio_unresolved_pests:'Êú™Ëß£Ê±∫„ÅÆÂÆ≥Ëô´ÂïèÈ°å',
alert_bio_disinfection:'„Çæ„Éº„É≥Ê∂àÊØíÊúüÈôêË∂ÖÈÅé',alert_bio_pests:'Êú™Ëß£Ê±∫„ÅÆÂÆ≥Ëô´ÂïèÈ°å',alert_bio_cross:'‰∫§Â∑ÆÊ±öÊüì„É™„Çπ„ÇØ',
nav_traceability:'„Éà„É¨„Éº„Çµ„Éì„É™„ÉÜ„Ç£',trace_title:'Âçµ„ÅÆ„Éà„É¨„Éº„Çµ„Éì„É™„ÉÜ„Ç£',trace_add:'Êñ∞Ë¶è„É≠„ÉÉ„Éà',trace_batch_id:'„É≠„ÉÉ„ÉàID',trace_rack:'„É©„ÉÉ„ÇØ',trace_box_count:'ÁÆ±Êï∞',trace_eggs_per_box:'ÂçµÊï∞/ÁÆ±',trace_qr:'QR„Ç≥„Éº„Éâ',trace_delivery:'Âá∫Ëç∑Êó•',trace_search:'ID/QR„ÅßÊ§úÁ¥¢',trace_origin:'Áî£Âú∞',trace_house:'È∂èËàé',
nav_planning:'Ë®àÁîª',plan_title:'ÁîüÁî£Ë®àÁîª',plan_add:'Êñ∞Ë¶èË®àÁîª',plan_name:'Ë®àÁîªÂêç',plan_target_date:'ÁõÆÊ®ôÊó•',plan_eggs_needed:'ÂøÖË¶ÅÂçµÊï∞',plan_allocations:'È∂èÁæ§ÈÖçÂàÜ',plan_expected:'‰∫àÊÉ≥ÁîüÁî£Èáè',plan_gap:'Â∑ÆÁï∞',plan_on_track:'È†ÜË™ø',plan_behind:'ÈÅÖÂª∂',plan_ahead:'ÂâçÂÄí„Åó',plan_estimate:'Ë¶ãÁ©ç„Çä',plan_commitment:'„Ç≥„Éü„ÉÉ„Éà„É°„É≥„Éà',
prod_egg_type:'Âçµ„ÅÆÁ®ÆÈ°û',prod_type_conventional:'ÊÖ£Ë°åÈ£ºËÇ≤',prod_type_free_range:'„Éï„É™„Éº„É¨„É≥„Ç∏',prod_type_organic:'ÊúâÊ©ü',prod_type_pasture:'ÊîæÁâß',prod_type_decorative:'Ë£ÖÈ£æÁî®',
prod_market:'Ë≤©Â£≤„ÉÅ„É£„Éç„É´',prod_market_wholesale:'Âç∏Â£≤',prod_market_supermarket:'„Çπ„Éº„Éë„Éº„Éû„Éº„Ç±„ÉÉ„Éà',prod_market_restaurant:'„É¨„Çπ„Éà„É©„É≥',prod_market_direct:'Áõ¥Â£≤',prod_market_export:'Ëº∏Âá∫',prod_market_pasteurized:'Âä†Â∑•ÔºàÊÆ∫ËèåÔºâ',
ana_by_segment:'„Çª„Ç∞„É°„É≥„ÉàÂà•ÂèéÁõäÊÄß',ana_by_type:'Á®ÆÈ°ûÂà•',ana_by_channel:'„ÉÅ„É£„Éç„É´Âà•',
nav_campo_mode:'„Éï„Ç£„Éº„É´„Éâ„É¢„Éº„Éâ',nav_vet_mode:'Áç£Âåª„É¢„Éº„Éâ',campo_today:'Êú¨Êó•',campo_quick_entry:'„ÇØ„Ç§„ÉÉ„ÇØÂÖ•Âäõ',vet_visit:'Ë®™ÂïèÂÆå‰∫Ü',vet_vaccines:'„ÉØ„ÇØ„ÉÅ„É≥Êé•Á®ÆÊ∏à„Åø',vet_pending:'Á¢∫Ë™çÂæÖ„Å°',vet_select_farm:'Ëæ≤Â†¥„ÉªÈ∂èÁæ§„ÇíÈÅ∏Êäû',
cfg_font_size:'ÊñáÂ≠ó„Çµ„Ç§„Ç∫',cfg_font_small:'Â∞è',cfg_font_normal:'Ê®ôÊ∫ñ',cfg_font_large:'Â§ß',cfg_font_xlarge:'ÁâπÂ§ß',cfg_dark_mode:'„ÉÄ„Éº„ÇØ„É¢„Éº„Éâ',cfg_theme_dark:'„ÉÄ„Éº„ÇØ',
pred_outbreak_risk:'ÁñæÁóÖÁô∫Áîü„É™„Çπ„ÇØ',pred_outbreak_high:'È´ò„É™„Çπ„ÇØ',pred_outbreak_medium:'‰∏≠„É™„Çπ„ÇØ',pred_outbreak_low:'‰Ωé„É™„Çπ„ÇØ',pred_outbreak_factor:'Ë¶ÅÂõ†',pred_outbreak_weight:'Èáç„Åø',pred_outbreak_value:'ÂÄ§',pred_probability:'Á¢∫Áéá',pred_factors:'Ë¶ÅÂõ†',pred_recommendations:'Êé®Â•®‰∫ãÈ†Ö',pred_confidence:'‰ø°È†ºÂ∫¶',pred_forecast_7d:'7Êó•Èñì',pred_forecast_14d:'14Êó•Èñì',pred_ensemble:'„Ç¢„É≥„Çµ„É≥„Éñ„É´‰∫àÊ∏¨',pred_forecast_upper:'‰∏äÈôê„Éê„É≥„Éâ',pred_forecast_lower:'‰∏ãÈôê„Éê„É≥„Éâ',
ana_segment_profit:'„Çª„Ç∞„É°„É≥„ÉàÂà•ÂèéÁõäÊÄß',cfg_accessibility:'„Ç¢„ÇØ„Çª„Ç∑„Éì„É™„ÉÜ„Ç£',
rec_title:'Êé®Â•®‰∫ãÈ†Ö',rec_dismiss:'ÈùûË°®Á§∫„Å´„Åô„Çã',rec_check_diet:'È£ºÊñôË®≠Ë®à„ÇíÁ¢∫Ë™ç„ÉªÁñæÁóÖ„ÅÆÂèØËÉΩÊÄß„ÇíÈô§Â§ñ',rec_check_env:'Áí∞Â¢É„ÉªÁñæÁóÖ„Éª„Çπ„Éà„É¨„Çπ„ÇíÁõ¥„Å°„Å´Á¢∫Ë™ç',rec_below_curve:'Ê®ôÊ∫ñÁî£ÂçµÊõ≤Á∑ö„Çí‰∏ãÂõû„Å£„Å¶„ÅÑ„Åæ„Åô ‚Äî „Çπ„Éà„É¨„Çπ„ÉªÁÖßÊòé„ÉªÈ£ºÊñô„ÇíÁ¢∫Ë™ç',rec_buy_feed:'È£ºÊñô„ÅÆË≥ºÂÖ•„ÇíË®àÁîª„Åó„Å¶„Åè„Å†„Åï„ÅÑ',rec_record_env:'Áí∞Â¢ÉÊù°‰ª∂„ÇíË®òÈå≤„Åó„Å¶„Åè„Å†„Åï„ÅÑ',rec_disinfect:'„Çæ„Éº„É≥„ÅÆÊ∂àÊØí„Éó„É≠„Éà„Ç≥„É´„ÇíÂÆüÊñΩ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',rec_heat_plan:'Èï∑ÊúüÈñì„ÅÆÁÜ±„Çπ„Éà„É¨„Çπ ‚Äî ÂÜ∑Âç¥Ë®àÁîª„ÇíÂÆüÊñΩ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',rec_lab_samples:'Ê§ú‰Ωì„ÇíÊ§úÊüªÊ©üÈñ¢„Å´ÊèêÂá∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ',rec_ventilation:'ÊèõÊ∞ó„ÇíÂº∑Âåñ„Åó„ÄÅÊñ∞ÈÆÆ„Å™È£≤Ê∞¥„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ'
},
zh:{
save:'‰øùÂ≠ò',cancel:'ÂèñÊ∂à',delete:'Âà†Èô§',edit:'ÁºñËæë',add:'Ê∑ªÂä†',close:'ÂÖ≥Èó≠',actions:'Êìç‰Ωú',date:'Êó•Êúü',notes:'Â§áÊ≥®',name:'ÂêçÁß∞',phone:'ÁîµËØù',email:'ÈÇÆÁÆ±',address:'Âú∞ÂùÄ',confirm_delete:'Á°ÆÂÆöÂà†Èô§Ê≠§ËÆ∞ÂΩïÔºü',no_data:'ÊöÇÊó†Êï∞ÊçÆ',total:'ÂêàËÆ°',all:'ÂÖ®ÈÉ®',loading:'Âä†ËΩΩ‰∏≠',search:'ÊêúÁ¥¢',from:'‰ªé',to:'Ëá≥',status:'Áä∂ÊÄÅ',export_csv:'ÂØºÂá∫CSV',today:'‰ªäÂ§©',active:'Ê¥ªË∑É',inactive:'ÂÅúÁî®',
nav_dashboard:'‰ª™Ë°®Áõò',nav_production:'‰∫ßËõã',nav_flocks:'È∏°Áæ§',nav_health:'ÂÅ•Â∫∑',nav_feed:'È•≤Êñô',nav_clients:'ÂÆ¢Êà∑',nav_finances:'Ë¥¢Âä°',nav_analysis:'ÂàÜÊûê',nav_operations:'ËøêËê•',nav_environment:'ÁéØÂ¢É',nav_config:'ËÆæÁΩÆ',
dash_title:'‰∏ª‰ª™Ë°®Áõò',kpi_today:'‰ªäÊó•‰∫ßÈáè',kpi_henday:'‰∫ßËõãÁéá',kpi_fcr:'È•≤ÊñôËΩ¨ÂåñÁéá(FCR)',kpi_mortality:'Ê≠ª‰∫°Áéá',kpi_cost_egg:'ÂçïËõãÊàêÊú¨',kpi_income_net:'ÂáÄÊî∂ÂÖ•',kpi_alerts:'Ë≠¶Êä•',kpi_active_hens:'Âú®‰∫ßÊØçÈ∏°',kpi_active_flocks:'Ê¥ªË∑ÉÈ∏°Áæ§',dash_alerts:'Ë≠¶Êä•',dash_trend:'30Â§©Ë∂ãÂäø',dash_no_alerts:'Êó†Ë≠¶Êä•',dash_snapshot:'‰øùÂ≠òKPIÂø´ÁÖß',dash_kpi_history:'KPIÂéÜÂè≤',
alert_vaccine_overdue:'Áñ´ËãóÂ∑≤ËøáÊúü',alert_vaccine_soon:'Áñ´ËãóÂç≥Â∞ÜÂà∞Êúü',alert_low_feed:'È•≤ÊñôÂ∫ìÂ≠ò‰∏çË∂≥',alert_high_mortality:'Ê≠ª‰∫°ÁéáÂÅèÈ´ò',alert_active_outbreak:'Áñ´ÊÉÖËøõË°å‰∏≠',alert_withdrawal:'‰ºëËçØÊúüËøõË°å‰∏≠',
flock_title:'È∏°Áæ§ÁÆ°ÁêÜ',flock_add:'Êñ∞Âª∫È∏°Áæ§',flock_name:'ÂêçÁß∞',flock_breed:'ÂìÅÁßç',flock_count:'ÂàùÂßãÊï∞Èáè',flock_birthdate:'Âá∫ÁîüÊó•Êúü',flock_purchase_date:'Ë¥≠ÂÖ•Êó•Êúü',flock_supplier:'‰æõÂ∫îÂïÜ',flock_cost:'ÊÄªÊàêÊú¨',flock_status:'Áä∂ÊÄÅ',flock_notes:'Â§áÊ≥®',flock_age:'Êó•ÈæÑ',flock_health:'ÂÅ•Â∫∑',flock_weeks:'Âë®',flock_days:'Â§©',flock_current:'ÂΩìÂâç',flock_status_cria:'ËÇ≤ÈõèÊúü',flock_status_recria:'ËÇ≤ÊàêÊúü',flock_status_produccion:'‰∫ßËõãÊúü',flock_status_descarte:'Ê∑òÊ±∞',flock_edit:'ÁºñËæëÈ∏°Áæ§',flock_lifecycle:'ÁîüÂëΩÂë®Êúü',flock_roadmap:'ÂèëÂ±ïËßÑÂàí',
lc_pollito:'ÈõèÈ∏°',lc_cria:'ËÇ≤ÈõèÊúü',lc_recria:'ËÇ≤ÊàêÊúü',lc_prepostura:'È¢Ñ‰∫ßÊúü',lc_pico:'‰∫ßËõãÈ´òÂ≥∞Êúü',lc_media:'‰∫ßËõã‰∏≠Êúü',lc_baja:'‰∫ßËõãÂêéÊúü',lc_descarte:'Ê∑òÊ±∞',lc_feed:'È•≤Êñô',lc_temp:'Ê∏©Â∫¶',lc_weeks:'Âë®ÈæÑ',lc_milestone:'ÈáåÁ®ãÁ¢ë',lc_current_stage:'ÂΩìÂâçÈò∂ÊÆµ',
prod_title:'‰∫ßËõãËÆ∞ÂΩï',prod_add:'Êñ∞Âª∫ËÆ∞ÂΩï',prod_flock:'È∏°Áæ§',prod_eggs:'Êî∂ËõãÊï∞',prod_broken:'Á†¥Êçü/Ê¨°ÂìÅ',prod_size_s:'Â∞èÂè∑(S)',prod_size_m:'‰∏≠Âè∑(M)',prod_size_l:'Â§ßÂè∑(L)',prod_size_xl:'ÁâπÂ§ßÂè∑(XL)',prod_size_jumbo:'Â∑®Âûã',prod_shell:'ËõãÂ£≥È¢úËâ≤',prod_yolk:'ËõãÈªÑÂìÅË¥®(1-10)',prod_deaths:'Ê≠ª‰∫°Êï∞',prod_death_cause:'Ê≠ªÂõ†',prod_date:'Êó•Êúü',
san_title:'ÂÅ•Â∫∑ÁÆ°ÁêÜ',san_vaccines:'Áñ´Ëãó',san_medications:'ËçØÁâ©',san_outbreaks:'Áñ´ÊÉÖ',
vac_title:'ÂÖçÁñ´ËÆ°Âàí',vac_add:'ËÆ∞ÂΩïÁñ´Ëãó',vac_vaccine:'Áñ´Ëãó',vac_scheduled:'ËÆ°ÂàíÊó∂Èó¥',vac_applied:'Êé•ÁßçÊó∂Èó¥',vac_batch:'ÊâπÂè∑',vac_route:'Êé•ÁßçÈÄîÂæÑ',vac_overdue:'Â∑≤ËøáÊúü',vac_upcoming:'Âç≥Â∞ÜÂà∞Êúü',vac_applied_status:'Â∑≤Êé•Áßç',vac_pending:'ÂæÖÊé•Áßç',vac_generate:'ÁîüÊàêÊó•ÂéÜ',vac_mark_applied:'Ê†áËÆ∞Â∑≤Êé•Áßç',
med_title:'ËçØÁâ©ÁÆ°ÁêÜ',med_add:'ËÆ∞ÂΩïÁî®ËçØ',med_name:'ËçØÁâ©ÂêçÁß∞',med_reason:'Áî®ËçØÂéüÂõ†',med_start:'ÂºÄÂßã',med_end:'ÁªìÊùü',med_withdrawal:'‰ºëËçØÂ§©Êï∞',med_withdrawal_end:'‰ºëËçØÁªìÊùü',med_dosage:'ÂâÇÈáè',med_in_withdrawal:'‰ºëËçØÊúü‰∏≠',
out_title:'Áñ´ÊÉÖÁÆ°ÁêÜ',out_add:'ËÆ∞ÂΩïÁñ´ÊÉÖ',out_disease:'ÁñæÁóÖ',out_start:'ÂºÄÂßã',out_end:'ÁªìÊùü',out_affected:'ÊÑüÊüìÊï∞',out_deaths:'Ê≠ª‰∫°Êï∞',out_symptoms:'ÁóáÁä∂',out_treatment:'Ê≤ªÁñó',out_loss:'ÁªèÊµéÊçüÂ§±',out_active:'ËøõË°å‰∏≠',out_controlled:'Â∑≤ÊéßÂà∂',out_resolved:'Â∑≤Ëß£ÂÜ≥',
feed_title:'È•≤ÊñôÁÆ°ÁêÜ',feed_purchases:'ÈááË¥≠',feed_consumption:'Ê∂àËÄó',feed_stock:'ÂΩìÂâçÂ∫ìÂ≠ò',feed_add_purchase:'Êñ∞Âª∫ÈááË¥≠',feed_add_consumption:'ËÆ∞ÂΩïÊ∂àËÄó',feed_type:'Á±ªÂûã',feed_qty:'Êï∞Èáè(kg)',feed_cost:'Ë¥πÁî®',feed_supplier:'‰æõÂ∫îÂïÜ',feed_flock:'È∏°Áæ§',feed_low_alert:'Â∫ìÂ≠ò‰∏çË∂≥',
cli_title:'ÂÆ¢Êà∑',cli_add:'Êñ∞Âª∫ÂÆ¢Êà∑',cli_route:'Á∫øË∑Ø/Âå∫Âüü',cli_price:'ÂçèËÆÆ‰ª∑Ê†º',cli_total:'ÂÆ¢Êà∑ÊÄªÊï∞',
fin_title:'Ë¥¢Âä°',fin_income:'Êî∂ÂÖ•',fin_expenses:'ÊîØÂá∫',fin_receivables:'Â∫îÊî∂Ê¨æ',fin_summary:'Ê±áÊÄª',fin_add_income:'Êñ∞Âª∫Êî∂ÂÖ•',fin_add_expense:'Êñ∞Âª∫ÊîØÂá∫',fin_add_receivable:'Êñ∞Âª∫Â∫îÊî∂Ê¨æ',fin_type:'Á±ªÂûã',fin_qty:'Êï∞Èáè',fin_unit_price:'Âçï‰ª∑',fin_client:'ÂÆ¢Êà∑',fin_category:'Á±ªÂà´',fin_description:'ÊèèËø∞',fin_amount:'ÈáëÈ¢ù',fin_due_date:'Âà∞ÊúüÊó•',fin_paid:'Â∑≤‰ªò',fin_total_income:'ÊÄªÊî∂ÂÖ•',fin_total_expenses:'ÊÄªÊîØÂá∫',fin_net:'ÂáÄÂà©Ê∂¶',fin_cost_per_egg:'ÂçïËõãÊàêÊú¨',fin_break_even:'Áõà‰∫èÂπ≥Ë°°ÁÇπ',fin_month:'Êúà‰ªΩ',
fin_cat_feed:'È•≤Êñô',fin_cat_vaccines:'Áñ´Ëãó/ËçØÁâ©',fin_cat_transport:'ËøêËæì',fin_cat_labor:'‰∫∫Â∑•',fin_cat_infrastructure:'Âü∫Á°ÄËÆæÊñΩ',fin_cat_other:'ÂÖ∂‰ªñ',
fin_type_eggs:'È∏°ËõãÈîÄÂîÆ',fin_type_birds:'Ê¥ªÁ¶ΩÈîÄÂîÆ',fin_type_manure:'È∏°Á≤™ÈîÄÂîÆ',fin_type_other:'ÂÖ∂‰ªñ',
ana_title:'ÂàÜÊûê',ana_comparison:'È∏°Áæ§ÂØπÊØî',ana_seasonality:'Â≠£ËäÇÊÄßÂàÜÊûê',ana_profitability:'ÁõàÂà©ÂàÜÊûê',ana_benchmarks:'Âü∫ÂáÜÊåáÊ†á',ana_best_flock:'ÊúÄ‰Ω≥È∏°Áæ§',ana_worst_flock:'ÊúÄÂ∑ÆÈ∏°Áæ§',ana_avg_production:'Âπ≥Âùá‰∫ßÈáè',ana_trend:'Ë∂ãÂäø',ana_kpi_evolution:'KPIÊºîÂèò',ana_no_snapshots:'ÊöÇÊó†Âø´ÁÖß„ÄÇËØ∑Âú®‰ª™Ë°®Áõò‰∏≠‰øùÂ≠òÂø´ÁÖß„ÄÇ',
ops_title:'ËøêËê•ÁÆ°ÁêÜ',ops_checklist:'ÊØèÊó•Ê£ÄÊü•Ë°®',ops_logbook:'Êó•Âøó',ops_personnel:'‰∫∫Âëò',ops_task:'‰ªªÂä°',ops_done:'Â∑≤ÂÆåÊàê',ops_add_task:'Ê∑ªÂä†‰ªªÂä°',ops_check_date:'Êó•Êúü',ops_log_entry:'Êù°ÁõÆ',ops_log_category:'Á±ªÂà´',ops_log_add:'Êñ∞Âª∫Êù°ÁõÆ',
ops_log_cat_general:'ÁªºÂêà',ops_log_cat_health:'ÂÅ•Â∫∑',ops_log_cat_production:'‰∫ßËõã',ops_log_cat_maintenance:'Áª¥Êä§',ops_log_cat_observation:'ËßÇÂØü',
ops_per_name:'ÂßìÂêç',ops_per_role:'ËÅåÂä°',ops_per_salary:'Ëñ™ËµÑ',ops_per_start:'ÂÖ•ËÅåÊó•Êúü',ops_per_active:'Âú®ËÅå',ops_per_add:'Ê∑ªÂä†‰∫∫Âëò',
env_title:'ÁéØÂ¢ÉÊù°‰ª∂',env_add:'Êñ∞Âª∫ËÆ∞ÂΩï',env_temp:'Ê∏©Â∫¶(¬∞C)',env_humidity:'ÊπøÂ∫¶(%)',env_light:'ÂÖâÁÖßÊó∂Êï∞',env_ventilation:'ÈÄöÈ£é',env_density:'È•≤ÂÖªÂØÜÂ∫¶(Âè™/m¬≤)',env_optimal:'ÊúÄ‰Ω≥ËåÉÂõ¥',env_temp_range:'18-24¬∞C',env_humidity_range:'40-70%',env_light_range:'14-16Â∞èÊó∂',env_density_range:'4-5Âè™/m¬≤',
cfg_title:'ËÆæÁΩÆ',cfg_farm:'ÂÖªÊÆñÂú∫‰ø°ÊÅØ',cfg_farm_name:'ÂÖªÊÆñÂú∫ÂêçÁß∞',cfg_location:'‰ΩçÁΩÆ',cfg_capacity:'ÂÆπÈáè(Âè™)',cfg_currency:'Ë¥ßÂ∏Å',cfg_alerts:'Ë≠¶Êä•ÈòàÂÄº',cfg_min_feed:'ÊúÄ‰ΩéÈ•≤ÊñôÂ∫ìÂ≠ò(kg)',cfg_max_mortality:'ÊúÄÈ´òÊ≠ª‰∫°Áéá(%)',cfg_alert_days:'ÊèêÂâçÈ¢ÑË≠¶Â§©Êï∞',cfg_data:'Êï∞ÊçÆ',cfg_export:'ÂØºÂá∫(JSON)',cfg_import:'ÂØºÂÖ•(JSON)',cfg_reset:'Âà†Èô§ÂÖ®ÈÉ®',cfg_reset_confirm:'Á°ÆÂÆöÊ∞∏‰πÖÂà†Èô§ÊâÄÊúâÊï∞ÊçÆÔºü',cfg_saved:'Â∑≤‰øùÂ≠ò',cfg_exported:'Êï∞ÊçÆÂ∑≤ÂØºÂá∫',cfg_imported:'Êï∞ÊçÆÂ∑≤ÂØºÂÖ•',cfg_reset_done:'Êï∞ÊçÆÂ∑≤Âà†Èô§',cfg_checklist:'ÈªòËÆ§Ê£ÄÊü•Ë°®',cfg_checklist_items:'ÊØèÊó•Ê£ÄÊü•‰ªªÂä°',cfg_theme:'È¢úËâ≤‰∏ªÈ¢ò',cfg_theme_blue:'ËóèËìùËâ≤',cfg_theme_green:'ÁªøËâ≤',cfg_theme_purple:'Á¥´Ëâ≤',cfg_theme_black:'ÈªëËâ≤',
sidebar_subtitle:'ÂÆ∂Á¶ΩÁÆ°ÁêÜÁ≥ªÁªü360¬∞',prod_shell_white:'ÁôΩËâ≤',prod_shell_brown:'Ë§êËâ≤',prod_shell_cream:'Á±≥Ëâ≤',required:'ÂøÖÂ°´È°π',no_flocks_birthdate:'Êó†Âá∫ÁîüÊó•ÊúüÁöÑÈ∏°Áæ§',vac_select_flocks:'ÈÄâÊã©È∏°Áæ§‰ª•ÁîüÊàêÊó•ÂéÜÔºö',feed_type_placeholder:'ËõãÈ∏°Êñô„ÄÅÈõèÈ∏°ÊñôÁ≠â',avg_per_day:'Êó•Âùá',per_flock:'È∏°Áæ§',history:'ÂéÜÂè≤',env_latest_reading:'ÊúÄÊñ∞ËØªÊï∞',env_ok:'Ê≠£Â∏∏',env_out_of_range:'Ë∂ÖÂá∫ËåÉÂõ¥',data_stats:'Êï∞ÊçÆÁªüËÆ°',final_warning:'‚ö†Ô∏è ÊúÄÁªàË≠¶Âëä - ÊâÄÊúâÊï∞ÊçÆÂ∞ÜË¢´Âà†Èô§',total_salaries:'Â∑•ËµÑÊÄªÈ¢ù',eggs_unit:'Êûö',csv_income:'Êî∂ÂÖ•',csv_expense:'ÊîØÂá∫',fcr_unit:'ÂÖ¨Êñ§È•≤Êñô/ÂÖ¨Êñ§Ëõã',lc_feed_starter:'ÈõèÈ∏°Êñô',lc_feed_grower:'ËÇ≤ÊàêÊñô',lc_feed_developer:'ÂèëËÇ≤Êñô',lc_feed_prelay:'È¢Ñ‰∫ßÊñô',lc_feed_layer:'ËõãÈ∏°Êñô',lc_feed_lowlay:'ÂêéÊúüÊñô',lc_prod_label:'‰∫ßËõã',lc_prod_first:'Âàù‰∫ßËõã',lc_mile_1:'È©¨Á´ãÂÖã„ÄÅÊñ∞ÂüéÁñ´+‰º†ÊîØ„ÄÅÊ≥ïÊ∞èÂõäÁñ´Ëãó',lc_mile_2:'Êñ∞ÂüéÁñ´Âä†Âº∫ÂÖçÁñ´„ÄÅÁæΩÊØõÂèëËÇ≤',lc_mile_3:'È∏°Áóò„ÄÅÁ¶ΩËÑëËÑäÈ´ìÁÇé„ÄÅ‰º†ÊüìÊÄßÈºªÁÇé„ÄÅÊ≤ôÈó®Ê∞èËèå',lc_mile_4:'Êñ∞ÂüéÁñ´+‰º†ÊîØÂä†Âº∫ÂÖçÁñ´„ÄÅÊç¢Êñô„ÄÅ16Â∞èÊó∂ÂÖâÁÖß',lc_mile_5:'‰∫ßËõãÈ´òÂ≥∞ÊúüÁ¨¨26-30Âë®ÔºåÁõëÊéßFCR',lc_mile_6:'ÊØè8-12Âë®Âä†Âº∫Êñ∞ÂüéÁñ´ÂÖçÁñ´ÔºåËØÑ‰º∞ÁõàÂà©ËÉΩÂäõ',lc_mile_7:'ËØÑ‰º∞Ê∑òÊ±∞ÊàñÂº∫Âà∂Êç¢ÁæΩ',lc_mile_8:'Âá∫ÂîÆÊ∑òÊ±∞È∏°„ÄÅÊ∏ÖÊ¥ÅÈ∏°Ëàç',vac_route_injection:'Ê≥®Â∞Ñ',vac_route_ocular:'ÁÇπÁúº/Âñ∑Èõæ',vac_route_water:'È•ÆÊ∞¥',vac_route_wing:'ÁøÖËÜÄÂà∫Áßç',snapshots:'Âø´ÁÖß',error_prefix:'ÈîôËØØ',chk_collect_eggs:'Êç°Ëõã',chk_feed_birds:'ÂñÇÊñô',chk_check_water:'Ê£ÄÊü•È•ÆÊ∞¥',chk_check_health:'Ê£ÄÊü•ÂÅ•Â∫∑',chk_cleaning:'Ê∏ÖÊ¥Å',chk_record_temp:'ËÆ∞ÂΩïÊ∏©Â∫¶',
weather_title:'Â§©Ê∞î',weather_temp:'Ê∏©Â∫¶',weather_humidity:'ÊπøÂ∫¶',weather_wind:'È£éÂäõ',weather_forecast:'3Â§©È¢ÑÊä•',weather_no_key:'ËØ∑Âú®ËÆæÁΩÆ‰∏≠ÈÖçÁΩÆOpenWeatherMap APIÂØÜÈí•',weather_heat_alert:'ÁÉ≠Â∫îÊøÄË≠¶Êä•',weather_thi:'THIÊåáÊï∞',weather_feels:'‰ΩìÊÑüÊ∏©Â∫¶',weather_last_update:'ÊúÄÂêéÊõ¥Êñ∞',weather_test:'ÊµãËØï',
geo_set_location:'ÂÖªÊÆñÂú∫‰ΩçÁΩÆ',geo_use_gps:'‰ΩøÁî®GPSÂÆö‰Ωç',geo_click_map:'ÁÇπÂáªÂú∞ÂõæËÆæÁΩÆ‰ΩçÁΩÆ',geo_lat:'Á∫¨Â∫¶',geo_lng:'ÁªèÂ∫¶',geo_saved:'‰ΩçÁΩÆÂ∑≤‰øùÂ≠ò',
iot_title:'IoT‰º†ÊÑüÂô®',iot_broker:'MQTTÊúçÂä°Âô®(wss://)',iot_user:'MQTTÁî®Êà∑Âêç',iot_pass:'MQTTÂØÜÁ†Å',iot_topic:'‰∏ªÈ¢òÂâçÁºÄ',iot_connect:'ËøûÊé•',iot_disconnect:'Êñ≠ÂºÄ',iot_live:'IoTÂÆûÊó∂',iot_no_config:'ËØ∑Âú®ËÆæÁΩÆ‰∏≠ÈÖçÁΩÆMQTT',iot_save_reading:'‰øùÂ≠òÂΩìÂâçËØªÊï∞',iot_connected:'Â∑≤ËøûÊé•',iot_disconnected:'Â∑≤Êñ≠ÂºÄ',iot_ammonia:'Ê∞®Ê∞î',iot_light:'ÂÖâÁÖß',iot_lux:'lux',iot_ppm:'ppm',
pred_title:'È¢ÑÊµã',pred_forecast:'‰∫ßËõãÈ¢ÑÊµã',pred_anomaly:'ÂºÇÂ∏∏Ê£ÄÊµã',pred_drop_risk:'‰∏ãÈôçÈ£éÈô©',pred_breed_curve:'ÂìÅÁßçÊ†áÂáÜÊõ≤Á∫ø',pred_fcr_trend:'FCRË∂ãÂäø',pred_next_7d:'Êú™Êù•7Â§©',pred_improving:'ÊîπÂñÑ‰∏≠',pred_worsening:'ÊÅ∂Âåñ‰∏≠',pred_stable:'Á®≥ÂÆö',pred_score:'ËØÑÂàÜ',pred_low:'‰Ωé',pred_medium:'‰∏≠',pred_high:'È´ò',pred_vs_expected:'ÂÆûÈôÖ‰∏éÈ¢ÑÊúüÂØπÊØî',
stress_title:'Â∫îÊøÄ‰∫ã‰ª∂',stress_type:'Á±ªÂûã',stress_severity:'‰∏•ÈáçÁ®ãÂ∫¶',stress_heat:'ÁÉ≠Â∫îÊøÄ',stress_disease:'ÁñæÁóÖ',stress_feed_change:'Êç¢Êñô',stress_power:'ÂÅúÁîµ',stress_predator:'Â§©Êïå',stress_other:'ÂÖ∂‰ªñ',stress_description:'ÊèèËø∞',stress_add:'Êñ∞Âª∫‰∫ã‰ª∂',stress_impact:'‰∫ßËõãÂΩ±Âìç',stress_auto:'(Ëá™Âä®ÁîüÊàê)',
env_ammonia:'Ê∞®Ê∞î(ppm)',env_wind:'È£éÈÄü(km/h)',env_thi:'THIÊåáÊï∞',env_manual:'ÊâãÂä®ÂΩïÂÖ•',env_history:'ÂéÜÂè≤',env_iot:'IoTÂÆûÊó∂',
pwa_install:'ÂÆâË£ÖÂ∫îÁî®',pwa_offline:'Á¶ªÁ∫øÊ®°ÂºèÂèØÁî®',
cfg_owm_key:'OpenWeatherMap APIÂØÜÈí•',cfg_mqtt:'MQTTËÆæÁΩÆ',cfg_geo:'Âú∞ÁêÜÂÆö‰Ωç',
flock_housing:'È•≤ÂÖªÊñπÂºè',flock_housing_floor:'Âú∞Èù¢Âπ≥ÂÖª',flock_housing_cage:'Á¨ºÂÖª',flock_housing_free:'Êï£ÂÖª',flock_target_curve:'ÁõÆÊ†áÊõ≤Á∫ø',flock_egg_color:'ËõãÂ£≥È¢úËâ≤',
ana_predictions:'È¢ÑÊµã',
per_day:'ÊØèÂ§©',actual:'ÂÆûÈôÖ',expected:'È¢ÑÊúü',not_available:'ÊöÇÊó†',
nav_biosecurity:'ÁîüÁâ©ÂÆâÂÖ®',bio_title:'ÁîüÁâ©ÂÆâÂÖ®‰∏éËô´ÂÆ≥Èò≤Ê≤ª',bio_visitors:'ËÆøÂÆ¢',bio_zones:'Âå∫Âüü',bio_pests:'Ëô´ÂÆ≥',bio_protocols:'ËßÑÁ®ã',
bio_add_visitor:'Êñ∞Âª∫ËÆøÂÆ¢',bio_visitor_name:'ÂßìÂêç',bio_visitor_company:'Âçï‰Ωç',bio_visitor_purpose:'ÁõÆÁöÑ',bio_visitor_zone:'Âå∫Âüü',bio_visitor_plate:'ËΩ¶ÁâåÂè∑',bio_visitor_disinfected:'Â∑≤Ê∂àÊØí',bio_visitor_from_farm:'Êù•Ê∫êÂÖªÊÆñÂú∫',bio_visitor_from_health:'Êù•Ê∫êÂú∫ÂÅ•Â∫∑Áä∂ÂÜµ',bio_cross_risk:'‚ö†Ô∏è ‰∫§ÂèâÊ±°ÊüìÈ£éÈô©',
bio_add_zone:'Êñ∞Âª∫Âå∫Âüü',bio_zone_name:'Âå∫ÂüüÂêçÁß∞',bio_zone_risk:'È£éÈô©Á≠âÁ∫ß',bio_zone_last_disinfection:'‰∏äÊ¨°Ê∂àÊØí',bio_zone_frequency:'È¢ëÁéá(Â§©)',bio_risk_green:'ÁªøËâ≤',bio_risk_yellow:'ÈªÑËâ≤',bio_risk_red:'Á∫¢Ëâ≤',
bio_add_pest:'Êñ∞Âª∫ËÆ∞ÂΩï',bio_pest_type:'Á±ªÂûã',bio_pest_rodent:'Èº†ÂÆ≥',bio_pest_fly:'ËùáÂÆ≥',bio_pest_wild_bird:'ÈáéÈ∏ü',bio_pest_other:'ÂÖ∂‰ªñ',bio_pest_location:'‰ΩçÁΩÆ',bio_pest_severity:'‰∏•ÈáçÁ®ãÂ∫¶',bio_pest_action:'Â∑≤ÈááÂèñÊé™ÊñΩ',bio_pest_resolved:'Â∑≤Ëß£ÂÜ≥',
bio_add_protocol:'Êñ∞Âª∫ËßÑÁ®ã',bio_protocol_name:'ËßÑÁ®ãÂêçÁß∞',bio_protocol_frequency:'È¢ëÁéá',bio_protocol_daily:'ÊØèÊó•',bio_protocol_weekly:'ÊØèÂë®',bio_protocol_monthly:'ÊØèÊúà',bio_protocol_last:'‰∏äÊ¨°ÂÆåÊàê',bio_protocol_items:'ËßÑÁ®ãÈ°πÁõÆ',bio_protocol_complete:'ÂÆåÊàê',bio_protocol_overdue:'Â∑≤ÈÄæÊúü',
bio_pest_score:'Ëô´ÂÆ≥ËØÑÂàÜ',bio_overdue_disinfection:'Ê∂àÊØíÂ∑≤ÈÄæÊúü',bio_unresolved_pests:'Êú™Ëß£ÂÜ≥Ëô´ÂÆ≥',
alert_bio_disinfection:'Âå∫ÂüüÊ∂àÊØíÂ∑≤ÈÄæÊúü',alert_bio_pests:'Êú™Ëß£ÂÜ≥Ëô´ÂÆ≥',alert_bio_cross:'‰∫§ÂèâÊ±°ÊüìÈ£éÈô©',
nav_traceability:'Ê∫ØÊ∫ê',trace_title:'È∏°ËõãÊ∫ØÊ∫ê',trace_add:'Êñ∞Âª∫ÊâπÊ¨°',trace_batch_id:'ÊâπÊ¨°Âè∑',trace_rack:'ËõãÊû∂',trace_box_count:'ÁÆ±Êï∞',trace_eggs_per_box:'ÊØèÁÆ±ËõãÊï∞',trace_qr:'‰∫åÁª¥Á†Å',trace_delivery:'ÈÖçÈÄÅÊó•Êúü',trace_search:'ÊåâÊâπÊ¨°Âè∑/‰∫åÁª¥Á†ÅÊêúÁ¥¢',trace_origin:'‰∫ßÂú∞',trace_house:'È∏°Ëàç',
nav_planning:'ËÆ°Âàí',plan_title:'Áîü‰∫ßËÆ°Âàí',plan_add:'Êñ∞Âª∫ËÆ°Âàí',plan_name:'ËÆ°ÂàíÂêçÁß∞',plan_target_date:'ÁõÆÊ†áÊó•Êúü',plan_eggs_needed:'ÈúÄËõãÈáè',plan_allocations:'È∏°Áæ§ÂàÜÈÖç',plan_expected:'È¢ÑËÆ°‰∫ßÈáè',plan_gap:'Áº∫Âè£',plan_on_track:'Ê≠£Â∏∏',plan_behind:'ËêΩÂêé',plan_ahead:'Ë∂ÖÂâç',plan_estimate:'È¢Ñ‰º∞',plan_commitment:'ÊâøËØ∫Èáè',
prod_egg_type:'È∏°ËõãÁ±ªÂûã',prod_type_conventional:'Â∏∏ËßÑËõã',prod_type_free_range:'Êï£ÂÖªËõã',prod_type_organic:'ÊúâÊú∫Ëõã',prod_type_pasture:'ÁâßÂú∫Ëõã',prod_type_decorative:'ËßÇËµèËõã',
prod_market:'ÈîÄÂîÆÊ∏†ÈÅì',prod_market_wholesale:'ÊâπÂèë',prod_market_supermarket:'Ë∂ÖÂ∏Ç',prod_market_restaurant:'È§êÈ•Æ',prod_market_direct:'Áõ¥ÈîÄ',prod_market_export:'Âá∫Âè£',prod_market_pasteurized:'Â∑¥Ê∞èÊùÄËèåËõã',
ana_by_segment:'ÊåâÁªÜÂàÜÁõàÂà©ÂàÜÊûê',ana_by_type:'ÊåâÁ±ªÂûã',ana_by_channel:'ÊåâÊ∏†ÈÅì',
nav_campo_mode:'Áé∞Âú∫Ê®°Âºè',nav_vet_mode:'ÂÖΩÂåªÊ®°Âºè',campo_today:'‰ªäÊó•',campo_quick_entry:'Âø´ÈÄüÂΩïÂÖ•',vet_visit:'Â∑°Ê£ÄÂÆåÊàê',vet_vaccines:'Â∑≤Êé•ÁßçÁñ´Ëãó',vet_pending:'ÂæÖÂÆ°Ê†∏',vet_select_farm:'ÈÄâÊã©ÂÖªÊÆñÂú∫/È∏°Áæ§',
cfg_font_size:'Â≠ó‰ΩìÂ§ßÂ∞è',cfg_font_small:'Â∞è',cfg_font_normal:'Ê≠£Â∏∏',cfg_font_large:'Â§ß',cfg_font_xlarge:'ÁâπÂ§ß',cfg_dark_mode:'Ê∑±Ëâ≤Ê®°Âºè',cfg_theme_dark:'Ê∑±Ëâ≤',
pred_outbreak_risk:'Áñ´ÊÉÖÈ£éÈô©',pred_outbreak_high:'È´òÈ£éÈô©',pred_outbreak_medium:'‰∏≠È£éÈô©',pred_outbreak_low:'‰ΩéÈ£éÈô©',pred_outbreak_factor:'Âõ†Á¥†',pred_outbreak_weight:'ÊùÉÈáç',pred_outbreak_value:'Êï∞ÂÄº',pred_probability:'Ê¶ÇÁéá',pred_factors:'Âõ†Á¥†',pred_recommendations:'Âª∫ËÆÆ',pred_confidence:'ÁΩÆ‰ø°Â∫¶',pred_forecast_7d:'7Â§©',pred_forecast_14d:'14Â§©',pred_ensemble:'ÈõÜÊàêÈ¢ÑÊµã',pred_forecast_upper:'‰∏äÈôêÂ∏¶',pred_forecast_lower:'‰∏ãÈôêÂ∏¶',
ana_segment_profit:'ÊåâÁªÜÂàÜÁõàÂà©ÂàÜÊûê',cfg_accessibility:'Êó†ÈöúÁ¢ç',
rec_title:'Âª∫ËÆÆ',rec_dismiss:'ÂøΩÁï•',rec_check_diet:'Ê£ÄÊü•Êó•Á≤Æ/È•≤ÊñôÈÖçÊñπ/ÊéíÈô§ÁñæÁóÖ',rec_check_env:'Á´ãÂç≥Ê£ÄÊü•ÁéØÂ¢É/ÁñæÁóÖ/Â∫îÊøÄ',rec_below_curve:'‰Ωé‰∫éÊ†áÂáÜ‰∫ßËõãÊõ≤Á∫ø - Ê£ÄÊü•Â∫îÊøÄ„ÄÅÂÖâÁÖß„ÄÅÈ•≤Êñô',rec_buy_feed:'ÂÆâÊéíÈ•≤ÊñôÈááË¥≠',rec_record_env:'ËÆ∞ÂΩïÁéØÂ¢ÉÊù°‰ª∂',rec_disinfect:'ÊâßË°åÂå∫ÂüüÊ∂àÊØíËßÑÁ®ã',rec_heat_plan:'ÊåÅÁª≠ÁÉ≠Â∫îÊøÄ - ÂêØÂä®ÈôçÊ∏©ÊñπÊ°à',rec_lab_samples:'ÈááÈõÜÊ†∑Êú¨ÈÄÅÊ£Ä',rec_ventilation:'Âä†Âº∫ÈÄöÈ£éÔºåÊ£ÄÊü•È•ÆÊ∞¥‰æõÂ∫î'
}};

// ============ LIFECYCLE ROADMAP ============
const LIFECYCLE=[
{stage:'pollito',key:'lc_pollito',weekStart:0,weekEnd:4,color:'#FFF9C4',icon:'üê£',feed:'lc_feed_starter',temp:'32-35¬∞C',prod:'-',milestones:'lc_mile_1'},
{stage:'cria',key:'lc_cria',weekStart:4,weekEnd:8,color:'#FFECB3',icon:'üê§',feed:'lc_feed_grower',temp:'28-32¬∞C',prod:'-',milestones:'lc_mile_2'},
{stage:'recria',key:'lc_recria',weekStart:8,weekEnd:18,color:'#C8E6C9',icon:'üêî',feed:'lc_feed_developer',temp:'22-28¬∞C',prod:'-',milestones:'lc_mile_3'},
{stage:'pre_postura',key:'lc_prepostura',weekStart:18,weekEnd:20,color:'#B3E5FC',icon:'üêî',feed:'lc_feed_prelay',temp:'20-24¬∞C',prod:'lc_prod_first',milestones:'lc_mile_4'},
{stage:'postura_pico',key:'lc_pico',weekStart:20,weekEnd:42,color:'#A5D6A7',icon:'ü•ö',feed:'lc_feed_layer',temp:'18-24¬∞C',prod:'90-95%',milestones:'lc_mile_5'},
{stage:'postura_media',key:'lc_media',weekStart:42,weekEnd:62,color:'#FFCC80',icon:'ü•ö',feed:'lc_feed_layer',temp:'18-24¬∞C',prod:'80-90%',milestones:'lc_mile_6'},
{stage:'postura_baja',key:'lc_baja',weekStart:62,weekEnd:80,color:'#FFAB91',icon:'ü•ö',feed:'lc_feed_lowlay',temp:'18-24¬∞C',prod:'<80%',milestones:'lc_mile_7'},
{stage:'descarte',key:'lc_descarte',weekStart:80,weekEnd:999,color:'#BDBDBD',icon:'üì¶',feed:'-',temp:'-',prod:'-',milestones:'lc_mile_8'}
];

// ============ THEMES ============
const THEMES={
blue:{primary:'#1A3C6E','primary-light':'#4A7AB5','primary-dark':'#0E2240','sidebar-bg':'#0E2240',rgb:'26,60,110'},
green:{primary:'#2E7D32','primary-light':'#4CAF50','primary-dark':'#1B5E20','sidebar-bg':'#1B5E20',rgb:'46,125,50'},
purple:{primary:'#6A1B9A','primary-light':'#AB47BC','primary-dark':'#4A148C','sidebar-bg':'#4A148C',rgb:'106,27,154'},
black:{primary:'#37474F','primary-light':'#607D8B','primary-dark':'#263238','sidebar-bg':'#263238',rgb:'55,71,79'},
dark:{primary:'#90CAF9','primary-light':'#42A5F5','primary-dark':'#1E1E1E','sidebar-bg':'#121212',rgb:'144,202,249'}
};
function applyTheme(name){
const th=THEMES[name]||THEMES.blue;const s=document.documentElement.style;
s.setProperty('--primary',th.primary);s.setProperty('--primary-light',th['primary-light']);
s.setProperty('--primary-dark',th['primary-dark']);s.setProperty('--sidebar-bg',th['sidebar-bg']);
s.setProperty('--primary-hover','rgba('+th.rgb+',.04)');s.setProperty('--primary-ring','rgba('+th.rgb+',.15)');
s.setProperty('--primary-fill','rgba('+th.rgb+',.1)');localStorage.setItem('egglogu_theme',name);
Object.keys(CHARTS).forEach(k=>{if(CHARTS[k]){try{CHARTS[k].destroy();}catch(e){}}});CHARTS={};
}
function themeColor(v){return getComputedStyle(document.documentElement).getPropertyValue(v).trim();}
function themeRgba(a){const th=THEMES[localStorage.getItem('egglogu_theme')||'blue']||THEMES.blue;return'rgba('+th.rgb+','+a+')';}

// ============ CORE ============
let LANG=localStorage.getItem('egglogu_lang')||'es';
let DATA=null;let CHARTS={};let currentSection='dashboard';
let currentSanidadTab='vaccines';let currentFinanceTab='income';let currentOpsTab='checklist';
const $=id=>document.getElementById(id);
function t(k){return(T[LANG]&&T[LANG][k])||(T.es&&T.es[k])||k;}
function fmtNum(n,d=0){return Number(n||0).toLocaleString(locale(),{minimumFractionDigits:d,maximumFractionDigits:d});}
function fmtMoney(n){return currency()+fmtNum(n,0);}
function fmtDate(d){if(!d)return'-';return new Date(d+'T12:00:00').toLocaleDateString(locale());}
function genId(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5);}
function currency(){return(DATA||loadData()).farm.currency||'$';}
function todayStr(){return new Date().toISOString().substring(0,10);}

// ============ DATA MODEL ============
const DEFAULT_DATA={
farm:{name:'Mi Granja',location:'',capacity:500,currency:'$',lat:null,lng:null,owmApiKey:'',mqttBroker:'',mqttUser:'',mqttPass:'',mqttTopicPrefix:'egglogu/',houses:[],routes:[],suppliers:[]},
flocks:[],dailyProduction:[],vaccines:[],medications:[],outbreaks:[],
feed:{purchases:[],consumption:[]},clients:[],
finances:{income:[],expenses:[],receivables:[]},
environment:[],checklist:[],logbook:[],personnel:[],
kpiSnapshots:[],weatherCache:[],stressEvents:[],iotReadings:[],predictions:[],
biosecurity:{visitors:[],zones:[],pestSightings:[],protocols:[]},
traceability:{batches:[]},
productionPlans:[],
settings:{minFeedStock:50,maxMortality:5,alertDaysBefore:3,campoMode:false,vetMode:false,fontScale:'normal',darkMode:false,
defaultChecklist:['chk_collect_eggs','chk_feed_birds','chk_check_water','chk_check_health','chk_cleaning','chk_record_temp']}
};
// ============ COMMERCIAL BREEDS DATABASE ============
const COMMERCIAL_BREEDS=[
{id:'leghorn-blanca',name:'Leghorn Blanca',eggsYear:'280‚Äì320',eggColor:'blanco',eggWeight:'55‚Äì60g',type:'hibrida',fcr:'2.0‚Äì2.1',notes:'M√°s usada mundialmente, excelente FCR'},
{id:'isa-brown',name:'ISA Brown',eggsYear:'300‚Äì320',eggColor:'marr√≥n',eggWeight:'60‚Äì65g',type:'hibrida',fcr:'2.0‚Äì2.2',notes:'H√≠brida l√≠der global, muy d√≥cil'},
{id:'hyline-w36',name:'Hy-Line W-36',eggsYear:'300‚Äì320',eggColor:'blanco',eggWeight:'63g',type:'hibrida',fcr:'2.0‚Äì2.1',notes:'Excelente en climas c√°lidos'},
{id:'hyline-w80',name:'Hy-Line W-80',eggsYear:'290‚Äì310',eggColor:'blanco',eggWeight:'60g',type:'hibrida',fcr:'2.1‚Äì2.2',notes:'Huevo mediano, alta persistencia'},
{id:'lohmann-brown',name:'Lohmann Brown',eggsYear:'290‚Äì310',eggColor:'marr√≥n',eggWeight:'62‚Äì65g',type:'hibrida',fcr:'2.1‚Äì2.2',notes:'Muy popular en LATAM/Europa'},
{id:'hisex-brown',name:'Hisex Brown',eggsYear:'300‚Äì320',eggColor:'marr√≥n',eggWeight:'62g',type:'hibrida',fcr:'2.0‚Äì2.2',notes:'Similar a ISA, muy productiva'},
{id:'golden-comet',name:'Golden Comet',eggsYear:'280‚Äì300',eggColor:'marr√≥n',eggWeight:'60g',type:'hibrida',fcr:'2.1‚Äì2.3',notes:'H√≠brida de r√°pida producci√≥n'},
{id:'shaver-white',name:'Shaver White',eggsYear:'280‚Äì300',eggColor:'blanco',eggWeight:'60g',type:'hibrida',fcr:'2.1‚Äì2.2',notes:'Blanca eficiente, buena en calor'},
{id:'rhode-island-red',name:'Rhode Island Red',eggsYear:'250‚Äì300',eggColor:'marr√≥n',eggWeight:'60g',type:'pura',fcr:'2.3‚Äì2.5',notes:'Robusta, doble prop√≥sito'},
{id:'australorp',name:'Australorp',eggsYear:'250‚Äì280',eggColor:'marr√≥n',eggWeight:'60g',type:'pura',fcr:'2.3‚Äì2.5',notes:'Resistente, r√©cord hist√≥rico 364 huevos/a√±o'},
{id:'sussex',name:'Sussex',eggsYear:'250‚Äì280',eggColor:'crema',eggWeight:'58g',type:'pura',fcr:'2.4‚Äì2.6',notes:'Buena conversi√≥n, adaptable'},
{id:'plymouth-rock',name:'Plymouth Rock',eggsYear:'200‚Äì250',eggColor:'marr√≥n',eggWeight:'55g',type:'pura',fcr:'2.5‚Äì2.7',notes:'Familiar, huevos constantes'},
{id:'ameraucana',name:'Ameraucana',eggsYear:'200‚Äì250',eggColor:'azul',eggWeight:'55g',type:'pura',fcr:'2.5‚Äì2.7',notes:'Huevo azul, nicho premium'},
{id:'araucana',name:'Araucana',eggsYear:'180‚Äì220',eggColor:'azul-verde',eggWeight:'52g',type:'pura',fcr:'2.6‚Äì2.8',notes:'Originaria de Chile, huevo verde-azulado'},
{id:'marans',name:'Marans',eggsYear:'180‚Äì220',eggColor:'chocolate',eggWeight:'65g',type:'pura',fcr:'2.5‚Äì2.7',notes:'Huevo color chocolate oscuro, nicho gourmet'},
{id:'otra',name:'Otra / Personalizada',eggsYear:'-',eggColor:'-',eggWeight:'-',type:'-',fcr:'-',notes:'Raza no listada, usa curva gen√©rica'}
];
// ============ BREED PRODUCTION CURVES (weekly Hen-Day % from week 18 to 80) ============
const BREED_CURVES={
'leghorn-blanca':[10,36,66,86,94,96,97,97,96,96,95,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43],
'isa-brown':[9,32,62,83,92,94,95,95,94,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43],
'hyline-w36':[10,35,65,85,93,95,96,96,95,95,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42],
'hyline-w80':[9,33,63,84,92,94,95,95,94,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43],
'lohmann-brown':[8,30,60,82,91,94,95,95,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42],
'hisex-brown':[9,31,61,83,92,94,95,95,94,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43],
'golden-comet':[9,30,58,80,90,93,94,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41],
'shaver-white':[9,33,63,84,92,94,94,94,93,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42],
'rhode-island-red':[6,22,48,72,84,88,90,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37],
'australorp':[5,20,45,68,82,86,88,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35],
'sussex':[5,18,42,65,80,84,86,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33],
'plymouth-rock':[4,15,38,60,74,78,80,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27],
'ameraucana':[4,14,36,58,72,76,78,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25],
'araucana':[3,12,32,54,68,72,74,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21],
'marans':[3,12,32,52,66,70,72,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19],
'otra':[8,28,55,78,88,92,93,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40],
'generic':[8,28,55,78,88,92,93,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40]
};
// ============ CATALOGS ‚Äî "Selecciona, no escribas" ============
const CATALOGS={
feedTypes:[
{id:'inicio',name:'Inicio (0-6 sem)',protein:'20-22%',stage:'cria'},
{id:'crecimiento',name:'Crecimiento (6-12 sem)',protein:'18-19%',stage:'recria'},
{id:'desarrollo',name:'Desarrollo (12-16 sem)',protein:'15-16%',stage:'recria'},
{id:'pre-postura',name:'Pre-postura (16-18 sem)',protein:'17-18%',stage:'recria'},
{id:'postura-1',name:'Postura Fase 1 (18-45 sem)',protein:'17-18%',stage:'produccion'},
{id:'postura-2',name:'Postura Fase 2 (45-65 sem)',protein:'16-17%',stage:'produccion'},
{id:'postura-3',name:'Postura Fase 3 (65+ sem)',protein:'15-16%',stage:'produccion'},
],
deathCauses:['Enfermedad','Depredador','Golpe de calor','Asfixia','Canibalismo','Prolapso','Edad/Natural','Accidente','Desconocida'],
diseases:['Newcastle','Gumboro (IBD)','Bronquitis Infecciosa','Coccidiosis','Marek','Salmonelosis','Coriza Infecciosa','Viruela Aviar','Influenza Aviar','Micoplasmosis','Laringotraque√≠tis','Colibacilosis','Aspergilosis','Histomoniasis'],
medications:[
{name:'Enrofloxacina',type:'antibiotico',withdrawal:7},
{name:'Amoxicilina',type:'antibiotico',withdrawal:5},
{name:'Toltrazuril',type:'anticoccidial',withdrawal:14},
{name:'Ivermectina',type:'antiparasitario',withdrawal:14},
{name:'Tilosina',type:'antibiotico',withdrawal:5},
{name:'Oxitetraciclina',type:'antibiotico',withdrawal:7},
{name:'Vitamina AD3E',type:'suplemento',withdrawal:0},
{name:'Electrolitos',type:'suplemento',withdrawal:0},
],
personnelRoles:['Administrador','T√©cnico Av√≠cola','Galponero','Recolector','Veterinario','Chofer/Repartidor','Limpieza','Mantenimiento'],
visitorPurposes:['Entrega de alimento','Servicio t√©cnico','Inspecci√≥n sanitaria','Retiro de huevos','Visita veterinaria','Mantenimiento','Otro'],
ventilationLevels:['Natural','Baja','Media','Alta','T√∫nel'],
bioProtocols:['Desinfecci√≥n de galp√≥n','Pediluvio','Control de roedores','Fumigaci√≥n','Limpieza de bebederos','Limpieza de comederos','Desratizaci√≥n','Vac√≠o sanitario'],
expenseDescriptions:{
feed:['Alimento postura','Alimento cr√≠a','Suplementos','Aditivos'],
vaccines:['Vacuna Newcastle','Vacuna Gumboro','Vacuna Marek','Otra vacuna'],
transport:['Distribuci√≥n huevos','Retiro alimento','Traslado aves'],
labor:['Sueldos','Horas extra','Bonos'],
infrastructure:['Reparaci√≥n galp√≥n','Equipamiento','Nidales','Bebederos'],
other:['Servicios b√°sicos','Asesor√≠a','Varios'],
},
};
// ============ CATALOG TRANSLATIONS (WALTZ engine) ============
const CATALOG_T={
en:{
// deathCauses
'Enfermedad':'Disease','Depredador':'Predator','Golpe de calor':'Heat stroke','Asfixia':'Suffocation','Canibalismo':'Cannibalism','Prolapso':'Prolapse','Edad/Natural':'Age/Natural','Accidente':'Accident','Desconocida':'Unknown',
// diseases
'Newcastle':'Newcastle','Gumboro (IBD)':'Gumboro (IBD)','Bronquitis Infecciosa':'Infectious Bronchitis','Coccidiosis':'Coccidiosis','Marek':'Marek','Salmonelosis':'Salmonellosis','Coriza Infecciosa':'Infectious Coryza','Viruela Aviar':'Fowl Pox','Influenza Aviar':'Avian Influenza','Micoplasmosis':'Mycoplasmosis','Laringotraque√≠tis':'Laryngotracheitis','Colibacilosis':'Colibacillosis','Aspergilosis':'Aspergillosis','Histomoniasis':'Histomoniasis',
// medications
'Enrofloxacina':'Enrofloxacin','Amoxicilina':'Amoxicillin','Toltrazuril':'Toltrazuril','Ivermectina':'Ivermectin','Tilosina':'Tylosin','Oxitetraciclina':'Oxytetracycline','Vitamina AD3E':'Vitamin AD3E','Electrolitos':'Electrolytes',
// personnelRoles
'Administrador':'Administrator','T√©cnico Av√≠cola':'Poultry Technician','Galponero':'House Keeper','Recolector':'Collector','Veterinario':'Veterinarian','Chofer/Repartidor':'Driver/Delivery','Limpieza':'Cleaning','Mantenimiento':'Maintenance',
// feedTypes
'Inicio (0-6 sem)':'Starter (0-6 wk)','Crecimiento (6-12 sem)':'Grower (6-12 wk)','Desarrollo (12-16 sem)':'Developer (12-16 wk)','Pre-postura (16-18 sem)':'Pre-lay (16-18 wk)','Postura Fase 1 (18-45 sem)':'Layer Phase 1 (18-45 wk)','Postura Fase 2 (45-65 sem)':'Layer Phase 2 (45-65 wk)','Postura Fase 3 (65+ sem)':'Layer Phase 3 (65+ wk)',
// visitorPurposes
'Entrega de alimento':'Feed delivery','Servicio t√©cnico':'Technical service','Inspecci√≥n sanitaria':'Health inspection','Retiro de huevos':'Egg pickup','Visita veterinaria':'Veterinary visit','Mantenimiento':'Maintenance','Otro':'Other',
// ventilationLevels
'Natural':'Natural','Baja':'Low','Media':'Medium','Alta':'High','T√∫nel':'Tunnel',
// bioProtocols
'Desinfecci√≥n de galp√≥n':'House disinfection','Pediluvio':'Footbath','Control de roedores':'Rodent control','Fumigaci√≥n':'Fumigation','Limpieza de bebederos':'Waterer cleaning','Limpieza de comederos':'Feeder cleaning','Desratizaci√≥n':'Deratization','Vac√≠o sanitario':'Sanitary void',
// expenseDescriptions
'Alimento postura':'Layer feed','Alimento cr√≠a':'Starter feed','Suplementos':'Supplements','Aditivos':'Additives','Vacuna Newcastle':'Newcastle vaccine','Vacuna Gumboro':'Gumboro vaccine','Vacuna Marek':'Marek vaccine','Otra vacuna':'Other vaccine','Distribuci√≥n huevos':'Egg distribution','Retiro alimento':'Feed pickup','Traslado aves':'Bird transfer','Sueldos':'Wages','Horas extra':'Overtime','Bonos':'Bonuses','Reparaci√≥n galp√≥n':'House repair','Equipamiento':'Equipment','Nidales':'Nest boxes','Bebederos':'Waterers','Servicios b√°sicos':'Utilities','Asesor√≠a':'Consulting','Varios':'Miscellaneous',
// VACCINE_SCHEDULE names
'Newcastle + Bronquitis Infecciosa':'Newcastle + Infectious Bronchitis','Newcastle refuerzo':'Newcastle booster','Viruela Aviar':'Fowl Pox','Encefalomielitis Aviar':'Avian Encephalomyelitis','Coriza Infecciosa':'Infectious Coryza','Salmonella':'Salmonella','Newcastle + BI pre-postura':'Newcastle + IB pre-lay',
// COMMERCIAL_BREEDS notes
'M√°s usada mundialmente, excelente FCR':'Most used worldwide, excellent FCR','H√≠brida l√≠der global, muy d√≥cil':'Global leading hybrid, very docile','Excelente en climas c√°lidos':'Excellent in warm climates','Huevo mediano, alta persistencia':'Medium egg, high persistence','Muy popular en LATAM/Europa':'Very popular in LATAM/Europe','Similar a ISA, muy productiva':'Similar to ISA, very productive','H√≠brida de r√°pida producci√≥n':'Fast production hybrid','Blanca eficiente, buena en calor':'Efficient white, good in heat','Robusta, doble prop√≥sito':'Robust, dual purpose','Resistente, r√©cord hist√≥rico 364 huevos/a√±o':'Resistant, historic record 364 eggs/year','Buena conversi√≥n, adaptable':'Good conversion, adaptable','Familiar, huevos constantes':'Family-friendly, consistent eggs','Huevo azul, nicho premium':'Blue egg, premium niche','Originaria de Chile, huevo verde-azulado':'Native to Chile, blue-green egg','Huevo color chocolate oscuro, nicho gourmet':'Dark chocolate colored egg, gourmet niche','Raza no listada, usa curva gen√©rica':'Unlisted breed, uses generic curve'
},
pt:{
// deathCauses
'Enfermedad':'Doen√ßa','Depredador':'Predador','Golpe de calor':'Golpe de calor','Asfixia':'Asfixia','Canibalismo':'Canibalismo','Prolapso':'Prolapso','Edad/Natural':'Idade/Natural','Accidente':'Acidente','Desconocida':'Desconhecida',
// diseases
'Newcastle':'Newcastle','Gumboro (IBD)':'Gumboro (IBD)','Bronquitis Infecciosa':'Bronquite Infecciosa','Coccidiosis':'Coccidiose','Marek':'Marek','Salmonelosis':'Salmonelose','Coriza Infecciosa':'Coriza Infecciosa','Viruela Aviar':'Var√≠ola Avi√°ria','Influenza Aviar':'Influenza Avi√°ria','Micoplasmosis':'Micoplasmose','Laringotraque√≠tis':'Laringotraque√≠te','Colibacilosis':'Colibacilose','Aspergilosis':'Aspergilose','Histomoniasis':'Histomon√≠ase',
// medications
'Enrofloxacina':'Enrofloxacina','Amoxicilina':'Amoxicilina','Toltrazuril':'Toltrazuril','Ivermectina':'Ivermectina','Tilosina':'Tilosina','Oxitetraciclina':'Oxitetraciclina','Vitamina AD3E':'Vitamina AD3E','Electrolitos':'Eletr√≥litos',
// personnelRoles
'Administrador':'Administrador','T√©cnico Av√≠cola':'T√©cnico Av√≠cola','Galponero':'Granjeiro','Recolector':'Coletor','Veterinario':'Veterin√°rio','Chofer/Repartidor':'Motorista/Entregador','Limpieza':'Limpeza','Mantenimiento':'Manuten√ß√£o',
// feedTypes
'Inicio (0-6 sem)':'Inicial (0-6 sem)','Crecimiento (6-12 sem)':'Crescimento (6-12 sem)','Desarrollo (12-16 sem)':'Desenvolvimento (12-16 sem)','Pre-postura (16-18 sem)':'Pr√©-postura (16-18 sem)','Postura Fase 1 (18-45 sem)':'Postura Fase 1 (18-45 sem)','Postura Fase 2 (45-65 sem)':'Postura Fase 2 (45-65 sem)','Postura Fase 3 (65+ sem)':'Postura Fase 3 (65+ sem)',
// visitorPurposes
'Entrega de alimento':'Entrega de ra√ß√£o','Servicio t√©cnico':'Servi√ßo t√©cnico','Inspecci√≥n sanitaria':'Inspe√ß√£o sanit√°ria','Retiro de huevos':'Retirada de ovos','Visita veterinaria':'Visita veterin√°ria','Mantenimiento':'Manuten√ß√£o','Otro':'Outro',
// ventilationLevels
'Natural':'Natural','Baja':'Baixa','Media':'M√©dia','Alta':'Alta','T√∫nel':'T√∫nel',
// bioProtocols
'Desinfecci√≥n de galp√≥n':'Desinfec√ß√£o do galp√£o','Pediluvio':'Pedil√∫vio','Control de roedores':'Controle de roedores','Fumigaci√≥n':'Fumiga√ß√£o','Limpieza de bebederos':'Limpeza de bebedouros','Limpieza de comederos':'Limpeza de comedouros','Desratizaci√≥n':'Desratiza√ß√£o','Vac√≠o sanitario':'Vazio sanit√°rio',
// expenseDescriptions
'Alimento postura':'Ra√ß√£o postura','Alimento cr√≠a':'Ra√ß√£o inicial','Suplementos':'Suplementos','Aditivos':'Aditivos','Vacuna Newcastle':'Vacina Newcastle','Vacuna Gumboro':'Vacina Gumboro','Vacuna Marek':'Vacina Marek','Otra vacuna':'Outra vacina','Distribuci√≥n huevos':'Distribui√ß√£o de ovos','Retiro alimento':'Retirada de ra√ß√£o','Traslado aves':'Transfer√™ncia de aves','Sueldos':'Sal√°rios','Horas extra':'Horas extras','Bonos':'B√¥nus','Reparaci√≥n galp√≥n':'Reparo do galp√£o','Equipamiento':'Equipamentos','Nidales':'Ninhos','Bebederos':'Bebedouros','Servicios b√°sicos':'Servi√ßos b√°sicos','Asesor√≠a':'Consultoria','Varios':'Diversos',
// VACCINE_SCHEDULE names
'Newcastle + Bronquitis Infecciosa':'Newcastle + Bronquite Infecciosa','Newcastle refuerzo':'Newcastle refor√ßo','Viruela Aviar':'Var√≠ola Avi√°ria','Encefalomielitis Aviar':'Encefalomielite Avi√°ria','Coriza Infecciosa':'Coriza Infecciosa','Salmonella':'Salmonella','Newcastle + BI pre-postura':'Newcastle + BI pr√©-postura',
// COMMERCIAL_BREEDS notes
'M√°s usada mundialmente, excelente FCR':'Mais usada mundialmente, excelente FCR','H√≠brida l√≠der global, muy d√≥cil':'H√≠brida l√≠der global, muito d√≥cil','Excelente en climas c√°lidos':'Excelente em climas quentes','Huevo mediano, alta persistencia':'Ovo m√©dio, alta persist√™ncia','Muy popular en LATAM/Europa':'Muito popular na LATAM/Europa','Similar a ISA, muy productiva':'Similar √† ISA, muito produtiva','H√≠brida de r√°pida producci√≥n':'H√≠brida de produ√ß√£o r√°pida','Blanca eficiente, buena en calor':'Branca eficiente, boa no calor','Robusta, doble prop√≥sito':'Robusta, duplo prop√≥sito','Resistente, r√©cord hist√≥rico 364 huevos/a√±o':'Resistente, recorde hist√≥rico 364 ovos/ano','Buena conversi√≥n, adaptable':'Boa convers√£o, adapt√°vel','Familiar, huevos constantes':'Familiar, ovos constantes','Huevo azul, nicho premium':'Ovo azul, nicho premium','Originaria de Chile, huevo verde-azulado':'Origin√°ria do Chile, ovo verde-azulado','Huevo color chocolate oscuro, nicho gourmet':'Ovo cor chocolate escuro, nicho gourmet','Raza no listada, usa curva gen√©rica':'Ra√ßa n√£o listada, usa curva gen√©rica'
},
fr:{
// deathCauses
'Enfermedad':'Maladie','Depredador':'Pr√©dateur','Golpe de calor':'Coup de chaleur','Asfixia':'Asphyxie','Canibalismo':'Cannibalisme','Prolapso':'Prolapsus','Edad/Natural':'√Çge/Naturel','Accidente':'Accident','Desconocida':'Inconnue',
// diseases
'Newcastle':'Newcastle','Gumboro (IBD)':'Gumboro (IBD)','Bronquitis Infecciosa':'Bronchite infectieuse','Coccidiosis':'Coccidiose','Marek':'Marek','Salmonelosis':'Salmonellose','Coriza Infecciosa':'Coryza infectieux','Viruela Aviar':'Variole aviaire','Influenza Aviar':'Influenza aviaire','Micoplasmosis':'Mycoplasmose','Laringotraque√≠tis':'Laryngotrach√©ite','Colibacilosis':'Colibacillose','Aspergilosis':'Aspergillose','Histomoniasis':'Histomonose',
// medications
'Enrofloxacina':'Enrofloxacine','Amoxicilina':'Amoxicilline','Toltrazuril':'Toltrazuril','Ivermectina':'Ivermectine','Tilosina':'Tylosine','Oxitetraciclina':'Oxyt√©tracycline','Vitamina AD3E':'Vitamine AD3E','Electrolitos':'√âlectrolytes',
// personnelRoles
'Administrador':'Administrateur','T√©cnico Av√≠cola':'Technicien avicole','Galponero':'Gardien de poulailler','Recolector':'Collecteur','Veterinario':'V√©t√©rinaire','Chofer/Repartidor':'Chauffeur/Livreur','Limpieza':'Nettoyage','Mantenimiento':'Maintenance',
// feedTypes
'Inicio (0-6 sem)':'D√©marrage (0-6 sem)','Crecimiento (6-12 sem)':'Croissance (6-12 sem)','Desarrollo (12-16 sem)':'D√©veloppement (12-16 sem)','Pre-postura (16-18 sem)':'Pr√©-ponte (16-18 sem)','Postura Fase 1 (18-45 sem)':'Ponte Phase 1 (18-45 sem)','Postura Fase 2 (45-65 sem)':'Ponte Phase 2 (45-65 sem)','Postura Fase 3 (65+ sem)':'Ponte Phase 3 (65+ sem)',
// visitorPurposes
'Entrega de alimento':'Livraison aliment','Servicio t√©cnico':'Service technique','Inspecci√≥n sanitaria':'Inspection sanitaire','Retiro de huevos':'Collecte des ≈ìufs','Visita veterinaria':'Visite v√©t√©rinaire','Mantenimiento':'Maintenance','Otro':'Autre',
// ventilationLevels
'Natural':'Naturelle','Baja':'Faible','Media':'Moyenne','Alta':'Forte','T√∫nel':'Tunnel',
// bioProtocols
'Desinfecci√≥n de galp√≥n':'D√©sinfection du poulailler','Pediluvio':'P√©diluve','Control de roedores':'Contr√¥le des rongeurs','Fumigaci√≥n':'Fumigation','Limpieza de bebederos':'Nettoyage abreuvoirs','Limpieza de comederos':'Nettoyage mangeoires','Desratizaci√≥n':'D√©ratisation','Vac√≠o sanitario':'Vide sanitaire',
// expenseDescriptions
'Alimento postura':'Aliment ponte','Alimento cr√≠a':'Aliment d√©marrage','Suplementos':'Suppl√©ments','Aditivos':'Additifs','Vacuna Newcastle':'Vaccin Newcastle','Vacuna Gumboro':'Vaccin Gumboro','Vacuna Marek':'Vaccin Marek','Otra vacuna':'Autre vaccin','Distribuci√≥n huevos':'Distribution ≈ìufs','Retiro alimento':'Retrait aliment','Traslado aves':'Transfert volailles','Sueldos':'Salaires','Horas extra':'Heures sup.','Bonos':'Primes','Reparaci√≥n galp√≥n':'R√©paration poulailler','Equipamiento':'√âquipement','Nidales':'Pondoirs','Bebederos':'Abreuvoirs','Servicios b√°sicos':'Services publics','Asesor√≠a':'Conseil','Varios':'Divers',
// VACCINE_SCHEDULE names
'Newcastle + Bronquitis Infecciosa':'Newcastle + Bronchite infectieuse','Newcastle refuerzo':'Newcastle rappel','Viruela Aviar':'Variole aviaire','Encefalomielitis Aviar':'Enc√©phalomy√©lite aviaire','Coriza Infecciosa':'Coryza infectieux','Salmonella':'Salmonelle','Newcastle + BI pre-postura':'Newcastle + BI pr√©-ponte',
// COMMERCIAL_BREEDS notes
'M√°s usada mundialmente, excelente FCR':'Plus utilis√©e mondialement, excellent FCR','H√≠brida l√≠der global, muy d√≥cil':'Hybride leader mondial, tr√®s docile','Excelente en climas c√°lidos':'Excellente en climats chauds','Huevo mediano, alta persistencia':'≈íuf moyen, haute persistance','Muy popular en LATAM/Europa':'Tr√®s populaire en LATAM/Europe','Similar a ISA, muy productiva':'Similaire √† ISA, tr√®s productive','H√≠brida de r√°pida producci√≥n':'Hybride √† production rapide','Blanca eficiente, buena en calor':'Blanche efficace, bonne en chaleur','Robusta, doble prop√≥sito':'Robuste, double usage','Resistente, r√©cord hist√≥rico 364 huevos/a√±o':'R√©sistante, record historique 364 ≈ìufs/an','Buena conversi√≥n, adaptable':'Bonne conversion, adaptable','Familiar, huevos constantes':'Familiale, ≈ìufs constants','Huevo azul, nicho premium':'≈íuf bleu, niche premium','Originaria de Chile, huevo verde-azulado':'Originaire du Chili, ≈ìuf bleu-vert','Huevo color chocolate oscuro, nicho gourmet':'≈íuf chocolat fonc√©, niche gourmet','Raza no listada, usa curva gen√©rica':'Race non list√©e, courbe g√©n√©rique'
},
de:{
// deathCauses
'Enfermedad':'Krankheit','Depredador':'Raubtier','Golpe de calor':'Hitzschlag','Asfixia':'Erstickung','Canibalismo':'Kannibalismus','Prolapso':'Prolaps','Edad/Natural':'Alter/Nat√ºrlich','Accidente':'Unfall','Desconocida':'Unbekannt',
// diseases
'Newcastle':'Newcastle','Gumboro (IBD)':'Gumboro (IBD)','Bronquitis Infecciosa':'Infekti√∂se Bronchitis','Coccidiosis':'Kokzidiose','Marek':'Marek','Salmonelosis':'Salmonellose','Coriza Infecciosa':'Infekti√∂ser Schnupfen','Viruela Aviar':'Gefl√ºgelpocken','Influenza Aviar':'Gefl√ºgelgrippe','Micoplasmosis':'Mykoplasmose','Laringotraque√≠tis':'Laryngotracheitis','Colibacilosis':'Kolibazillose','Aspergilosis':'Aspergillose','Histomoniasis':'Histomonose',
// medications
'Enrofloxacina':'Enrofloxacin','Amoxicilina':'Amoxicillin','Toltrazuril':'Toltrazuril','Ivermectina':'Ivermectin','Tilosina':'Tylosin','Oxitetraciclina':'Oxytetracyclin','Vitamina AD3E':'Vitamin AD3E','Electrolitos':'Elektrolyte',
// personnelRoles
'Administrador':'Verwalter','T√©cnico Av√≠cola':'Gefl√ºgeltechniker','Galponero':'Stallwart','Recolector':'Sammler','Veterinario':'Tierarzt','Chofer/Repartidor':'Fahrer/Lieferant','Limpieza':'Reinigung','Mantenimiento':'Wartung',
// feedTypes
'Inicio (0-6 sem)':'Starter (0-6 Wo)','Crecimiento (6-12 sem)':'Wachstum (6-12 Wo)','Desarrollo (12-16 sem)':'Entwicklung (12-16 Wo)','Pre-postura (16-18 sem)':'Vorlegephase (16-18 Wo)','Postura Fase 1 (18-45 sem)':'Legephase 1 (18-45 Wo)','Postura Fase 2 (45-65 sem)':'Legephase 2 (45-65 Wo)','Postura Fase 3 (65+ sem)':'Legephase 3 (65+ Wo)',
// visitorPurposes
'Entrega de alimento':'Futterlieferung','Servicio t√©cnico':'Technischer Service','Inspecci√≥n sanitaria':'Gesundheitskontrolle','Retiro de huevos':'Eiersammlung','Visita veterinaria':'Tierarztbesuch','Mantenimiento':'Wartung','Otro':'Andere',
// ventilationLevels
'Natural':'Nat√ºrlich','Baja':'Niedrig','Media':'Mittel','Alta':'Hoch','T√∫nel':'Tunnel',
// bioProtocols
'Desinfecci√≥n de galp√≥n':'Stalldesinfektion','Pediluvio':'Klauenbad','Control de roedores':'Nagetierbek√§mpfung','Fumigaci√≥n':'Begasung','Limpieza de bebederos':'Tr√§nkenreinigung','Limpieza de comederos':'Futtertrogreinigung','Desratizaci√≥n':'Rattenbek√§mpfung','Vac√≠o sanitario':'Hygienepause',
// expenseDescriptions
'Alimento postura':'Legefutter','Alimento cr√≠a':'Aufzuchtfutter','Suplementos':'Erg√§nzungen','Aditivos':'Zus√§tze','Vacuna Newcastle':'Newcastle-Impfstoff','Vacuna Gumboro':'Gumboro-Impfstoff','Vacuna Marek':'Marek-Impfstoff','Otra vacuna':'Anderer Impfstoff','Distribuci√≥n huevos':'Eierverteilung','Retiro alimento':'Futterabholung','Traslado aves':'Gefl√ºgeltransport','Sueldos':'Geh√§lter','Horas extra':'√úberstunden','Bonos':'Boni','Reparaci√≥n galp√≥n':'Stallreparatur','Equipamiento':'Ausr√ºstung','Nidales':'Legenester','Bebederos':'Tr√§nken','Servicios b√°sicos':'Grundversorgung','Asesor√≠a':'Beratung','Varios':'Sonstiges',
// VACCINE_SCHEDULE names
'Newcastle + Bronquitis Infecciosa':'Newcastle + Infekti√∂se Bronchitis','Newcastle refuerzo':'Newcastle Auffrischung','Viruela Aviar':'Gefl√ºgelpocken','Encefalomielitis Aviar':'Avi√§re Enzephalomyelitis','Coriza Infecciosa':'Infekti√∂ser Schnupfen','Salmonella':'Salmonelle','Newcastle + BI pre-postura':'Newcastle + IB Vorlegephase',
// COMMERCIAL_BREEDS notes
'M√°s usada mundialmente, excelente FCR':'Weltweit am meisten genutzt, exzellenter FCR','H√≠brida l√≠der global, muy d√≥cil':'Weltweit f√ºhrende Hybride, sehr zahm','Excelente en climas c√°lidos':'Hervorragend in warmen Klimazonen','Huevo mediano, alta persistencia':'Mittleres Ei, hohe Persistenz','Muy popular en LATAM/Europa':'Sehr beliebt in LATAM/Europa','Similar a ISA, muy productiva':'√Ñhnlich wie ISA, sehr produktiv','H√≠brida de r√°pida producci√≥n':'Schnelle Produktionshybride','Blanca eficiente, buena en calor':'Effiziente Wei√üe, gut bei Hitze','Robusta, doble prop√≥sito':'Robust, Zweinutzung','Resistente, r√©cord hist√≥rico 364 huevos/a√±o':'Widerstandsf√§hig, historischer Rekord 364 Eier/Jahr','Buena conversi√≥n, adaptable':'Gute Verwertung, anpassungsf√§hig','Familiar, huevos constantes':'Familienfreundlich, konstante Eier','Huevo azul, nicho premium':'Blaues Ei, Premium-Nische','Originaria de Chile, huevo verde-azulado':'Aus Chile, blaugr√ºnes Ei','Huevo color chocolate oscuro, nicho gourmet':'Dunkelschokoladenfarbenes Ei, Gourmet-Nische','Raza no listada, usa curva gen√©rica':'Nicht gelistete Rasse, generische Kurve'
},
it:{
// deathCauses
'Enfermedad':'Malattia','Depredador':'Predatore','Golpe de calor':'Colpo di calore','Asfixia':'Asfissia','Canibalismo':'Cannibalismo','Prolapso':'Prolasso','Edad/Natural':'Et√†/Naturale','Accidente':'Incidente','Desconocida':'Sconosciuta',
// diseases
'Newcastle':'Newcastle','Gumboro (IBD)':'Gumboro (IBD)','Bronquitis Infecciosa':'Bronchite infettiva','Coccidiosis':'Coccidiosi','Marek':'Marek','Salmonelosis':'Salmonellosi','Coriza Infecciosa':'Corizza infettiva','Viruela Aviar':'Vaiolo aviare','Influenza Aviar':'Influenza aviaria','Micoplasmosis':'Micoplasmosi','Laringotraque√≠tis':'Laringotracheite','Colibacilosis':'Colibacillosi','Aspergilosis':'Aspergillosi','Histomoniasis':'Istomonosi',
// medications
'Enrofloxacina':'Enrofloxacina','Amoxicilina':'Amoxicillina','Toltrazuril':'Toltrazuril','Ivermectina':'Ivermectina','Tilosina':'Tilosina','Oxitetraciclina':'Ossitetraciclina','Vitamina AD3E':'Vitamina AD3E','Electrolitos':'Elettroliti',
// personnelRoles
'Administrador':'Amministratore','T√©cnico Av√≠cola':'Tecnico avicolo','Galponero':'Addetto pollaio','Recolector':'Raccoglitore','Veterinario':'Veterinario','Chofer/Repartidor':'Autista/Fattorino','Limpieza':'Pulizia','Mantenimiento':'Manutenzione',
// feedTypes
'Inicio (0-6 sem)':'Avviamento (0-6 sett)','Crecimiento (6-12 sem)':'Crescita (6-12 sett)','Desarrollo (12-16 sem)':'Sviluppo (12-16 sett)','Pre-postura (16-18 sem)':'Pre-deposizione (16-18 sett)','Postura Fase 1 (18-45 sem)':'Deposizione Fase 1 (18-45 sett)','Postura Fase 2 (45-65 sem)':'Deposizione Fase 2 (45-65 sett)','Postura Fase 3 (65+ sem)':'Deposizione Fase 3 (65+ sett)',
// visitorPurposes
'Entrega de alimento':'Consegna mangime','Servicio t√©cnico':'Servizio tecnico','Inspecci√≥n sanitaria':'Ispezione sanitaria','Retiro de huevos':'Ritiro uova','Visita veterinaria':'Visita veterinaria','Mantenimiento':'Manutenzione','Otro':'Altro',
// ventilationLevels
'Natural':'Naturale','Baja':'Bassa','Media':'Media','Alta':'Alta','T√∫nel':'Tunnel',
// bioProtocols
'Desinfecci√≥n de galp√≥n':'Disinfezione pollaio','Pediluvio':'Pediluvio','Control de roedores':'Controllo roditori','Fumigaci√≥n':'Fumigazione','Limpieza de bebederos':'Pulizia abbeveratoi','Limpieza de comederos':'Pulizia mangiatoie','Desratizaci√≥n':'Derattizzazione','Vac√≠o sanitario':'Vuoto sanitario',
// expenseDescriptions
'Alimento postura':'Mangime ovaiole','Alimento cr√≠a':'Mangime avviamento','Suplementos':'Integratori','Aditivos':'Additivi','Vacuna Newcastle':'Vaccino Newcastle','Vacuna Gumboro':'Vaccino Gumboro','Vacuna Marek':'Vaccino Marek','Otra vacuna':'Altro vaccino','Distribuci√≥n huevos':'Distribuzione uova','Retiro alimento':'Ritiro mangime','Traslado aves':'Trasferimento volatili','Sueldos':'Stipendi','Horas extra':'Straordinari','Bonos':'Bonus','Reparaci√≥n galp√≥n':'Riparazione pollaio','Equipamiento':'Attrezzature','Nidales':'Nidi','Bebederos':'Abbeveratoi','Servicios b√°sicos':'Utenze','Asesor√≠a':'Consulenza','Varios':'Vari',
// VACCINE_SCHEDULE names
'Newcastle + Bronquitis Infecciosa':'Newcastle + Bronchite infettiva','Newcastle refuerzo':'Newcastle richiamo','Viruela Aviar':'Vaiolo aviare','Encefalomielitis Aviar':'Encefalomielite aviaria','Coriza Infecciosa':'Corizza infettiva','Salmonella':'Salmonella','Newcastle + BI pre-postura':'Newcastle + BI pre-deposizione',
// COMMERCIAL_BREEDS notes
'M√°s usada mundialmente, excelente FCR':'Pi√π usata al mondo, eccellente FCR','H√≠brida l√≠der global, muy d√≥cil':'Ibrida leader globale, molto docile','Excelente en climas c√°lidos':'Eccellente nei climi caldi','Huevo mediano, alta persistencia':'Uovo medio, alta persistenza','Muy popular en LATAM/Europa':'Molto popolare in LATAM/Europa','Similar a ISA, muy productiva':'Simile a ISA, molto produttiva','H√≠brida de r√°pida producci√≥n':'Ibrida a produzione rapida','Blanca eficiente, buena en calor':'Bianca efficiente, buona al caldo','Robusta, doble prop√≥sito':'Robusta, duplice attitudine','Resistente, r√©cord hist√≥rico 364 huevos/a√±o':'Resistente, record storico 364 uova/anno','Buena conversi√≥n, adaptable':'Buona conversione, adattabile','Familiar, huevos constantes':'Familiare, uova costanti','Huevo azul, nicho premium':'Uovo blu, nicchia premium','Originaria de Chile, huevo verde-azulado':'Originaria del Cile, uovo verde-azzurro','Huevo color chocolate oscuro, nicho gourmet':'Uovo cioccolato scuro, nicchia gourmet','Raza no listada, usa curva gen√©rica':'Razza non elencata, curva generica'
},
ja:{
// deathCauses
'Enfermedad':'ÁñæÁóÖ','Depredador':'ÊçïÈ£üËÄÖ','Golpe de calor':'ÁÜ±‰∏≠Áóá','Asfixia':'Á™íÊÅØ','Canibalismo':'ÂÖ±È£ü„ÅÑ','Prolapso':'ËÑ±ËÇõ','Edad/Natural':'ËÄÅÈΩ¢/Ëá™ÁÑ∂Ê≠ª','Accidente':'‰∫ãÊïÖ','Desconocida':'‰∏çÊòé',
// diseases
'Newcastle':'„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´','Gumboro (IBD)':'„Ç¨„É≥„Éú„É≠ (IBD)','Bronquitis Infecciosa':'‰ºùÊüìÊÄßÊ∞óÁÆ°ÊîØÁÇé','Coccidiosis':'„Ç≥„ÇØ„Ç∑„Ç∏„Ç¶„É†Áóá','Marek':'„Éû„É¨„ÉÉ„ÇØ','Salmonelosis':'„Çµ„É´„É¢„Éç„É©Áóá','Coriza Infecciosa':'‰ºùÊüìÊÄß„Ç≥„É™„Éº„Ç∂','Viruela Aviar':'È∂èÁóò','Influenza Aviar':'È≥•„Ç§„É≥„Éï„É´„Ç®„É≥„Ç∂','Micoplasmosis':'„Éû„Ç§„Ç≥„Éó„É©„Ç∫„ÉûÁóá','Laringotraque√≠tis':'‰ºùÊüìÊÄßÂñâÈ†≠Ê∞óÁÆ°ÁÇé','Colibacilosis':'Â§ßËÖ∏ËèåÁóá','Aspergilosis':'„Ç¢„Çπ„Éö„É´„ÇÆ„É´„ÇπÁóá','Histomoniasis':'„Éí„Çπ„Éà„É¢„Éä„ÇπÁóá',
// medications
'Enrofloxacina':'„Ç®„É≥„É≠„Éï„É≠„Ç≠„Çµ„Ç∑„É≥','Amoxicilina':'„Ç¢„É¢„Ç≠„Ç∑„Ç∑„É™„É≥','Toltrazuril':'„Éà„É´„Éà„É©„Ç∫„É™„É´','Ivermectina':'„Ç§„Éô„É´„É°„ÇØ„ÉÅ„É≥','Tilosina':'„Çø„Ç§„É≠„Ç∑„É≥','Oxitetraciclina':'„Ç™„Ç≠„Ç∑„ÉÜ„Éà„É©„Çµ„Ç§„ÇØ„É™„É≥','Vitamina AD3E':'„Éì„Çø„Éü„É≥AD3E','Electrolitos':'ÈõªËß£Ë≥™',
// personnelRoles
'Administrador':'ÁÆ°ÁêÜËÄÖ','T√©cnico Av√≠cola':'È§äÈ∂èÊäÄË°ìËÄÖ','Galponero':'È∂èËàéÁÆ°ÁêÜËÄÖ','Recolector':'ÈõÜÂçµËÄÖ','Veterinario':'Áç£ÂåªÂ∏´','Chofer/Repartidor':'ÈÅãËª¢Êâã/ÈÖçÈÅîÂì°','Limpieza':'Ê∏ÖÊéÉ','Mantenimiento':'‰øùÂÆà',
// feedTypes
'Inicio (0-6 sem)':'„Çπ„Çø„Éº„Çø„Éº (0-6ÈÄ±)','Crecimiento (6-12 sem)':'ÊàêÈï∑Êúü (6-12ÈÄ±)','Desarrollo (12-16 sem)':'ËÇ≤ÊàêÊúü (12-16ÈÄ±)','Pre-postura (16-18 sem)':'Áî£ÂçµÂâçÊúü (16-18ÈÄ±)','Postura Fase 1 (18-45 sem)':'Áî£ÂçµÊúü1 (18-45ÈÄ±)','Postura Fase 2 (45-65 sem)':'Áî£ÂçµÊúü2 (45-65ÈÄ±)','Postura Fase 3 (65+ sem)':'Áî£ÂçµÊúü3 (65ÈÄ±‰ª•‰∏ä)',
// visitorPurposes
'Entrega de alimento':'È£ºÊñôÈÖçÈÅî','Servicio t√©cnico':'ÊäÄË°ì„Çµ„Éº„Éì„Çπ','Inspecci√≥n sanitaria':'Ë°õÁîüÊ§úÊüª','Retiro de huevos':'ÈõÜÂçµ','Visita veterinaria':'Áç£ÂåªË®™Âïè','Mantenimiento':'‰øùÂÆà','Otro':'„Åù„ÅÆ‰ªñ',
// ventilationLevels
'Natural':'Ëá™ÁÑ∂','Baja':'‰Ωé','Media':'‰∏≠','Alta':'È´ò','T√∫nel':'„Éà„É≥„Éç„É´',
// bioProtocols
'Desinfecci√≥n de galp√≥n':'È∂èËàéÊ∂àÊØí','Pediluvio':'Ë∏èËæºÊ∂àÊØíÊßΩ','Control de roedores':'„Éç„Ç∫„ÉüÈßÜÈô§','Fumigaci√≥n':'ÁáªËí∏Ê∂àÊØí','Limpieza de bebederos':'Áµ¶Ê∞¥Âô®Ê∏ÖÊéÉ','Limpieza de comederos':'Áµ¶È§åÂô®Ê∏ÖÊéÉ','Desratizaci√≥n':'ÈßÜÈº†','Vac√≠o sanitario':'Ë°õÁîüÁ©∫ÁôΩÊúüÈñì',
// expenseDescriptions
'Alimento postura':'Áî£ÂçµÈ£ºÊñô','Alimento cr√≠a':'ËÇ≤ÈõõÈ£ºÊñô','Suplementos':'„Çµ„Éó„É™„É°„É≥„Éà','Aditivos':'Ê∑ªÂä†Áâ©','Vacuna Newcastle':'„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´„ÉØ„ÇØ„ÉÅ„É≥','Vacuna Gumboro':'„Ç¨„É≥„Éú„É≠„ÉØ„ÇØ„ÉÅ„É≥','Vacuna Marek':'„Éû„É¨„ÉÉ„ÇØ„ÉØ„ÇØ„ÉÅ„É≥','Otra vacuna':'„Åù„ÅÆ‰ªñ„ÉØ„ÇØ„ÉÅ„É≥','Distribuci√≥n huevos':'È∂èÂçµÈÖçÈÄÅ','Retiro alimento':'È£ºÊñôÂõûÂèé','Traslado aves':'ÂÆ∂Á¶ΩÁßªÈÄÅ','Sueldos':'Áµ¶‰∏é','Horas extra':'ÊÆãÊ•≠‰ª£','Bonos':'Ë≥û‰∏é','Reparaci√≥n galp√≥n':'È∂èËàé‰øÆÁπï','Equipamiento':'Ë®≠ÂÇô','Nidales':'Áî£ÂçµÁÆ±','Bebederos':'Áµ¶Ê∞¥Âô®','Servicios b√°sicos':'ÂÖâÁÜ±Ë≤ª','Asesor√≠a':'„Ç≥„É≥„Çµ„É´„ÉÜ„Ç£„É≥„Ç∞','Varios':'ÈõëË≤ª',
// VACCINE_SCHEDULE names
'Newcastle + Bronquitis Infecciosa':'„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´ + ‰ºùÊüìÊÄßÊ∞óÁÆ°ÊîØÁÇé','Newcastle refuerzo':'„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´ËøΩÂä†Êé•Á®Æ','Viruela Aviar':'È∂èÁóò','Encefalomielitis Aviar':'È∂èËÑ≥ËÑäÈ´ÑÁÇé','Coriza Infecciosa':'‰ºùÊüìÊÄß„Ç≥„É™„Éº„Ç∂','Salmonella':'„Çµ„É´„É¢„Éç„É©','Newcastle + BI pre-postura':'„Éã„É•„Éº„Ç´„ÉÉ„Çπ„É´ + BI Áî£ÂçµÂâç',
// COMMERCIAL_BREEDS notes
'M√°s usada mundialmente, excelente FCR':'‰∏ñÁïå„ÅßÊúÄ„ÇÇ‰ΩøÁî®„ÄÅÂÑ™„Çå„ÅüFCR','H√≠brida l√≠der global, muy d√≥cil':'‰∏ñÁïåÁöÑ„É™„Éº„ÉÄ„Éº„ÅÆ„Éè„Ç§„Éñ„É™„ÉÉ„Éâ„ÄÅÈùûÂ∏∏„Å´Ê∏©È†Ü','Excelente en climas c√°lidos':'Êöñ„Åã„ÅÑÊ∞óÂÄô„Å´ÊúÄÈÅ©','Huevo mediano, alta persistencia':'‰∏≠Âçµ„ÄÅÈ´ò„ÅÑÊåÅÁ∂öÊÄß','Muy popular en LATAM/Europa':'‰∏≠ÂçóÁ±≥/„É®„Éº„É≠„ÉÉ„Éë„ÅßÈùûÂ∏∏„Å´‰∫∫Ê∞ó','Similar a ISA, muy productiva':'ISA„Å´È°û‰ºº„ÄÅÈùûÂ∏∏„Å´ÁîüÁî£ÁöÑ','H√≠brida de r√°pida producci√≥n':'È´òÈÄüÁîüÁî£„Éè„Ç§„Éñ„É™„ÉÉ„Éâ','Blanca eficiente, buena en calor':'ÂäπÁéáÁöÑ„Å™ÁôΩËâ≤Á®Æ„ÄÅÊöë„Åï„Å´Âº∑„ÅÑ','Robusta, doble prop√≥sito':'‰∏àÂ§´„ÄÅÂÖºÁî®Á®Æ','Resistente, r√©cord hist√≥rico 364 huevos/a√±o':'Âº∑ÂÅ•„ÄÅÊ≠¥Âè≤ÁöÑË®òÈå≤364Âçµ/Âπ¥','Buena conversi√≥n, adaptable':'ËâØ„ÅÑÈ£ºÊñôÂäπÁéá„ÄÅÈÅ©ÂøúÊÄß„ÅÇ„Çä','Familiar, huevos constantes':'ÂÆ∂Â∫≠Âêë„Åç„ÄÅÂÆâÂÆö„Åó„ÅüÁî£Âçµ','Huevo azul, nicho premium':'Èùí„ÅÑÂçµ„ÄÅ„Éó„É¨„Éü„Ç¢„É†„Éã„ÉÉ„ÉÅ','Originaria de Chile, huevo verde-azulado':'„ÉÅ„É™ÂéüÁî£„ÄÅÈùíÁ∑ë„ÅÆÂçµ','Huevo color chocolate oscuro, nicho gourmet':'„ÉÄ„Éº„ÇØ„ÉÅ„Éß„Ç≥„É¨„Éº„ÉàËâ≤„ÅÆÂçµ„ÄÅ„Ç∞„É´„É°„Éã„ÉÉ„ÉÅ','Raza no listada, usa curva gen√©rica':'Êú™ÁôªÈå≤ÂìÅÁ®Æ„ÄÅ‰∏ÄËà¨Êõ≤Á∑ö‰ΩøÁî®'
},
zh:{
// deathCauses
'Enfermedad':'ÁñæÁóÖ','Depredador':'ÊçïÈ£üËÄÖ','Golpe de calor':'‰∏≠Êöë','Asfixia':'Á™íÊÅØ','Canibalismo':'ÂïÑÈ£üÁôñ','Prolapso':'ËÑ±ËÇõ','Edad/Natural':'ËÄÅÈæÑ/Ëá™ÁÑ∂Ê≠ª‰∫°','Accidente':'‰∫ãÊïÖ','Desconocida':'‰∏çÊòé',
// diseases
'Newcastle':'Êñ∞ÂüéÁñ´','Gumboro (IBD)':'Ê≥ïÊ∞èÂõäÁóÖ (IBD)','Bronquitis Infecciosa':'‰º†ÊüìÊÄßÊîØÊ∞îÁÆ°ÁÇé','Coccidiosis':'ÁêÉËô´ÁóÖ','Marek':'È©¨Á´ãÂÖã','Salmonelosis':'Ê≤ôÈó®Ê∞èËèåÁóÖ','Coriza Infecciosa':'‰º†ÊüìÊÄßÈºªÁÇé','Viruela Aviar':'Á¶ΩÁóò','Influenza Aviar':'Á¶ΩÊµÅÊÑü','Micoplasmosis':'ÊîØÂéü‰ΩìÁóÖ','Laringotraque√≠tis':'‰º†ÊüìÊÄßÂñâÊ∞îÁÆ°ÁÇé','Colibacilosis':'Â§ßËÇ†ÊùÜËèåÁóÖ','Aspergilosis':'Êõ≤ÈúâËèåÁóÖ','Histomoniasis':'ÁªÑÁªáÊª¥Ëô´ÁóÖ',
// medications
'Enrofloxacina':'ÊÅ©ËØ∫Ê≤ôÊòü','Amoxicilina':'ÈòøËé´Ë•øÊûó','Toltrazuril':'Â¶•Êõ≤Áè†Âà©','Ivermectina':'‰ºäÁª¥ËèåÁ¥†','Tilosina':'Ê≥∞‰πêËèåÁ¥†','Oxitetraciclina':'ÂúüÈúâÁ¥†','Vitamina AD3E':'Áª¥ÁîüÁ¥†AD3E','Electrolitos':'ÁîµËß£Ë¥®',
// personnelRoles
'Administrador':'ÁÆ°ÁêÜÂëò','T√©cnico Av√≠cola':'ÂÆ∂Á¶ΩÊäÄÊúØÂëò','Galponero':'È∏°ËàçÁÆ°ÁêÜÂëò','Recolector':'Êî∂ËõãÂëò','Veterinario':'ÂÖΩÂåª','Chofer/Repartidor':'Âè∏Êú∫/ÈÖçÈÄÅÂëò','Limpieza':'Ê∏ÖÊ¥Å','Mantenimiento':'Áª¥Êä§',
// feedTypes
'Inicio (0-6 sem)':'ÂºÄÈ£üÊñô (0-6Âë®)','Crecimiento (6-12 sem)':'ÁîüÈïøÊñô (6-12Âë®)','Desarrollo (12-16 sem)':'ËÇ≤ÊàêÊñô (12-16Âë®)','Pre-postura (16-18 sem)':'È¢Ñ‰∫ßÊñô (16-18Âë®)','Postura Fase 1 (18-45 sem)':'‰∫ßËõãÊúü1 (18-45Âë®)','Postura Fase 2 (45-65 sem)':'‰∫ßËõãÊúü2 (45-65Âë®)','Postura Fase 3 (65+ sem)':'‰∫ßËõãÊúü3 (65Âë®‰ª•‰∏ä)',
// visitorPurposes
'Entrega de alimento':'È•≤ÊñôÈÖçÈÄÅ','Servicio t√©cnico':'ÊäÄÊúØÊúçÂä°','Inspecci√≥n sanitaria':'Âç´ÁîüÊ£ÄÊü•','Retiro de huevos':'Êî∂Ëõã','Visita veterinaria':'ÂÖΩÂåªËÆøÈóÆ','Mantenimiento':'Áª¥Êä§','Otro':'ÂÖ∂‰ªñ',
// ventilationLevels
'Natural':'Ëá™ÁÑ∂','Baja':'‰Ωé','Media':'‰∏≠','Alta':'È´ò','T√∫nel':'ÈößÈÅìÂºè',
// bioProtocols
'Desinfecci√≥n de galp√≥n':'È∏°ËàçÊ∂àÊØí','Pediluvio':'ËÑöË∏èÊ∂àÊØíÊ±†','Control de roedores':'ÁÅ≠Èº†','Fumigaci√≥n':'ÁÜèËí∏Ê∂àÊØí','Limpieza de bebederos':'È•ÆÊ∞¥Âô®Ê∏ÖÊ¥Å','Limpieza de comederos':'ÊñôÊßΩÊ∏ÖÊ¥Å','Desratizaci√≥n':'ÁÅ≠Èº†Â§ÑÁêÜ','Vac√≠o sanitario':'Á©∫ËàçÊúü',
// expenseDescriptions
'Alimento postura':'‰∫ßËõãÈ•≤Êñô','Alimento cr√≠a':'ËÇ≤ÈõèÈ•≤Êñô','Suplementos':'Ë°•ÂÖÖÂâÇ','Aditivos':'Ê∑ªÂä†ÂâÇ','Vacuna Newcastle':'Êñ∞ÂüéÁñ´Áñ´Ëãó','Vacuna Gumboro':'Ê≥ïÊ∞èÂõäÁñ´Ëãó','Vacuna Marek':'È©¨Á´ãÂÖãÁñ´Ëãó','Otra vacuna':'ÂÖ∂‰ªñÁñ´Ëãó','Distribuci√≥n huevos':'È∏°ËõãÈÖçÈÄÅ','Retiro alimento':'È•≤ÊñôÂõûÊî∂','Traslado aves':'ÂÆ∂Á¶ΩËΩ¨Ëøê','Sueldos':'Â∑•ËµÑ','Horas extra':'Âä†Áè≠Ë¥π','Bonos':'Â•ñÈáë','Reparaci√≥n galp√≥n':'È∏°ËàçÁª¥‰øÆ','Equipamiento':'ËÆæÂ§á','Nidales':'‰∫ßËõãÁÆ±','Bebederos':'È•ÆÊ∞¥Âô®','Servicios b√°sicos':'Ê∞¥ÁîµË¥π','Asesor√≠a':'Âí®ËØ¢','Varios':'ÊùÇÈ°π',
// VACCINE_SCHEDULE names
'Newcastle + Bronquitis Infecciosa':'Êñ∞ÂüéÁñ´ + ‰º†ÊüìÊÄßÊîØÊ∞îÁÆ°ÁÇé','Newcastle refuerzo':'Êñ∞ÂüéÁñ´Âä†Âº∫','Viruela Aviar':'Á¶ΩÁóò','Encefalomielitis Aviar':'Á¶ΩËÑëËÑäÈ´ìÁÇé','Coriza Infecciosa':'‰º†ÊüìÊÄßÈºªÁÇé','Salmonella':'Ê≤ôÈó®Ê∞èËèå','Newcastle + BI pre-postura':'Êñ∞ÂüéÁñ´ + ‰º†ÊîØ ‰∫ßÂâç',
// COMMERCIAL_BREEDS notes
'M√°s usada mundialmente, excelente FCR':'ÂÖ®ÁêÉ‰ΩøÁî®ÊúÄÂπøÔºå‰ºòÁßÄFCR','H√≠brida l√≠der global, muy d√≥cil':'ÂÖ®ÁêÉÈ¢ÜÂÖàÊùÇ‰∫§ÂìÅÁßçÔºåÈùûÂ∏∏Ê∏©È°∫','Excelente en climas c√°lidos':'ÈÄÇÂêàÁÇéÁÉ≠Ê∞îÂÄô','Huevo mediano, alta persistencia':'‰∏≠Á≠âËõãÈáçÔºåÈ´òÊåÅÁª≠ÊÄß','Muy popular en LATAM/Europa':'Âú®ÊãâÁæé/Ê¨ßÊ¥≤ÈùûÂ∏∏ÊµÅË°å','Similar a ISA, muy productiva':'Á±ª‰ººISAÔºåÁîü‰∫ßÂäõÂº∫','H√≠brida de r√°pida producci√≥n':'Âø´ÈÄüÁîü‰∫ßÊùÇ‰∫§Áßç','Blanca eficiente, buena en calor':'È´òÊïàÁôΩÂ£≥ÁßçÔºåËÄêÁÉ≠','Robusta, doble prop√≥sito':'Âº∫ÂÅ•ÔºåÂÖºÁî®Âûã','Resistente, r√©cord hist√≥rico 364 huevos/a√±o':'ÊäóÁóÖÂäõÂº∫ÔºåÂéÜÂè≤ËÆ∞ÂΩï364Ëõã/Âπ¥','Buena conversi√≥n, adaptable':'È•≤ÊñôËΩ¨ÂåñÂ•ΩÔºåÈÄÇÂ∫îÊÄßÂº∫','Familiar, huevos constantes':'ÂÆ∂Â∫≠ÈÄÇÁî®Ôºå‰∫ßËõãÁ®≥ÂÆö','Huevo azul, nicho premium':'ËìùÂ£≥ËõãÔºåÈ´òÁ´ØÂ∏ÇÂú∫','Originaria de Chile, huevo verde-azulado':'Âéü‰∫ßÊô∫Âà©ÔºåËìùÁªøÂ£≥Ëõã','Huevo color chocolate oscuro, nicho gourmet':'Ê∑±Â∑ßÂÖãÂäõËâ≤ËõãÔºåÁæéÈ£üÂ∏ÇÂú∫','Raza no listada, usa curva gen√©rica':'Êú™ÂàóÂá∫ÂìÅÁßçÔºå‰ΩøÁî®ÈÄöÁî®Êõ≤Á∫ø'
}
};
function tc(str){if(LANG==='es'||!CATALOG_T[LANG])return str;return CATALOG_T[LANG][str]||str;}
// ============ LOCALE MAP (WALTZ engine) ============
const LOCALE_MAP={es:'es-CL',en:'en-US',pt:'pt-BR',fr:'fr-FR',de:'de-DE',it:'it-IT',ja:'ja-JP',zh:'zh-CN',ko:'ko-KR',ar:'ar-SA',hi:'hi-IN',ru:'ru-RU'};
function locale(){return LOCALE_MAP[LANG]||'en-US';}
// ============ CATALOG HELPERS ============
function supplierSelect(sel){const D=loadData();const sups=D.farm.suppliers||[];let h='<option value="">--</option>';sups.forEach(s=>{h+=`<option value="${s.name}"${s.name===sel?' selected':''}>${s.name}</option>`;});h+='<option value="__new__">+ Nuevo proveedor</option>';return h;}
function houseSelect(sel){const D=loadData();const houses=D.farm.houses||[];let h='<option value="">--</option>';houses.forEach(ho=>{h+=`<option value="${ho.name}"${ho.name===sel?' selected':''}>${ho.name}</option>`;});return h;}
function rackSelect(houseName,sel){const D=loadData();const houses=D.farm.houses||[];const house=houses.find(h=>h.name===houseName);let h='<option value="">--</option>';if(house&&house.racks){house.racks.forEach(r=>{h+=`<option value="${r.name}"${r.name===sel?' selected':''}>${r.name}</option>`;});}return h;}
function routeSelect(sel){const D=loadData();const routes=D.farm.routes||[];let h='<option value="">--</option>';routes.forEach(r=>{h+=`<option value="${r.name}"${r.name===sel?' selected':''}>${r.name}</option>`;});return h;}
function catalogSelect(items,sel,addOther=true){let h='<option value="">--</option>';items.forEach(item=>{const v=typeof item==='string'?item:item.name||item.id;const lbl=typeof item==='string'?item:item.name;h+=`<option value="${v}"${v===sel?' selected':''}>${tc(lbl)}</option>`;});if(addOther)h+='<option value="__other__">Otra...</option>';return h;}
function feedTypeSelect(sel,flockId){const D=loadData();let suggested='';if(flockId){const f=D.flocks.find(x=>x.id===flockId);if(f){const stage=flockLifecycleStage(f);if(stage)suggested=stage.id;}}let h='<option value="">--</option>';CATALOGS.feedTypes.forEach(ft=>{const isSuggested=ft.stage===suggested;h+=`<option value="${ft.id}"${ft.id===sel?' selected':''}>${tc(ft.name)}${isSuggested?' ‚òÖ':''}</option>`;});h+='<option value="__other__">Otro...</option>';return h;}
function onMedSelect(){const sel=$('m-name');if(!sel)return;const med=CATALOGS.medications.find(m=>m.name===sel.value);const wd=$('m-wd');if(med&&wd&&!wd.value)wd.value=med.withdrawal;}
function onExpenseCatChange(){const cat=$('fe-cat')?.value;const descEl=$('fe-desc');if(!descEl||!cat)return;const opts=CATALOGS.expenseDescriptions[cat]||[];descEl.innerHTML=catalogSelect(opts,descEl.value,true);}
function onHouseChange(){const house=$('tb-house')?.value;const rackEl=$('tb-rack');if(!rackEl)return;rackEl.innerHTML=rackSelect(house,rackEl.value);}
function onProdFlockChange(){const fid=$('p-flock')?.value;const shellEl=$('p-shell');if(!fid||!shellEl)return;const D=loadData();const f=D.flocks.find(x=>x.id===fid);if(f){const b=COMMERCIAL_BREEDS.find(x=>x.id===f.breed);if(b&&b.eggColor){const colorMap={'Blanco':'blanco','Marr√≥n':'marron','Marr√≥n oscuro':'marron','Crema':'crema','Azul/Verde':'crema','Verde oliva':'crema'};shellEl.value=colorMap[b.eggColor]||'';}}}
function loadData(){
if(DATA)return DATA;
try{const r=localStorage.getItem('egglogu_data');
if(r){DATA=JSON.parse(r);
for(const k of Object.keys(DEFAULT_DATA)){if(!(k in DATA))DATA[k]=JSON.parse(JSON.stringify(DEFAULT_DATA[k]));}
if(!DATA.feed.purchases)DATA.feed.purchases=[];if(!DATA.feed.consumption)DATA.feed.consumption=[];
if(!DATA.finances.receivables)DATA.finances.receivables=[];
['medications','outbreaks','clients','checklist','logbook','personnel','kpiSnapshots','weatherCache','stressEvents','iotReadings','predictions'].forEach(k=>{if(!DATA[k])DATA[k]=[];});
// v2 farm field migrations
if(DATA.farm.lat===undefined)DATA.farm.lat=null;
if(DATA.farm.lng===undefined)DATA.farm.lng=null;
if(!DATA.farm.owmApiKey)DATA.farm.owmApiKey='';
if(!DATA.farm.mqttBroker)DATA.farm.mqttBroker='';
if(!DATA.farm.mqttUser)DATA.farm.mqttUser='';
if(!DATA.farm.mqttPass)DATA.farm.mqttPass='';
if(!DATA.farm.mqttTopicPrefix)DATA.farm.mqttTopicPrefix='egglogu/';
// v4 migrations ‚Äî farm config expansion
if(!DATA.farm.houses)DATA.farm.houses=[];
if(!DATA.farm.routes)DATA.farm.routes=[];
if(!DATA.farm.suppliers)DATA.farm.suppliers=[];
// v3 migrations
if(!DATA.biosecurity)DATA.biosecurity={visitors:[],zones:[],pestSightings:[],protocols:[]};
if(!DATA.biosecurity.visitors)DATA.biosecurity.visitors=[];
if(!DATA.biosecurity.zones)DATA.biosecurity.zones=[];
if(!DATA.biosecurity.pestSightings)DATA.biosecurity.pestSightings=[];
if(!DATA.biosecurity.protocols)DATA.biosecurity.protocols=[];
if(!DATA.traceability)DATA.traceability={batches:[]};
if(!DATA.traceability.batches)DATA.traceability.batches=[];
if(!DATA.productionPlans)DATA.productionPlans=[];
if(DATA.settings.campoMode===undefined)DATA.settings.campoMode=false;
if(DATA.settings.vetMode===undefined)DATA.settings.vetMode=false;
if(!DATA.settings.fontScale)DATA.settings.fontScale='normal';
if(DATA.settings.darkMode===undefined)DATA.settings.darkMode=false;
}else{DATA=JSON.parse(JSON.stringify(DEFAULT_DATA));}
}catch(e){DATA=JSON.parse(JSON.stringify(DEFAULT_DATA));}
return DATA;
}
function saveData(d){DATA=d||DATA;localStorage.setItem('egglogu_data',JSON.stringify(DATA));}

function activeHens(){const D=loadData();let n=0;D.flocks.forEach(f=>{if(f.status!=='descarte')n+=activeHensByFlock(f.id);});return n;}
function activeHensByFlock(fid){
const D=loadData();const f=D.flocks.find(x=>x.id===fid);if(!f)return 0;
const deaths=D.dailyProduction.filter(p=>p.flockId===fid).reduce((s,p)=>s+(p.deaths||0),0);
const oD=D.outbreaks.filter(o=>o.flockId===fid).reduce((s,o)=>s+(o.deaths||0),0);
return Math.max(0,(f.count||0)-deaths-oD);
}
function flockAge(f){if(!f.birthDate)return{days:0,weeks:0};const d=Math.floor((new Date()-new Date(f.birthDate+'T12:00:00'))/864e5);return{days:Math.max(0,d),weeks:Math.max(0,Math.floor(d/7))};}
function flockLifecycleStage(f){const w=flockAge(f).weeks;return LIFECYCLE.find(l=>w>=l.weekStart&&w<l.weekEnd)||LIFECYCLE[LIFECYCLE.length-1];}
function healthScore(fid){
const D=loadData();const f=D.flocks.find(x=>x.id===fid);if(!f)return 0;
const td=D.dailyProduction.filter(p=>p.flockId===fid).reduce((s,p)=>s+(p.deaths||0),0);
const mPct=f.count>0?(td/f.count)*100:0;const mS=Math.max(0,100-mPct*10);
const l7=D.dailyProduction.filter(p=>p.flockId===fid).sort((a,b)=>b.date.localeCompare(a.date)).slice(0,7);
const hens=activeHensByFlock(fid);let pS=50;
if(l7.length>0&&hens>0){const avg=l7.reduce((s,p)=>s+(p.eggsCollected||0),0)/l7.length;pS=Math.min(100,(avg/hens)*125);}
let fS=80;const l7f=D.feed.consumption.filter(c=>c.flockId===fid).sort((a,b)=>b.date.localeCompare(a.date)).slice(0,7);
if(l7f.length>0&&l7.length>0&&hens>0){const aF=l7f.reduce((s,c)=>s+(c.quantityKg||0),0)/l7f.length;const aE=(l7.reduce((s,p)=>s+(p.eggsCollected||0),0)/l7.length*0.06);const fcr=aE>0?aF/aE:99;fS=fcr<2?100:fcr<2.5?80:fcr<3?60:fcr<4?40:20;}
const ao=D.outbreaks.filter(o=>o.flockId===fid&&o.status==='active').length;const oS=ao===0?100:ao===1?40:0;
return Math.round(mS*0.3+pS*0.3+fS*0.2+oS*0.2);
}
function healthBadge(s){return `<span class="health-score ${s>=70?'good':s>=40?'warn':'bad'}">${s}</span>`;}
function statusBadge(st){
const m={cria:'info',recria:'warning',produccion:'success',descarte:'secondary',active:'danger',controlled:'warning',resolved:'success',pending:'warning',applied:'success',overdue:'danger'};
const lb={cria:t('flock_status_cria'),recria:t('flock_status_recria'),produccion:t('flock_status_produccion'),descarte:t('flock_status_descarte'),active:t('out_active'),controlled:t('out_controlled'),resolved:t('out_resolved'),pending:t('vac_pending'),applied:t('vac_applied_status'),overdue:t('vac_overdue')};
return `<span class="badge badge-${m[st]||'secondary'}">${lb[st]||st}</span>`;
}

// ============ KPI SNAPSHOT SYSTEM ============
function computeKpiSnapshot(){
const D=loadData();const hens=activeHens();const today=todayStr();
const tp=D.dailyProduction.filter(p=>p.date===today);
const eggsToday=tp.reduce((s,p)=>s+(p.eggsCollected||0),0);
const henDay=hens>0?((eggsToday/hens)*100):0;
const d30=new Date();d30.setDate(d30.getDate()-30);const d30s=d30.toISOString().substring(0,10);
const p30=D.dailyProduction.filter(p=>p.date>=d30s);const te30=p30.reduce((s,p)=>s+(p.eggsCollected||0),0);
const teKg=te30*0.06;const f30=D.feed.consumption.filter(c=>c.date>=d30s);const tfKg=f30.reduce((s,c)=>s+(c.quantityKg||0),0);
const fcr=teKg>0?(tfKg/teKg):0;
const tDeaths=D.dailyProduction.reduce((s,p)=>s+(p.deaths||0),0);const tInit=D.flocks.reduce((s,f)=>s+(f.count||0),0);
const mort=tInit>0?((tDeaths/tInit)*100):0;
const tExp=D.finances.expenses.reduce((s,e)=>s+(e.amount||0),0);const tEggs=D.dailyProduction.reduce((s,p)=>s+(p.eggsCollected||0),0);
const cpe=tEggs>0?tExp/tEggs:0;
const mo=today.substring(0,7);
const mInc=D.finances.income.filter(i=>i.date&&i.date.startsWith(mo)).reduce((s,i)=>s+((i.quantity||0)*(i.unitPrice||0)||(i.amount||0)),0);
const mExp=D.finances.expenses.filter(e=>e.date&&e.date.startsWith(mo)).reduce((s,e)=>s+(e.amount||0),0);
const stock=D.feed.purchases.reduce((s,p)=>s+(p.quantityKg||0),0)-D.feed.consumption.reduce((s,c)=>s+(c.quantityKg||0),0);
return{date:today,activeHens:hens,eggsToday,henDay:Math.round(henDay*10)/10,fcr:Math.round(fcr*100)/100,
mortality:Math.round(mort*10)/10,costPerEgg:Math.round(cpe*100)/100,netIncome:mInc-mExp,feedStock:Math.round(stock*10)/10,
totalFlocks:D.flocks.filter(f=>f.status!=='descarte').length,activeOutbreaks:D.outbreaks.filter(o=>o.status==='active').length};
}
function saveKpiSnapshot(){
const D=loadData();const snap={id:genId(),...computeKpiSnapshot()};
D.kpiSnapshots.push(snap);saveData(D);toast(t('cfg_saved'));renderDashboard();
}
function snapshotDelta(current,previous){
if(!previous)return'';const diff=current-previous;
if(Math.abs(diff)<0.01)return `<span class="snapshot-badge snapshot-same">= </span>`;
return diff>0?`<span class="snapshot-badge snapshot-up">‚ñ≤ ${fmtNum(diff,1)}</span>`:`<span class="snapshot-badge snapshot-down">‚ñº ${fmtNum(Math.abs(diff),1)}</span>`;
}

// ============ VACCINE SCHEDULE ============
const VACCINE_SCHEDULE=[
{name:'Marek',ageDays:1,route:'vac_route_injection'},{name:'Newcastle + Bronquitis Infecciosa',ageDays:6,route:'vac_route_ocular'},
{name:'Gumboro (IBD)',ageDays:14,route:'vac_route_water'},{name:'Newcastle refuerzo',ageDays:21,route:'vac_route_water'},
{name:'Viruela Aviar',ageDays:49,route:'vac_route_wing'},{name:'Encefalomielitis Aviar',ageDays:63,route:'vac_route_water'},
{name:'Coriza Infecciosa',ageDays:77,route:'vac_route_injection'},{name:'Salmonella',ageDays:91,route:'vac_route_injection'},
{name:'Newcastle + BI pre-postura',ageDays:112,route:'vac_route_injection'}
];
function generateVaccineCalendar(flock){
const D=loadData();if(!flock.birthDate)return;const birth=new Date(flock.birthDate+'T12:00:00');
VACCINE_SCHEDULE.forEach(vs=>{const sd=new Date(birth.getTime()+vs.ageDays*864e5);
if(!D.vaccines.find(v=>v.flockId===flock.id&&v.vaccineName===vs.name)){
D.vaccines.push({id:genId(),flockId:flock.id,vaccineName:vs.name,scheduledDate:sd.toISOString().substring(0,10),appliedDate:'',batchNumber:'',route:vs.route,notes:'',status:'pending'});}});
saveData(D);
}

// ============ UI HELPERS ============
function nav(section){
currentSection=section;document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
$('sec-'+section).classList.add('active');
document.querySelectorAll('#main-nav a').forEach(a=>a.classList.toggle('active',a.dataset.section===section));
$('sidebar').classList.remove('open');
const R={dashboard:renderDashboard,produccion:renderProduction,lotes:renderFlocks,sanidad:renderSanidad,alimento:renderFeed,clientes:renderClients,finanzas:renderFinances,analisis:renderAnalysis,operaciones:renderOperations,bioseguridad:renderBiosecurity,trazabilidad:renderTraceability,planificacion:renderPlanning,ambiente:renderEnvironment,config:renderConfig};
if(R[section])R[section]();
}
function toggleSidebar(){$('sidebar').classList.toggle('open');}
function openModal(title,body){$('modal-title').textContent=title;$('modal-body').innerHTML=body;$('modal-overlay').classList.add('open');}
function closeModal(){$('modal-overlay').classList.remove('open');}
function toast(msg,err=false){const e=$('toast');e.textContent=msg;e.className='toast show'+(err?' error':'');setTimeout(()=>e.className='toast',3000);}
function emptyState(icon,msg,btn,act){let h=`<div class="empty-state"><div class="empty-icon">${icon}</div><p>${msg}</p>`;if(btn)h+=`<button class="btn btn-primary" onclick="${act}">${btn}</button>`;return h+'</div>';}
function switchLang(l){LANG=l;localStorage.setItem('egglogu_lang',l);const ls=$('langSelect');if(ls)ls.value=l;document.querySelectorAll('[data-t]').forEach(el=>el.textContent=t(el.dataset.t));nav(currentSection);}
function flockSelect(sel,all=false){const D=loadData();let h=all?`<option value="">${t('all')}</option>`:'<option value="">--</option>';D.flocks.forEach(f=>{h+=`<option value="${f.id}"${f.id===sel?' selected':''}>${f.name}</option>`;});return h;}
function clientSelect(sel){const D=loadData();let h='<option value="">--</option>';D.clients.forEach(c=>{h+=`<option value="${c.id}"${c.id===sel?' selected':''}>${c.name}</option>`;});return h;}
function destroyCharts(){Object.values(CHARTS).forEach(c=>{try{c.destroy();}catch(e){}});CHARTS={};}

// ============ ALERTS ============
function getAlerts(D){
const alerts=[];const today=todayStr();const ad=D.settings.alertDaysBefore||3;
const soon=new Date();soon.setDate(soon.getDate()+ad);const soonStr=soon.toISOString().substring(0,10);
D.vaccines.filter(v=>v.status!=='applied').forEach(v=>{
const f=D.flocks.find(x=>x.id===v.flockId);const fn=f?f.name:'';
if(v.scheduledDate<today)alerts.push({type:'danger',icon:'üíâ',msg:`${t('alert_vaccine_overdue')}: ${v.vaccineName} - ${fn}`});
else if(v.scheduledDate<=soonStr)alerts.push({type:'warning',icon:'üíâ',msg:`${t('alert_vaccine_soon')}: ${v.vaccineName} - ${fn} (${fmtDate(v.scheduledDate)})`});
});
const stock=D.feed.purchases.reduce((s,p)=>s+(p.quantityKg||0),0)-D.feed.consumption.reduce((s,c)=>s+(c.quantityKg||0),0);
if(stock<(D.settings.minFeedStock||50))alerts.push({type:'warning',icon:'üåæ',msg:`${t('alert_low_feed')}: ${fmtNum(stock,1)} kg`});
const tD=D.dailyProduction.reduce((s,p)=>s+(p.deaths||0),0);const tI=D.flocks.reduce((s,f)=>s+(f.count||0),0);
if(tI>0&&(tD/tI)*100>(D.settings.maxMortality||5))alerts.push({type:'danger',icon:'‚ö†Ô∏è',msg:`${t('alert_high_mortality')}: ${fmtNum((tD/tI)*100,1)}%`});
D.outbreaks.filter(o=>o.status==='active').forEach(o=>{const f=D.flocks.find(x=>x.id===o.flockId);alerts.push({type:'danger',icon:'ü¶†',msg:`${t('alert_active_outbreak')}: ${o.disease} - ${f?f.name:''}`});});
D.medications.forEach(m=>{if(m.withdrawalEnd&&m.withdrawalEnd>=today){const f=D.flocks.find(x=>x.id===m.flockId);alerts.push({type:'warning',icon:'‚è≥',msg:`${t('alert_withdrawal')}: ${m.name} - ${f?f.name:''} (${fmtDate(m.withdrawalEnd)})`});}});
// Biosecurity alerts
if(D.biosecurity){
D.biosecurity.zones.forEach(z=>{if(z.lastDisinfection&&z.frequencyDays){
const next=new Date(z.lastDisinfection+'T12:00:00');next.setDate(next.getDate()+z.frequencyDays);
if(next.toISOString().substring(0,10)<today)alerts.push({type:'warning',icon:'üõ°Ô∏è',msg:`${t('alert_bio_disinfection')}: ${z.name}`});}});
const unresolved=D.biosecurity.pestSightings.filter(p=>!p.resolved).length;
if(unresolved>0)alerts.push({type:'warning',icon:'üêÄ',msg:`${t('alert_bio_pests')}: ${unresolved}`});
const recentCross=D.biosecurity.visitors.filter(v=>v.fromFarmHealth==='outbreak'&&v.date>=new Date(Date.now()-7*86400000).toISOString().substring(0,10));
if(recentCross.length)alerts.push({type:'danger',icon:'‚ö†Ô∏è',msg:`${t('alert_bio_cross')}: ${recentCross.map(v=>v.name).join(', ')}`});
}
return alerts;
}

// ============ DASHBOARD ============
function renderDashboard(){
const D=loadData();
if(D.settings.campoMode){$('sec-dashboard').innerHTML=renderCampoDashboard(D);return;}
if(D.settings.vetMode){showVetDashboard();return;}
const today=todayStr();const snap=computeKpiSnapshot();
const prevSnap=D.kpiSnapshots.length>0?D.kpiSnapshots[D.kpiSnapshots.length-1]:null;
const alerts=getAlerts(D);
let h=`<div class="page-header"><h2>${t('dash_title')}</h2><div class="btn-group"><button class="btn btn-secondary" onclick="saveKpiSnapshot()">${t('dash_snapshot')}</button><span>${D.farm.name}</span></div></div><div class="kpi-grid">`;
h+=kpi(t('kpi_today'),fmtNum(snap.eggsToday),'','')+kpi(t('kpi_henday'),fmtNum(snap.henDay,1)+'%',fmtNum(snap.activeHens)+' '+t('kpi_active_hens').toLowerCase()+(prevSnap?snapshotDelta(snap.henDay,prevSnap.henDay):''),snap.henDay<50?'danger':snap.henDay<70?'warning':'');
h+=kpi(t('kpi_fcr'),snap.fcr>0?fmtNum(snap.fcr,2):'-',t('fcr_unit')+(prevSnap?snapshotDelta(-snap.fcr,-prevSnap.fcr):''),snap.fcr>3?'danger':snap.fcr>2.5?'warning':'');
h+=kpi(t('kpi_mortality'),fmtNum(snap.mortality,1)+'%',''+(prevSnap?snapshotDelta(-snap.mortality,-prevSnap.mortality):''),snap.mortality>5?'danger':snap.mortality>3?'warning':'');
h+=kpi(t('kpi_cost_egg'),fmtMoney(snap.costPerEgg),''+(prevSnap?snapshotDelta(-snap.costPerEgg,-prevSnap.costPerEgg):''),'accent');
h+=kpi(t('kpi_income_net'),fmtMoney(snap.netIncome),today.substring(0,7)+(prevSnap?snapshotDelta(snap.netIncome,prevSnap.netIncome):''),snap.netIncome<0?'danger':'secondary');
h+=kpi(t('kpi_active_hens'),fmtNum(snap.activeHens),snap.totalFlocks+' '+t('kpi_active_flocks').toLowerCase());
h+=kpi(t('kpi_alerts'),alerts.length.toString(),alerts.length>0?'‚ö†':'‚úì',alerts.length>0?'warning':'');
h+='</div>';
if(alerts.length){h+=`<div class="card"><h3>${t('dash_alerts')}</h3>`;alerts.forEach(a=>{h+=`<div class="alert-card alert-${a.type}">${a.icon} ${a.msg}</div>`;});h+='</div>';}
// Recommendations
const recs=getRecommendations(D);
if(recs.length){h+=`<div class="rec-card"><h3>üí° ${t('rec_title')}</h3>`;
recs.forEach(r=>{h+=`<div class="rec-item"><span class="rec-priority ${r.priority}">${r.priority.toUpperCase()}</span><span>${r.icon} ${r.msg}</span></div>`;});
h+='</div>';}
// Weather widget
if(D.farm.owmApiKey&&D.farm.lat!==null){
h+='<div id="weather-widget"><div class="weather-widget"><p style="color:var(--text-light)">'+t('weather_title')+'...</p></div></div>';
}else{
h+=`<div class="card" style="background:var(--primary-fill)"><p style="color:var(--text-light)">${t('weather_no_key')} <a href="javascript:nav('config')" style="color:var(--primary)">${t('cfg_title')}</a></p></div>`;
}
h+=`<div class="card"><h3>${t('dash_trend')}</h3><div class="chart-container"><canvas id="chart-trend"></canvas></div></div>`;
if(D.kpiSnapshots.length>1){h+=`<div class="card"><h3>${t('dash_kpi_history')} (${D.kpiSnapshots.length} ${t('snapshots')})</h3><div class="table-wrap"><table><thead><tr><th>${t('date')}</th><th>Hen-Day</th><th>FCR</th><th>${t('kpi_mortality')}</th><th>${t('kpi_cost_egg')}</th><th>${t('kpi_income_net')}</th><th>${t('kpi_active_hens')}</th></tr></thead><tbody>`;
D.kpiSnapshots.slice(-10).reverse().forEach((s,i,arr)=>{const prev=arr[i+1]||null;
h+=`<tr><td>${fmtDate(s.date)}</td><td>${fmtNum(s.henDay,1)}%${prev?snapshotDelta(s.henDay,prev.henDay):''}</td>
<td>${fmtNum(s.fcr,2)}</td><td>${fmtNum(s.mortality,1)}%</td><td>${fmtMoney(s.costPerEgg)}</td>
<td>${fmtMoney(s.netIncome)}</td><td>${fmtNum(s.activeHens)}</td></tr>`;});
h+='</tbody></table></div></div>';}
$('sec-dashboard').innerHTML=h;destroyCharts();renderTrendChart(D);fetchWeather();
}
function kpi(label,value,sub,cls=''){return `<div class="kpi-card ${cls}"><div class="kpi-label">${label}</div><div class="kpi-value">${value}</div><div class="kpi-sub">${sub||''}</div></div>`;}
function renderTrendChart(D){
const c=document.getElementById('chart-trend');if(!c)return;
const labels=[],dE=[],dH=[];
for(let i=29;i>=0;i--){const d=new Date();d.setDate(d.getDate()-i);const ds=d.toISOString().substring(0,10);
labels.push(ds.substring(5));const dp=D.dailyProduction.filter(p=>p.date===ds);
const eggs=dp.reduce((s,p)=>s+(p.eggsCollected||0),0);dE.push(eggs);const h=activeHens();dH.push(h>0?((eggs/h)*100):0);}
CHARTS.trend=new Chart(c,{type:'line',data:{labels,datasets:[
{label:t('prod_eggs'),data:dE,borderColor:themeColor('--primary'),backgroundColor:themeRgba(.1),fill:true,tension:.3,yAxisID:'y'},
{label:t('kpi_henday'),data:dH,borderColor:'#FF8F00',backgroundColor:'transparent',borderDash:[5,5],tension:.3,yAxisID:'y1'}
]},options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},
scales:{y:{position:'left',title:{display:true,text:t('prod_eggs')}},y1:{position:'right',title:{display:true,text:'%'},grid:{drawOnChartArea:false},min:0,max:100}}}});
}

// ============ FLOCKS ============
function renderFlocks(){
const D=loadData();let h=`<div class="page-header"><h2>${t('flock_title')}</h2><button class="btn btn-primary" onclick="showFlockForm()">${t('flock_add')}</button></div>`;
if(!D.flocks.length){h+=emptyState('üêî',t('no_data'),t('flock_add'),'showFlockForm()');}
else{
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('flock_name')}</th><th>${t('flock_breed')}</th><th>${t('flock_count')}</th><th>${t('flock_current')}</th><th>${t('flock_age')}</th><th>${t('lc_current_stage')}</th><th>${t('flock_status')}</th><th>${t('flock_health')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.flocks.forEach(f=>{const age=flockAge(f);const cur=activeHensByFlock(f.id);const hs=healthScore(f.id);const lc=flockLifecycleStage(f);
const bi=breedInfo(f.breed||f.targetCurve);
h+=`<tr><td><strong>${f.name}</strong></td><td>${breedName(f.breed||f.targetCurve)}${bi&&bi.eggColor!=='-'?'<br><small style="color:var(--text-light)">'+bi.eggColor+'</small>':''}</td><td>${fmtNum(f.count)}</td><td>${fmtNum(cur)}</td>
<td>${age.weeks} ${t('flock_weeks')} (${age.days} ${t('flock_days')})</td>
<td><span style="background:${lc.color};padding:2px 8px;border-radius:12px;font-size:11px;font-weight:600">${lc.icon} ${t(lc.key)}</span></td>
<td>${statusBadge(f.status)}</td><td>${healthBadge(hs)}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showFlockForm('${f.id}')">${t('edit')}</button>
<button class="btn btn-sm" style="background:var(--accent);color:#fff" onclick="showFlockRoadmap('${f.id}')">${t('flock_roadmap')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteFlock('${f.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';}
$('sec-lotes').innerHTML=h;
}
function showFlockRoadmap(fid){
const D=loadData();const f=D.flocks.find(x=>x.id===fid);if(!f)return;
const age=flockAge(f);const currentLC=flockLifecycleStage(f);
let h=`<h3 style="margin-bottom:8px">${f.name} ‚Äî ${t('flock_lifecycle')}</h3>
<p style="color:var(--text-light);margin-bottom:16px">${t('flock_age')}: ${age.weeks} ${t('flock_weeks')} | ${t('lc_current_stage')}: ${currentLC.icon} ${t(currentLC.key)}</p>`;
h+='<div class="lifecycle-bar">';
const totalWeeks=80;
LIFECYCLE.forEach(l=>{
const w=Math.min(l.weekEnd,totalWeeks)-l.weekStart;const pct=(w/totalWeeks*100);
if(pct<=0)return;
const isCurrent=l.stage===currentLC.stage;
h+=`<div class="lifecycle-stage${isCurrent?' current':''}" style="width:${pct}%;background:${l.color};${isCurrent?'font-weight:800':''}" title="${t(l.key)}: ${l.weekStart}-${l.weekEnd} ${t('flock_weeks')}">${l.icon} ${t(l.key)}</div>`;
});h+='</div>';
h+='<div class="lifecycle-detail">';
LIFECYCLE.forEach(l=>{const isCurrent=l.stage===currentLC.stage;
h+=`<div class="lifecycle-card" style="background:${l.color};${isCurrent?'box-shadow:0 0 0 3px var(--primary)':''}">
<div class="lc-icon">${l.icon}</div><div class="lc-name">${t(l.key)}</div>
<div class="lc-weeks">${t('lc_weeks')}: ${l.weekStart}-${l.weekEnd===999?'80+':l.weekEnd}</div>
<div class="lc-info"><strong>${t('lc_feed')}:</strong> ${l.feed==='-'?'-':t(l.feed)}<br><strong>${t('lc_temp')}:</strong> ${l.temp}<br>
<strong>${t('lc_prod_label')}:</strong> ${l.prod.startsWith('lc_')?t(l.prod):l.prod}<br><strong>${t('lc_milestone')}:</strong> ${t(l.milestones)}</div></div>`;
});h+='</div>';
// Vaccine timeline for this flock
const vaccines=D.vaccines.filter(v=>v.flockId===fid).sort((a,b)=>a.scheduledDate.localeCompare(b.scheduledDate));
if(vaccines.length){h+=`<h3 style="margin-top:16px">${t('san_vaccines')}</h3><div class="table-wrap" style="margin-top:8px"><table><thead><tr><th>${t('vac_vaccine')}</th><th>${t('vac_scheduled')}</th><th>${t('vac_route')}</th><th>${t('status')}</th></tr></thead><tbody>`;
vaccines.forEach(v=>{h+=`<tr><td>${v.vaccineName}</td><td>${fmtDate(v.scheduledDate)}</td><td>${t(v.route)}</td><td>${statusBadge(v.status==='applied'?'applied':v.scheduledDate<todayStr()?'overdue':'pending')}</td></tr>`;});
h+='</tbody></table></div>';}
openModal(t('flock_lifecycle')+' ‚Äî '+f.name,h);
}
function showFlockForm(id){
const D=loadData();const f=id?D.flocks.find(x=>x.id===id):null;
openModal(f?t('flock_edit'):t('flock_add'),`
<div class="form-row"><div class="form-group"><label>${t('flock_name')}</label><input id="f-name" value="${f?f.name:''}"></div>
<div class="form-group"><label>${t('flock_breed')}</label><select id="f-breed" onchange="onBreedSelect()">
${COMMERCIAL_BREEDS.map(b=>`<option value="${b.id}"${(f&&(f.breed===b.id||f.targetCurve===b.id))?' selected':''}>${b.name}${b.type!=='-'?' ('+b.type+')':''}</option>`).join('')}
</select></div></div>
<div id="breed-info" style="background:var(--card-bg,#f0f4f8);border-radius:8px;padding:8px 12px;margin:-4px 0 8px;font-size:.85em;display:${f?'block':'block'}"></div>
<div class="form-row"><div class="form-group"><label>${t('flock_housing')}</label><select id="f-housing">
<option value="floor"${f&&f.housingType==='floor'?' selected':''}>${t('flock_housing_floor')}</option>
<option value="cage"${f&&f.housingType==='cage'?' selected':''}>${t('flock_housing_cage')}</option>
<option value="free"${f&&f.housingType==='free'?' selected':''}>${t('flock_housing_free')}</option></select></div>
<div class="form-group"><label>${t('flock_egg_color')}</label><input id="f-egg-color" readonly style="background:var(--card-bg,#f0f4f8);cursor:default"></div></div>
<div class="form-row"><div class="form-group"><label>${t('flock_count')}</label><input type="number" id="f-count" value="${f?f.count:''}"></div>
<div class="form-group"><label>${t('flock_status')}</label><select id="f-status">
<option value="cria"${f&&f.status==='cria'?' selected':''}>${t('flock_status_cria')}</option>
<option value="recria"${f&&f.status==='recria'?' selected':''}>${t('flock_status_recria')}</option>
<option value="produccion"${(!f||f.status==='produccion')?' selected':''}>${t('flock_status_produccion')}</option>
<option value="descarte"${f&&f.status==='descarte'?' selected':''}>${t('flock_status_descarte')}</option></select></div></div>
<div class="form-row"><div class="form-group"><label>${t('flock_birthdate')}</label><input type="date" id="f-birth" value="${f?f.birthDate:''}"></div>
<div class="form-group"><label>${t('flock_purchase_date')}</label><input type="date" id="f-purchase" value="${f?f.purchaseDate:''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('flock_supplier')}</label><select id="f-supplier">${supplierSelect(f?f.supplier:'')}</select></div>
<div class="form-group"><label>${t('flock_cost')}</label><input type="number" id="f-cost" value="${f?f.cost:''}"></div></div>
<div class="form-group"><label>${t('flock_notes')}</label><textarea id="f-notes">${f?f.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveFlock('${id||''}')">${t('save')}</button></div>`);
setTimeout(onBreedSelect,50);
}
function breedName(id){const b=COMMERCIAL_BREEDS.find(x=>x.id===id);return b?b.name:(id||'-');}
function breedInfo(id){return COMMERCIAL_BREEDS.find(x=>x.id===id)||null;}
function onBreedSelect(){
const sel=$('f-breed');if(!sel)return;const bid=sel.value;
const b=COMMERCIAL_BREEDS.find(x=>x.id===bid);
const info=$('breed-info');const ec=$('f-egg-color');
if(b&&b.type!=='-'){
info.innerHTML=`<strong>${b.name}</strong> ‚Äî ${b.eggsYear} huevos/a√±o ¬∑ Peso: ${b.eggWeight} ¬∑ FCR: ${b.fcr}<br><span style="color:var(--text-secondary,#666)">${b.notes}</span>`;
info.style.display='block';if(ec)ec.value=b.eggColor;
}else{info.innerHTML='';info.style.display='none';if(ec)ec.value='';}
}
function saveFlock(id){
const D=loadData();const breedId=$('f-breed').value;
const o={name:$('f-name').value,breed:breedId,count:parseInt($('f-count').value)||0,
status:$('f-status').value,housingType:$('f-housing')?.value||'floor',targetCurve:breedId,
birthDate:$('f-birth').value,purchaseDate:$('f-purchase').value,
supplier:$('f-supplier').value,cost:parseFloat($('f-cost').value)||0,notes:$('f-notes').value};
if(!o.name){toast(t('flock_name'),true);return;}
if(id){const i=D.flocks.findIndex(f=>f.id===id);if(i>=0)D.flocks[i]={...D.flocks[i],...o};}
else{o.id=genId();D.flocks.push(o);if(o.birthDate)generateVaccineCalendar(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderFlocks();
}
function deleteFlock(id){
if(!confirm(t('confirm_delete')))return;const D=loadData();
D.flocks=D.flocks.filter(f=>f.id!==id);D.dailyProduction=D.dailyProduction.filter(p=>p.flockId!==id);
D.vaccines=D.vaccines.filter(v=>v.flockId!==id);D.medications=D.medications.filter(m=>m.flockId!==id);
D.outbreaks=D.outbreaks.filter(o=>o.flockId!==id);D.feed.consumption=D.feed.consumption.filter(c=>c.flockId!==id);
saveData(D);toast(t('cfg_saved'));renderFlocks();
}

// ============ PRODUCTION ============
function renderProduction(){
const D=loadData();let h=`<div class="page-header"><h2>${t('prod_title')}</h2><button class="btn btn-primary" onclick="showProdForm()">${t('prod_add')}</button></div>`;
h+=`<div class="filter-bar"><select onchange="filterProd()" id="pf-flock">${flockSelect('',true)}</select>
<input type="date" id="pf-from" onchange="filterProd()"><input type="date" id="pf-to" onchange="filterProd()"></div>`;
if(!D.dailyProduction.length){h+=emptyState('ü•ö',t('no_data'),t('prod_add'),'showProdForm()');}
else{h+='<div id="prod-table"></div>';}
$('sec-produccion').innerHTML=h;if(D.dailyProduction.length)filterProd();
}
function filterProd(){
const D=loadData();const fid=$('pf-flock')?.value||'';const fr=$('pf-from')?.value||'';const to=$('pf-to')?.value||'';
let recs=D.dailyProduction.sort((a,b)=>b.date.localeCompare(a.date));
if(fid)recs=recs.filter(r=>r.flockId===fid);if(fr)recs=recs.filter(r=>r.date>=fr);if(to)recs=recs.filter(r=>r.date<=to);
let h='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('prod_flock')}</th><th>${t('prod_eggs')}</th><th>S/M/L/XL/J</th><th>${t('prod_egg_type')}</th><th>${t('prod_market')}</th><th>${t('prod_broken')}</th><th>${t('prod_deaths')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
recs.forEach(p=>{const f=D.flocks.find(x=>x.id===p.flockId);
const etype=p.eggType?t('prod_type_'+p.eggType):'-';
const mchan=p.marketChannel?t('prod_market_'+p.marketChannel):'-';
h+=`<tr><td>${fmtDate(p.date)}</td><td>${f?f.name:'-'}</td><td><strong>${fmtNum(p.eggsCollected)}</strong></td>
<td>${[p.eggsS||0,p.eggsM||0,p.eggsL||0,p.eggsXL||0,p.eggsJumbo||0].join('/')}</td>
<td>${etype}</td><td>${mchan}</td>
<td>${fmtNum(p.eggsBroken||0)}</td><td>${p.deaths?'<span style="color:var(--danger)">'+p.deaths+'</span>':'-'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showProdForm('${p.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteProd('${p.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';const w=$('prod-table');if(w)w.innerHTML=h;
}
function showProdForm(id){
const D=loadData();const p=id?D.dailyProduction.find(x=>x.id===id):null;
openModal(p?t('edit'):t('prod_add'),`
<div class="form-row"><div class="form-group"><label>${t('prod_date')}</label><input type="date" id="p-date" value="${p?p.date:todayStr()}"></div>
<div class="form-group"><label>${t('prod_flock')}</label><select id="p-flock" onchange="onProdFlockChange()">${flockSelect(p?p.flockId:'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('prod_eggs')}</label><input type="number" id="p-eggs" value="${p?p.eggsCollected:''}" min="0"></div>
<div class="form-group"><label>${t('prod_broken')}</label><input type="number" id="p-broken" value="${p?p.eggsBroken||'':''}" min="0"></div></div>
<div class="form-row-3"><div class="form-group"><label>${t('prod_size_s')}</label><input type="number" id="p-s" value="${p?p.eggsS||'':''}" min="0"></div>
<div class="form-group"><label>${t('prod_size_m')}</label><input type="number" id="p-m" value="${p?p.eggsM||'':''}" min="0"></div>
<div class="form-group"><label>${t('prod_size_l')}</label><input type="number" id="p-l" value="${p?p.eggsL||'':''}" min="0"></div></div>
<div class="form-row-3"><div class="form-group"><label>${t('prod_size_xl')}</label><input type="number" id="p-xl" value="${p?p.eggsXL||'':''}" min="0"></div>
<div class="form-group"><label>${t('prod_size_jumbo')}</label><input type="number" id="p-jumbo" value="${p?p.eggsJumbo||'':''}" min="0"></div>
<div class="form-group"><label>${t('prod_yolk')}</label><input type="number" id="p-yolk" value="${p?p.yolkScore||'':''}" min="1" max="10"></div></div>
<div class="form-row"><div class="form-group"><label>${t('prod_shell')}</label><select id="p-shell">
<option value="">--</option><option value="blanco"${p&&p.shellColor==='blanco'?' selected':''}>${t('prod_shell_white')}</option>
<option value="marron"${p&&p.shellColor==='marron'?' selected':''}>${t('prod_shell_brown')}</option>
<option value="crema"${p&&p.shellColor==='crema'?' selected':''}>${t('prod_shell_cream')}</option></select></div>
<div class="form-group"><label>${t('prod_deaths')}</label><input type="number" id="p-deaths" value="${p?p.deaths||'':''}" min="0"></div></div>
<div class="form-row"><div class="form-group"><label>${t('prod_egg_type')}</label><select id="p-etype">
<option value="conventional"${p&&p.eggType==='conventional'?' selected':''}>${t('prod_type_conventional')}</option>
<option value="free_range"${p&&p.eggType==='free_range'?' selected':''}>${t('prod_type_free_range')}</option>
<option value="organic"${p&&p.eggType==='organic'?' selected':''}>${t('prod_type_organic')}</option>
<option value="pasture_raised"${p&&p.eggType==='pasture_raised'?' selected':''}>${t('prod_type_pasture')}</option>
<option value="decorative"${p&&p.eggType==='decorative'?' selected':''}>${t('prod_type_decorative')}</option></select></div>
<div class="form-group"><label>${t('prod_market')}</label><select id="p-market">
<option value="wholesale"${p&&p.marketChannel==='wholesale'?' selected':''}>${t('prod_market_wholesale')}</option>
<option value="supermarket"${p&&p.marketChannel==='supermarket'?' selected':''}>${t('prod_market_supermarket')}</option>
<option value="restaurant"${p&&p.marketChannel==='restaurant'?' selected':''}>${t('prod_market_restaurant')}</option>
<option value="direct"${p&&p.marketChannel==='direct'?' selected':''}>${t('prod_market_direct')}</option>
<option value="export"${p&&p.marketChannel==='export'?' selected':''}>${t('prod_market_export')}</option>
<option value="pasteurized"${p&&p.marketChannel==='pasteurized'?' selected':''}>${t('prod_market_pasteurized')}</option></select></div></div>
<div class="form-group"><label>${t('prod_death_cause')}</label><select id="p-cause">${catalogSelect(CATALOGS.deathCauses,p?p.deathCause||'':'')}</select></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="p-notes">${p?p.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveProd('${id||''}')">${t('save')}</button></div>`);
if(!p)setTimeout(onProdFlockChange,50);
}
function saveProd(id){
const D=loadData();const o={date:$('p-date').value,flockId:$('p-flock').value,
eggsCollected:parseInt($('p-eggs').value)||0,eggsBroken:parseInt($('p-broken').value)||0,
eggsS:parseInt($('p-s').value)||0,eggsM:parseInt($('p-m').value)||0,eggsL:parseInt($('p-l').value)||0,
eggsXL:parseInt($('p-xl').value)||0,eggsJumbo:parseInt($('p-jumbo').value)||0,
shellColor:$('p-shell').value,yolkScore:parseInt($('p-yolk').value)||0,
deaths:parseInt($('p-deaths').value)||0,deathCause:$('p-cause').value,
eggType:$('p-etype')?.value||'conventional',marketChannel:$('p-market')?.value||'wholesale',
notes:$('p-notes').value};
if(!o.date||!o.flockId){toast(t('required'),true);return;}
if(id){const i=D.dailyProduction.findIndex(p=>p.id===id);if(i>=0)D.dailyProduction[i]={...D.dailyProduction[i],...o};}
else{o.id=genId();D.dailyProduction.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderProduction();
}
function deleteProd(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.dailyProduction=D.dailyProduction.filter(p=>p.id!==id);saveData(D);toast(t('cfg_saved'));renderProduction();}

// === SANIDAD MODULE ===
function renderSanidad(){
const D=loadData();
let h=`<div class="page-header"><h2>${t('san_title')}</h2></div>`;
h+=`<div class="tabs"><div class="tab${currentSanidadTab==='vaccines'?' active':''}" onclick="currentSanidadTab='vaccines';renderSanidad()">üíâ ${t('san_vaccines')}</div>
<div class="tab${currentSanidadTab==='medications'?' active':''}" onclick="currentSanidadTab='medications';renderSanidad()">üíä ${t('san_medications')}</div>
<div class="tab${currentSanidadTab==='outbreaks'?' active':''}" onclick="currentSanidadTab='outbreaks';renderSanidad()">ü¶† ${t('san_outbreaks')}</div>
<div class="tab${currentSanidadTab==='stress'?' active':''}" onclick="currentSanidadTab='stress';renderSanidad()">‚ö° ${t('stress_title')}</div></div>`;
if(currentSanidadTab==='vaccines')h+=renderVaccinesTab(D);
else if(currentSanidadTab==='medications')h+=renderMedicationsTab(D);
else if(currentSanidadTab==='stress')h+=renderStressEventsTab(D);
else h+=renderOutbreaksTab(D);
$('sec-sanidad').innerHTML=h;
}
function renderVaccinesTab(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('vac_title')}</h3><div class="btn-group">
<button class="btn btn-secondary btn-sm" onclick="showGenVaccines()">${t('vac_generate')}</button>
<button class="btn btn-primary btn-sm" onclick="showVaccineForm()">${t('vac_add')}</button></div></div>`;
h+=`<div class="filter-bar"><select id="vf-flock" onchange="renderSanidad()">${flockSelect('',true)}</select>
<select id="vf-status" onchange="renderSanidad()"><option value="">${t('all')}</option><option value="pending">${t('vac_pending')}</option><option value="overdue">${t('vac_overdue')}</option><option value="applied">${t('vac_applied_status')}</option></select></div>`;
const fid=document.getElementById('vf-flock')?.value||'';const st=document.getElementById('vf-status')?.value||'';
let vacs=D.vaccines.sort((a,b)=>a.scheduledDate.localeCompare(b.scheduledDate));
if(fid)vacs=vacs.filter(v=>v.flockId===fid);
const today=todayStr();
vacs=vacs.map(v=>{const eff=v.status==='applied'?'applied':v.scheduledDate<today?'overdue':'pending';return{...v,effectiveStatus:eff};});
if(st)vacs=vacs.filter(v=>v.effectiveStatus===st);
if(!vacs.length)return h+emptyState('üíâ',t('no_data'));
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('prod_flock')}</th><th>${t('vac_vaccine')}</th><th>${t('vac_route')}</th><th>${t('vac_scheduled')}</th><th>${t('vac_applied')}</th><th>${t('vac_batch')}</th><th>${t('status')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
vacs.forEach(v=>{const f=D.flocks.find(x=>x.id===v.flockId);
h+=`<tr><td>${f?f.name:'-'}</td><td>${v.vaccineName}</td><td>${v.route?t(v.route):'-'}</td><td>${fmtDate(v.scheduledDate)}</td>
<td>${v.appliedDate?fmtDate(v.appliedDate):'-'}</td><td>${v.batchNumber||'-'}</td>
<td>${statusBadge(v.effectiveStatus)}</td>
<td><div class="btn-group">${v.effectiveStatus!=='applied'?`<button class="btn btn-primary btn-sm" onclick="markVaccineApplied('${v.id}')">${t('vac_mark_applied')}</button>`:''}
<button class="btn btn-secondary btn-sm" onclick="showVaccineForm('${v.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteVaccine('${v.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';return h;
}
function showGenVaccines(){
const D=loadData();const flocks=D.flocks.filter(f=>f.birthDate&&f.status!=='descarte');
if(!flocks.length){toast(t('no_flocks_birthdate'),true);return;}
let body=`<p>${t('vac_select_flocks')}</p>`;
flocks.forEach(f=>{body+=`<div class="checklist-item"><input type="checkbox" id="gv-${f.id}" checked><span>${f.name} (${fmtDate(f.birthDate)})</span></div>`;});
body+=`<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="doGenVaccines()">${t('vac_generate')}</button></div>`;
openModal(t('vac_generate'),body);
}
function doGenVaccines(){
const D=loadData();D.flocks.filter(f=>f.birthDate&&f.status!=='descarte').forEach(f=>{
const cb=document.getElementById('gv-'+f.id);if(cb&&cb.checked)generateVaccineCalendar(f);});
closeModal();toast(t('cfg_saved'));renderSanidad();
}
function showVaccineForm(id){
const D=loadData();const v=id?D.vaccines.find(x=>x.id===id):null;
openModal(v?t('edit'):t('vac_add'),`
<div class="form-row"><div class="form-group"><label>${t('prod_flock')}</label><select id="v-flock">${flockSelect(v?v.flockId:'')}</select></div>
<div class="form-group"><label>${t('vac_vaccine')}</label><select id="v-name">${catalogSelect(VACCINE_SCHEDULE.map(vs=>vs.name),v?v.vaccineName:'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('vac_route')}</label><select id="v-route">
<option value="">--</option>
<option value="vac_route_injection"${v&&v.route==='vac_route_injection'?' selected':''}>${t('vac_route_injection')}</option>
<option value="vac_route_ocular"${v&&v.route==='vac_route_ocular'?' selected':''}>${t('vac_route_ocular')}</option>
<option value="vac_route_water"${v&&v.route==='vac_route_water'?' selected':''}>${t('vac_route_water')}</option>
<option value="vac_route_wing"${v&&v.route==='vac_route_wing'?' selected':''}>${t('vac_route_wing')}</option>
</select></div>
<div class="form-group"><label>${t('vac_batch')}</label><input id="v-batch" value="${v?v.batchNumber:''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('vac_scheduled')}</label><input type="date" id="v-sched" value="${v?v.scheduledDate:''}"></div>
<div class="form-group"><label>${t('vac_applied')}</label><input type="date" id="v-applied" value="${v?v.appliedDate:''}"></div></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="v-notes">${v?v.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveVaccine('${id||''}')">${t('save')}</button></div>`);
}
function saveVaccine(id){
const D=loadData();const o={flockId:$('v-flock').value,vaccineName:$('v-name').value,route:$('v-route').value,
batchNumber:$('v-batch').value,scheduledDate:$('v-sched').value,appliedDate:$('v-applied').value,
notes:$('v-notes').value,status:$('v-applied').value?'applied':'pending'};
if(!o.vaccineName){toast(t('required'),true);return;}
if(id){const i=D.vaccines.findIndex(v=>v.id===id);if(i>=0)D.vaccines[i]={...D.vaccines[i],...o};}
else{o.id=genId();D.vaccines.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderSanidad();
}
function markVaccineApplied(id){
const D=loadData();const v=D.vaccines.find(x=>x.id===id);if(!v)return;
v.appliedDate=todayStr();v.status='applied';saveData(D);toast(t('cfg_saved'));renderSanidad();
}
function deleteVaccine(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.vaccines=D.vaccines.filter(v=>v.id!==id);saveData(D);toast(t('cfg_saved'));renderSanidad();}

function renderMedicationsTab(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('med_title')}</h3>
<button class="btn btn-primary btn-sm" onclick="showMedForm()">${t('med_add')}</button></div>`;
if(!D.medications.length)return h+emptyState('üíä',t('no_data'));
const today=todayStr();
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('prod_flock')}</th><th>${t('med_name')}</th><th>${t('med_reason')}</th><th>${t('med_dosage')}</th><th>${t('med_start')}</th><th>${t('med_end')}</th><th>${t('med_withdrawal')}</th><th>${t('med_withdrawal_end')}</th><th>${t('status')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.medications.forEach(m=>{const f=D.flocks.find(x=>x.id===m.flockId);
const inWD=m.withdrawalEnd&&m.withdrawalEnd>=today;
h+=`<tr><td>${f?f.name:'-'}</td><td>${m.name}</td><td>${m.reason||'-'}</td><td>${m.dosage||'-'}</td>
<td>${fmtDate(m.startDate)}</td><td>${fmtDate(m.endDate)}</td><td>${m.withdrawalDays||'-'}</td>
<td>${fmtDate(m.withdrawalEnd)}</td>
<td>${inWD?'<span class="badge badge-warning">'+t('med_in_withdrawal')+'</span>':'<span class="badge badge-success">OK</span>'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showMedForm('${m.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteMed('${m.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';return h;
}
function showMedForm(id){
const D=loadData();const m=id?D.medications.find(x=>x.id===id):null;
openModal(m?t('edit'):t('med_add'),`
<div class="form-row"><div class="form-group"><label>${t('prod_flock')}</label><select id="m-flock">${flockSelect(m?m.flockId:'')}</select></div>
<div class="form-group"><label>${t('med_name')}</label><select id="m-name" onchange="onMedSelect()">${catalogSelect(CATALOGS.medications,m?m.name:'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('med_reason')}</label><select id="m-reason">${catalogSelect(CATALOGS.diseases,m?m.reason||'':'')}</select></div>
<div class="form-group"><label>${t('med_dosage')}</label><input id="m-dosage" value="${m?m.dosage||'':''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('med_start')}</label><input type="date" id="m-start" value="${m?m.startDate:''}"></div>
<div class="form-group"><label>${t('med_end')}</label><input type="date" id="m-end" value="${m?m.endDate:''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('med_withdrawal')}</label><input type="number" id="m-wd" value="${m?m.withdrawalDays||'':''}" min="0"></div>
<div class="form-group"><label>${t('notes')}</label><input id="m-notes" value="${m?m.notes||'':''}"></div></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveMed('${id||''}')">${t('save')}</button></div>`);
}
function saveMed(id){
const D=loadData();const o={flockId:$('m-flock').value,name:$('m-name').value,reason:$('m-reason').value,
dosage:$('m-dosage').value,startDate:$('m-start').value,endDate:$('m-end').value,
withdrawalDays:parseInt($('m-wd').value)||0,notes:$('m-notes').value};
if(!o.name){toast(t('required'),true);return;}
if(o.endDate&&o.withdrawalDays){const d=new Date(o.endDate+'T12:00:00');d.setDate(d.getDate()+o.withdrawalDays);o.withdrawalEnd=d.toISOString().substring(0,10);}else{o.withdrawalEnd='';}
if(id){const i=D.medications.findIndex(m=>m.id===id);if(i>=0)D.medications[i]={...D.medications[i],...o};}
else{o.id=genId();D.medications.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderSanidad();
}
function deleteMed(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.medications=D.medications.filter(m=>m.id!==id);saveData(D);toast(t('cfg_saved'));renderSanidad();}

function renderOutbreaksTab(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('out_title')}</h3>
<button class="btn btn-primary btn-sm" onclick="showOutbreakForm()">${t('out_add')}</button></div>`;
if(!D.outbreaks.length)return h+emptyState('ü¶†',t('no_data'));
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('prod_flock')}</th><th>${t('out_disease')}</th><th>${t('out_start')}</th><th>${t('out_end')}</th><th>${t('out_affected')}</th><th>${t('out_deaths')}</th><th>${t('out_loss')}</th><th>${t('status')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.outbreaks.forEach(o=>{const f=D.flocks.find(x=>x.id===o.flockId);
h+=`<tr><td>${f?f.name:'-'}</td><td>${o.disease}</td><td>${fmtDate(o.startDate)}</td><td>${fmtDate(o.endDate)}</td>
<td>${fmtNum(o.affected||0)}</td><td>${o.deaths?'<span style="color:var(--danger)">'+o.deaths+'</span>':'-'}</td>
<td>${fmtMoney(o.economicLoss||0)}</td><td>${statusBadge(o.status)}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showOutbreakForm('${o.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteOutbreak('${o.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';return h;
}
function showOutbreakForm(id){
const D=loadData();const o=id?D.outbreaks.find(x=>x.id===id):null;
openModal(o?t('edit'):t('out_add'),`
<div class="form-row"><div class="form-group"><label>${t('prod_flock')}</label><select id="o-flock">${flockSelect(o?o.flockId:'')}</select></div>
<div class="form-group"><label>${t('out_disease')}</label><select id="o-disease">${catalogSelect(CATALOGS.diseases,o?o.disease:'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('out_start')}</label><input type="date" id="o-start" value="${o?o.startDate:todayStr()}"></div>
<div class="form-group"><label>${t('out_end')}</label><input type="date" id="o-end" value="${o?o.endDate||'':''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('out_affected')}</label><input type="number" id="o-affected" value="${o?o.affected||'':''}" min="0"></div>
<div class="form-group"><label>${t('out_deaths')}</label><input type="number" id="o-deaths" value="${o?o.deaths||'':''}" min="0"></div></div>
<div class="form-row"><div class="form-group"><label>${t('out_loss')}</label><input type="number" id="o-loss" value="${o?o.economicLoss||'':''}" min="0"></div>
<div class="form-group"><label>${t('status')}</label><select id="o-status">
<option value="active"${o&&o.status==='active'?' selected':''}>${t('out_active')}</option>
<option value="controlled"${o&&o.status==='controlled'?' selected':''}>${t('out_controlled')}</option>
<option value="resolved"${o&&o.status==='resolved'?' selected':''}>${t('out_resolved')}</option></select></div></div>
<div class="form-group"><label>${t('out_symptoms')}</label><textarea id="o-symptoms">${o?o.symptoms||'':''}</textarea></div>
<div class="form-group"><label>${t('out_treatment')}</label><textarea id="o-treatment">${o?o.treatment||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveOutbreak('${id||''}')">${t('save')}</button></div>`);
}
function saveOutbreak(id){
const D=loadData();const o={flockId:$('o-flock').value,disease:$('o-disease').value,startDate:$('o-start').value,
endDate:$('o-end').value,affected:parseInt($('o-affected').value)||0,deaths:parseInt($('o-deaths').value)||0,
economicLoss:parseFloat($('o-loss').value)||0,status:$('o-status').value,
symptoms:$('o-symptoms').value,treatment:$('o-treatment').value};
if(!o.disease){toast(t('required'),true);return;}
if(id){const i=D.outbreaks.findIndex(x=>x.id===id);if(i>=0)D.outbreaks[i]={...D.outbreaks[i],...o};}
else{o.id=genId();D.outbreaks.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderSanidad();
}
function deleteOutbreak(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.outbreaks=D.outbreaks.filter(o=>o.id!==id);saveData(D);toast(t('cfg_saved'));renderSanidad();}
// === END SANIDAD ===

// === FEED MODULE ===
let currentFeedTab='purchases';
function renderFeed(){
const D=loadData();
const totalPurchased=D.feed.purchases.reduce((s,p)=>s+(p.quantityKg||0),0);
const totalConsumed=D.feed.consumption.reduce((s,c)=>s+(c.quantityKg||0),0);
const stock=totalPurchased-totalConsumed;
const isLow=stock<(D.settings.minFeedStock||50);
let h=`<div class="page-header"><h2>${t('feed_title')}</h2></div>`;
h+=`<div class="kpi-grid">`;
h+=kpi(t('feed_stock'),fmtNum(stock,1)+' kg','',isLow?'danger':'');
h+=kpi(t('feed_purchases'),fmtNum(totalPurchased,1)+' kg',fmtMoney(D.feed.purchases.reduce((s,p)=>s+(p.cost||0),0))+' '+t('total'));
h+=kpi(t('feed_consumption'),fmtNum(totalConsumed,1)+' kg','');
const d30=new Date();d30.setDate(d30.getDate()-30);const d30s=d30.toISOString().substring(0,10);
const f30=D.feed.consumption.filter(c=>c.date>=d30s);const tF30=f30.reduce((s,c)=>s+(c.quantityKg||0),0);
const p30=D.dailyProduction.filter(p=>p.date>=d30s);const tE30=p30.reduce((s,p)=>s+(p.eggsCollected||0),0)*0.06;
const fcr=tE30>0?(tF30/tE30):0;
h+=kpi(t('kpi_fcr'),fcr>0?fmtNum(fcr,2):'-','30d',fcr>3?'danger':fcr>2.5?'warning':'');
h+='</div>';
h+=`<div class="tabs"><div class="tab${currentFeedTab==='purchases'?' active':''}" onclick="currentFeedTab='purchases';renderFeed()">üì¶ ${t('feed_purchases')}</div>
<div class="tab${currentFeedTab==='consumption'?' active':''}" onclick="currentFeedTab='consumption';renderFeed()">üçΩÔ∏è ${t('feed_consumption')}</div></div>`;
if(currentFeedTab==='purchases')h+=renderFeedPurchases(D);
else h+=renderFeedConsumption(D);
$('sec-alimento').innerHTML=h;
}
function renderFeedPurchases(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('feed_purchases')}</h3>
<button class="btn btn-primary btn-sm" onclick="showFeedPurchaseForm()">${t('feed_add_purchase')}</button></div>`;
if(!D.feed.purchases.length)return h+emptyState('üì¶',t('no_data'));
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('feed_type')}</th><th>${t('feed_qty')}</th><th>${t('feed_cost')}</th><th>$/kg</th><th>${t('feed_supplier')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.feed.purchases.sort((a,b)=>b.date.localeCompare(a.date)).forEach(p=>{
const ppkg=p.quantityKg>0?(p.cost/p.quantityKg):0;
h+=`<tr><td>${fmtDate(p.date)}</td><td>${p.type||'-'}</td><td>${fmtNum(p.quantityKg,1)}</td>
<td>${fmtMoney(p.cost)}</td><td>${fmtMoney(ppkg)}</td><td>${p.supplier||'-'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showFeedPurchaseForm('${p.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteFeedPurchase('${p.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';return h;
}
function showFeedPurchaseForm(id){
const D=loadData();const p=id?D.feed.purchases.find(x=>x.id===id):null;
openModal(p?t('edit'):t('feed_add_purchase'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="fp-date" value="${p?p.date:todayStr()}"></div>
<div class="form-group"><label>${t('feed_type')}</label><select id="fp-type">${feedTypeSelect(p?p.type||'':'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('feed_qty')}</label><input type="number" id="fp-qty" value="${p?p.quantityKg:''}" step="0.1" min="0"></div>
<div class="form-group"><label>${t('feed_cost')}</label><input type="number" id="fp-cost" value="${p?p.cost:''}" min="0"></div></div>
<div class="form-group"><label>${t('feed_supplier')}</label><select id="fp-sup">${supplierSelect(p?p.supplier||'':'')}</select></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveFeedPurchase('${id||''}')">${t('save')}</button></div>`);
}
function saveFeedPurchase(id){
const D=loadData();const o={date:$('fp-date').value,type:$('fp-type').value,
quantityKg:parseFloat($('fp-qty').value)||0,cost:parseFloat($('fp-cost').value)||0,supplier:$('fp-sup').value};
if(!o.date){toast(t('required'),true);return;}
if(id){const i=D.feed.purchases.findIndex(p=>p.id===id);if(i>=0)D.feed.purchases[i]={...D.feed.purchases[i],...o};}
else{o.id=genId();D.feed.purchases.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderFeed();
}
function deleteFeedPurchase(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.feed.purchases=D.feed.purchases.filter(p=>p.id!==id);saveData(D);toast(t('cfg_saved'));renderFeed();}

function renderFeedConsumption(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('feed_consumption')}</h3>
<button class="btn btn-primary btn-sm" onclick="showFeedConsForm()">${t('feed_add_consumption')}</button></div>`;
if(!D.feed.consumption.length)return h+emptyState('üçΩÔ∏è',t('no_data'));
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('feed_flock')}</th><th>${t('feed_qty')}</th><th>${t('feed_type')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.feed.consumption.sort((a,b)=>b.date.localeCompare(a.date)).forEach(c=>{const f=D.flocks.find(x=>x.id===c.flockId);
h+=`<tr><td>${fmtDate(c.date)}</td><td>${f?f.name:'-'}</td><td>${fmtNum(c.quantityKg,1)} kg</td><td>${c.type||'-'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showFeedConsForm('${c.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteFeedCons('${c.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';return h;
}
function showFeedConsForm(id){
const D=loadData();const c=id?D.feed.consumption.find(x=>x.id===id):null;
openModal(c?t('edit'):t('feed_add_consumption'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="fc-date" value="${c?c.date:todayStr()}"></div>
<div class="form-group"><label>${t('feed_flock')}</label><select id="fc-flock">${flockSelect(c?c.flockId:'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('feed_qty')}</label><input type="number" id="fc-qty" value="${c?c.quantityKg:''}" step="0.1" min="0"></div>
<div class="form-group"><label>${t('feed_type')}</label><select id="fc-type">${feedTypeSelect(c?c.type||'':'',c?c.flockId:'')}</select></div></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveFeedCons('${id||''}')">${t('save')}</button></div>`);
}
function saveFeedCons(id){
const D=loadData();const o={date:$('fc-date').value,flockId:$('fc-flock').value,
quantityKg:parseFloat($('fc-qty').value)||0,type:$('fc-type').value};
if(!o.date||!o.flockId){toast(t('required'),true);return;}
if(id){const i=D.feed.consumption.findIndex(c=>c.id===id);if(i>=0)D.feed.consumption[i]={...D.feed.consumption[i],...o};}
else{o.id=genId();D.feed.consumption.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderFeed();
}
function deleteFeedCons(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.feed.consumption=D.feed.consumption.filter(c=>c.id!==id);saveData(D);toast(t('cfg_saved'));renderFeed();}
// === END FEED ===

// === CLIENTS MODULE ===
function renderClients(){
const D=loadData();
let h=`<div class="page-header"><h2>${t('cli_title')}</h2><button class="btn btn-primary" onclick="showClientForm()">${t('cli_add')}</button></div>`;
h+=`<div class="kpi-grid">${kpi(t('cli_total'),fmtNum(D.clients.length))}</div>`;
if(!D.clients.length){h+=emptyState('üë•',t('no_data'),t('cli_add'),'showClientForm()');}
else{
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('name')}</th><th>${t('phone')}</th><th>${t('email')}</th><th>${t('cli_route')}</th><th>${t('cli_price')} (S/M/L/XL/J)</th><th>${t('notes')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.clients.forEach(c=>{
const prices=[c.priceS||'-',c.priceM||'-',c.priceL||'-',c.priceXL||'-',c.priceJumbo||'-'].join(' / ');
h+=`<tr><td><strong>${c.name}</strong></td><td>${c.phone||'-'}</td><td>${c.email||'-'}</td><td>${c.route||'-'}</td>
<td>${prices}</td><td>${c.notes||'-'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showClientForm('${c.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteClient('${c.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';}
$('sec-clientes').innerHTML=h;
}
function showClientForm(id){
const D=loadData();const c=id?D.clients.find(x=>x.id===id):null;
openModal(c?t('edit'):t('cli_add'),`
<div class="form-row"><div class="form-group"><label>${t('name')}</label><input id="cl-name" value="${c?c.name:''}"></div>
<div class="form-group"><label>${t('phone')}</label><input id="cl-phone" value="${c?c.phone||'':''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('email')}</label><input id="cl-email" value="${c?c.email||'':''}"></div>
<div class="form-group"><label>${t('cli_route')}</label><select id="cl-route">${routeSelect(c?c.route||'':'')}</select></div></div>
<div class="form-group"><label>${t('address')}</label><input id="cl-addr" value="${c?c.address||'':''}"></div>
<p style="font-weight:600;margin:12px 0 8px">${t('cli_price')} (${currency()}/huevo)</p>
<div class="form-row-3"><div class="form-group"><label>S</label><input type="number" id="cl-ps" value="${c?c.priceS||'':''}" step="1" min="0"></div>
<div class="form-group"><label>M</label><input type="number" id="cl-pm" value="${c?c.priceM||'':''}" step="1" min="0"></div>
<div class="form-group"><label>L</label><input type="number" id="cl-pl" value="${c?c.priceL||'':''}" step="1" min="0"></div></div>
<div class="form-row"><div class="form-group"><label>XL</label><input type="number" id="cl-pxl" value="${c?c.priceXL||'':''}" step="1" min="0"></div>
<div class="form-group"><label>Jumbo</label><input type="number" id="cl-pj" value="${c?c.priceJumbo||'':''}" step="1" min="0"></div></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="cl-notes">${c?c.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveClient('${id||''}')">${t('save')}</button></div>`);
}
function saveClient(id){
const D=loadData();const o={name:$('cl-name').value,phone:$('cl-phone').value,email:$('cl-email').value,
route:$('cl-route').value,address:$('cl-addr').value,
priceS:parseFloat($('cl-ps').value)||0,priceM:parseFloat($('cl-pm').value)||0,priceL:parseFloat($('cl-pl').value)||0,
priceXL:parseFloat($('cl-pxl').value)||0,priceJumbo:parseFloat($('cl-pj').value)||0,notes:$('cl-notes').value};
if(!o.name){toast(t('required'),true);return;}
if(id){const i=D.clients.findIndex(c=>c.id===id);if(i>=0)D.clients[i]={...D.clients[i],...o};}
else{o.id=genId();D.clients.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderClients();
}
function deleteClient(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.clients=D.clients.filter(c=>c.id!==id);saveData(D);toast(t('cfg_saved'));renderClients();}
// === END CLIENTS ===

// === FINANCES MODULE ===
function renderFinances(){
const D=loadData();
let h=`<div class="page-header"><h2>${t('fin_title')}</h2></div>`;
h+=`<div class="tabs"><div class="tab${currentFinanceTab==='income'?' active':''}" onclick="currentFinanceTab='income';renderFinances()">üìà ${t('fin_income')}</div>
<div class="tab${currentFinanceTab==='expenses'?' active':''}" onclick="currentFinanceTab='expenses';renderFinances()">üìâ ${t('fin_expenses')}</div>
<div class="tab${currentFinanceTab==='receivables'?' active':''}" onclick="currentFinanceTab='receivables';renderFinances()">üìã ${t('fin_receivables')}</div>
<div class="tab${currentFinanceTab==='summary'?' active':''}" onclick="currentFinanceTab='summary';renderFinances()">üìä ${t('fin_summary')}</div></div>`;
if(currentFinanceTab==='income')h+=renderFinIncome(D);
else if(currentFinanceTab==='expenses')h+=renderFinExpenses(D);
else if(currentFinanceTab==='receivables')h+=renderFinReceivables(D);
else h+=renderFinSummary(D);
$('sec-finanzas').innerHTML=h;
}
function renderFinIncome(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('fin_income')}</h3>
<button class="btn btn-primary btn-sm" onclick="showIncomeForm()">${t('fin_add_income')}</button></div>`;
if(!D.finances.income.length)return h+emptyState('üìà',t('no_data'));
const tot=D.finances.income.reduce((s,i)=>s+((i.quantity||0)*(i.unitPrice||0)||(i.amount||0)),0);
h+=`<div class="kpi-grid">${kpi(t('fin_total_income'),fmtMoney(tot))}</div>`;
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('fin_type')}</th><th>${t('fin_qty')}</th><th>${t('fin_unit_price')}</th><th>${t('total')}</th><th>${t('fin_client')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.finances.income.sort((a,b)=>b.date.localeCompare(a.date)).forEach(i=>{
const cl=D.clients.find(c=>c.id===i.clientId);const amt=(i.quantity||0)*(i.unitPrice||0)||(i.amount||0);
h+=`<tr><td>${fmtDate(i.date)}</td><td>${t('fin_type_'+i.type)||i.type||'-'}</td><td>${fmtNum(i.quantity||0)}</td>
<td>${fmtMoney(i.unitPrice||0)}</td><td><strong>${fmtMoney(amt)}</strong></td><td>${cl?cl.name:i.clientName||'-'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showIncomeForm('${i.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteIncome('${i.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';return h;
}
function showIncomeForm(id){
const D=loadData();const i=id?D.finances.income.find(x=>x.id===id):null;
openModal(i?t('edit'):t('fin_add_income'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="fi-date" value="${i?i.date:todayStr()}"></div>
<div class="form-group"><label>${t('fin_type')}</label><select id="fi-type">
<option value="eggs"${i&&i.type==='eggs'?' selected':''}>${t('fin_type_eggs')}</option>
<option value="birds"${i&&i.type==='birds'?' selected':''}>${t('fin_type_birds')}</option>
<option value="manure"${i&&i.type==='manure'?' selected':''}>${t('fin_type_manure')}</option>
<option value="other"${i&&i.type==='other'?' selected':''}>${t('fin_type_other')}</option></select></div></div>
<div class="form-row"><div class="form-group"><label>${t('fin_qty')}</label><input type="number" id="fi-qty" value="${i?i.quantity||'':''}" min="0"></div>
<div class="form-group"><label>${t('fin_unit_price')}</label><input type="number" id="fi-price" value="${i?i.unitPrice||'':''}" min="0"></div></div>
<div class="form-group"><label>${t('fin_client')}</label><select id="fi-client">${clientSelect(i?i.clientId:'')}</select></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="fi-notes">${i?i.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveIncome('${id||''}')">${t('save')}</button></div>`);
}
function saveIncome(id){
const D=loadData();const o={date:$('fi-date').value,type:$('fi-type').value,
quantity:parseInt($('fi-qty').value)||0,unitPrice:parseFloat($('fi-price').value)||0,
clientId:$('fi-client').value,notes:$('fi-notes').value};
if(!o.date){toast(t('required'),true);return;}
if(id){const i=D.finances.income.findIndex(x=>x.id===id);if(i>=0)D.finances.income[i]={...D.finances.income[i],...o};}
else{o.id=genId();D.finances.income.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderFinances();
}
function deleteIncome(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.finances.income=D.finances.income.filter(i=>i.id!==id);saveData(D);toast(t('cfg_saved'));renderFinances();}

function renderFinExpenses(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('fin_expenses')}</h3>
<button class="btn btn-primary btn-sm" onclick="showExpenseForm()">${t('fin_add_expense')}</button></div>`;
if(!D.finances.expenses.length)return h+emptyState('üìâ',t('no_data'));
const tot=D.finances.expenses.reduce((s,e)=>s+(e.amount||0),0);
h+=`<div class="kpi-grid">${kpi(t('fin_total_expenses'),fmtMoney(tot),'','danger')}</div>`;
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('fin_category')}</th><th>${t('fin_description')}</th><th>${t('fin_amount')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.finances.expenses.sort((a,b)=>b.date.localeCompare(a.date)).forEach(e=>{
h+=`<tr><td>${fmtDate(e.date)}</td><td>${t('fin_cat_'+e.category)||e.category||'-'}</td><td>${e.description||'-'}</td>
<td><strong>${fmtMoney(e.amount)}</strong></td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showExpenseForm('${e.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteExpense('${e.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';return h;
}
function showExpenseForm(id){
const D=loadData();const e=id?D.finances.expenses.find(x=>x.id===id):null;
const cats=['feed','vaccines','transport','labor','infrastructure','other'];
openModal(e?t('edit'):t('fin_add_expense'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="fe-date" value="${e?e.date:todayStr()}"></div>
<div class="form-group"><label>${t('fin_category')}</label><select id="fe-cat" onchange="onExpenseCatChange()">${cats.map(c=>`<option value="${c}"${e&&e.category===c?' selected':''}>${t('fin_cat_'+c)}</option>`).join('')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('fin_description')}</label><select id="fe-desc">${catalogSelect(CATALOGS.expenseDescriptions[e?e.category:'feed']||CATALOGS.expenseDescriptions.feed,e?e.description||'':'')}</select></div>
<div class="form-group"><label>${t('fin_amount')}</label><input type="number" id="fe-amt" value="${e?e.amount:''}" min="0"></div></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="fe-notes">${e?e.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveExpense('${id||''}')">${t('save')}</button></div>`);
}
function saveExpense(id){
const D=loadData();const o={date:$('fe-date').value,category:$('fe-cat').value,
description:$('fe-desc').value,amount:parseFloat($('fe-amt').value)||0,notes:$('fe-notes').value};
if(!o.date){toast(t('required'),true);return;}
if(id){const i=D.finances.expenses.findIndex(e=>e.id===id);if(i>=0)D.finances.expenses[i]={...D.finances.expenses[i],...o};}
else{o.id=genId();D.finances.expenses.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderFinances();
}
function deleteExpense(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.finances.expenses=D.finances.expenses.filter(e=>e.id!==id);saveData(D);toast(t('cfg_saved'));renderFinances();}

function renderFinReceivables(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('fin_receivables')}</h3>
<button class="btn btn-primary btn-sm" onclick="showReceivableForm()">${t('fin_add_receivable')}</button></div>`;
if(!D.finances.receivables.length)return h+emptyState('üìã',t('no_data'));
const pending=D.finances.receivables.filter(r=>!r.paid);const tot=pending.reduce((s,r)=>s+(r.amount||0),0);
h+=`<div class="kpi-grid">${kpi(t('fin_receivables'),fmtMoney(tot),pending.length+' '+t('vac_pending').toLowerCase(),'warning')}</div>`;
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('fin_client')}</th><th>${t('fin_description')}</th><th>${t('fin_amount')}</th><th>${t('fin_due_date')}</th><th>${t('fin_paid')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.finances.receivables.sort((a,b)=>b.date.localeCompare(a.date)).forEach(r=>{
const cl=D.clients.find(c=>c.id===r.clientId);
h+=`<tr><td>${fmtDate(r.date)}</td><td>${cl?cl.name:r.clientName||'-'}</td><td>${r.description||'-'}</td>
<td><strong>${fmtMoney(r.amount)}</strong></td><td>${fmtDate(r.dueDate)}</td>
<td><input type="checkbox" ${r.paid?'checked':''} onchange="toggleReceivablePaid('${r.id}',this.checked)"></td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showReceivableForm('${r.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteReceivable('${r.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';return h;
}
function showReceivableForm(id){
const D=loadData();const r=id?D.finances.receivables.find(x=>x.id===id):null;
openModal(r?t('edit'):t('fin_add_receivable'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="fr-date" value="${r?r.date:todayStr()}"></div>
<div class="form-group"><label>${t('fin_due_date')}</label><input type="date" id="fr-due" value="${r?r.dueDate||'':''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('fin_client')}</label><select id="fr-client">${clientSelect(r?r.clientId:'')}</select></div>
<div class="form-group"><label>${t('fin_amount')}</label><input type="number" id="fr-amt" value="${r?r.amount:''}" min="0"></div></div>
<div class="form-group"><label>${t('fin_description')}</label><input id="fr-desc" value="${r?r.description||'':''}"></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveReceivable('${id||''}')">${t('save')}</button></div>`);
}
function saveReceivable(id){
const D=loadData();const o={date:$('fr-date').value,dueDate:$('fr-due').value,clientId:$('fr-client').value,
amount:parseFloat($('fr-amt').value)||0,description:$('fr-desc').value,paid:false};
if(!o.date){toast(t('required'),true);return;}
if(id){const i=D.finances.receivables.findIndex(r=>r.id===id);if(i>=0){o.paid=D.finances.receivables[i].paid;D.finances.receivables[i]={...D.finances.receivables[i],...o};}}
else{o.id=genId();D.finances.receivables.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderFinances();
}
function toggleReceivablePaid(id,paid){const D=loadData();const r=D.finances.receivables.find(x=>x.id===id);if(r){r.paid=paid;saveData(D);}}
function deleteReceivable(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.finances.receivables=D.finances.receivables.filter(r=>r.id!==id);saveData(D);toast(t('cfg_saved'));renderFinances();}

function renderFinSummary(D){
const mo=todayStr().substring(0,7);
const mInc=D.finances.income.filter(i=>i.date&&i.date.startsWith(mo)).reduce((s,i)=>s+((i.quantity||0)*(i.unitPrice||0)||(i.amount||0)),0);
const mExp=D.finances.expenses.filter(e=>e.date&&e.date.startsWith(mo)).reduce((s,e)=>s+(e.amount||0),0);
const net=mInc-mExp;
const tEggs=D.dailyProduction.reduce((s,p)=>s+(p.eggsCollected||0),0);
const tExp=D.finances.expenses.reduce((s,e)=>s+(e.amount||0),0);
const cpe=tEggs>0?tExp/tEggs:0;
const avgPrice=D.finances.income.length>0?D.finances.income.reduce((s,i)=>s+(i.unitPrice||0),0)/D.finances.income.length:0;
const breakEven=avgPrice>0?Math.ceil(tExp/avgPrice):0;
let h=`<div class="kpi-grid">`;
h+=kpi(t('fin_total_income')+' ('+mo+')',fmtMoney(mInc),'','secondary');
h+=kpi(t('fin_total_expenses')+' ('+mo+')',fmtMoney(mExp),'','danger');
h+=kpi(t('fin_net')+' ('+mo+')',fmtMoney(net),'',net<0?'danger':'');
h+=kpi(t('fin_cost_per_egg'),fmtMoney(cpe),'global','accent');
h+=kpi(t('fin_break_even'),fmtNum(breakEven)+' '+t('eggs_unit'),'global','warning');
h+='</div>';
// Monthly breakdown
const months={};D.finances.income.forEach(i=>{const m=i.date?.substring(0,7);if(!m)return;if(!months[m])months[m]={income:0,expenses:0};months[m].income+=(i.quantity||0)*(i.unitPrice||0)||(i.amount||0);});
D.finances.expenses.forEach(e=>{const m=e.date?.substring(0,7);if(!m)return;if(!months[m])months[m]={income:0,expenses:0};months[m].expenses+=(e.amount||0);});
const mKeys=Object.keys(months).sort().reverse();
if(mKeys.length){
h+='<div class="card"><h3>'+t('fin_summary')+' '+t('fin_month')+'</h3><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('fin_month')}</th><th>${t('fin_income')}</th><th>${t('fin_expenses')}</th><th>${t('fin_net')}</th></tr></thead><tbody>`;
mKeys.forEach(m=>{const d=months[m];const n=d.income-d.expenses;
h+=`<tr><td>${m}</td><td style="color:var(--success)">${fmtMoney(d.income)}</td><td style="color:var(--danger)">${fmtMoney(d.expenses)}</td>
<td style="font-weight:700;color:${n<0?'var(--danger)':'var(--success)'}">${fmtMoney(n)}</td></tr>`;});
h+='</tbody></table></div></div>';}
// Expense by category
const cats={};D.finances.expenses.forEach(e=>{const c=e.category||'other';cats[c]=(cats[c]||0)+(e.amount||0);});
if(Object.keys(cats).length){
h+='<div class="card"><h3>'+t('fin_expenses')+' / '+t('fin_category')+'</h3>';
Object.entries(cats).sort((a,b)=>b[1]-a[1]).forEach(([c,v])=>{const pct=tExp>0?(v/tExp*100):0;
h+=`<div class="stat-row"><span class="stat-label">${t('fin_cat_'+c)||c}</span><span class="stat-value">${fmtMoney(v)} (${fmtNum(pct,1)}%)</span></div>`;});
h+='</div>';}
// CSV export
h+=`<div class="card"><button class="btn btn-secondary" onclick="exportFinCSV()">${t('export_csv')}</button></div>`;
return h;
}
function exportFinCSV(){
const D=loadData();let csv=t('fin_type')+','+t('date')+','+t('fin_category')+','+t('fin_description')+','+t('fin_qty')+','+t('fin_unit_price')+','+t('fin_amount')+'\n';
D.finances.income.forEach(i=>{const a=(i.quantity||0)*(i.unitPrice||0);csv+=`${t('csv_income')},${i.date},${i.type||''},${(i.notes||'').replace(/,/g,';')},${i.quantity||0},${i.unitPrice||0},${a}\n`;});
D.finances.expenses.forEach(e=>{csv+=`${t('csv_expense')},${e.date},${e.category||''},${(e.description||'').replace(/,/g,';')},,,${e.amount||0}\n`;});
const blob=new Blob([csv],{type:'text/csv'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);
a.download='egglogu_finanzas_'+todayStr()+'.csv';a.click();toast(t('cfg_exported'));
}
// === END FINANCES ===

// === ANALYSIS MODULE ===
let currentAnaTab='comparison';
function renderAnalysis(){
const D=loadData();
let h=`<div class="page-header"><h2>${t('ana_title')}</h2></div>`;
h+=`<div class="tabs"><div class="tab${currentAnaTab==='comparison'?' active':''}" onclick="currentAnaTab='comparison';renderAnalysis()">üîÑ ${t('ana_comparison')}</div>
<div class="tab${currentAnaTab==='seasonality'?' active':''}" onclick="currentAnaTab='seasonality';renderAnalysis()">üìÖ ${t('ana_seasonality')}</div>
<div class="tab${currentAnaTab==='profitability'?' active':''}" onclick="currentAnaTab='profitability';renderAnalysis()">üí∞ ${t('ana_profitability')}</div>
<div class="tab${currentAnaTab==='kpi_evo'?' active':''}" onclick="currentAnaTab='kpi_evo';renderAnalysis()">üìä ${t('ana_kpi_evolution')}</div>
<div class="tab${currentAnaTab==='predictions'?' active':''}" onclick="currentAnaTab='predictions';renderAnalysis()">ü§ñ ${t('pred_title')}</div></div>`;
if(currentAnaTab==='comparison')h+=renderAnaComparison(D);
else if(currentAnaTab==='seasonality')h+=renderAnaSeasonality(D);
else if(currentAnaTab==='profitability')h+=renderAnaProfitability(D);
else if(currentAnaTab==='predictions')h+=renderPredictionsTab(D);
else h+=renderAnaKpiEvo(D);
$('sec-analisis').innerHTML=h;
}
function renderAnaComparison(D){
if(!D.flocks.length)return emptyState('üîÑ',t('no_data'));
let h='<div class="card"><h3>'+t('ana_comparison')+'</h3><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('flock_name')}</th><th>${t('flock_count')}</th><th>${t('flock_current')}</th><th>${t('kpi_henday')} (7d)</th><th>FCR (30d)</th><th>${t('kpi_mortality')} %</th><th>${t('flock_health')}</th></tr></thead><tbody>`;
const stats=D.flocks.map(f=>{
const cur=activeHensByFlock(f.id);const l7=D.dailyProduction.filter(p=>p.flockId===f.id).sort((a,b)=>b.date.localeCompare(a.date)).slice(0,7);
const avgE=l7.length>0?l7.reduce((s,p)=>s+(p.eggsCollected||0),0)/l7.length:0;
const hd=cur>0?(avgE/cur*100):0;
const d30=new Date();d30.setDate(d30.getDate()-30);const d30s=d30.toISOString().substring(0,10);
const f30=D.feed.consumption.filter(c=>c.flockId===f.id&&c.date>=d30s);const e30=D.dailyProduction.filter(p=>p.flockId===f.id&&p.date>=d30s);
const tfkg=f30.reduce((s,c)=>s+(c.quantityKg||0),0);const tekg=e30.reduce((s,p)=>s+(p.eggsCollected||0),0)*0.06;
const fcr=tekg>0?tfkg/tekg:0;
const deaths=D.dailyProduction.filter(p=>p.flockId===f.id).reduce((s,p)=>s+(p.deaths||0),0);
const mort=f.count>0?(deaths/f.count*100):0;const hs=healthScore(f.id);
return{f,cur,hd,fcr,mort,hs};
});
stats.sort((a,b)=>b.hd-a.hd);
stats.forEach(s=>{
h+=`<tr><td><strong>${s.f.name}</strong></td><td>${fmtNum(s.f.count)}</td><td>${fmtNum(s.cur)}</td>
<td style="color:${s.hd>=80?'var(--success)':s.hd>=60?'var(--warning)':'var(--danger)'}">${fmtNum(s.hd,1)}%</td>
<td>${s.fcr>0?fmtNum(s.fcr,2):'-'}</td><td>${fmtNum(s.mort,1)}%</td><td>${healthBadge(s.hs)}</td></tr>`;});
h+='</tbody></table></div></div>';
if(stats.length>=2){
h+=`<div class="kpi-grid">${kpi(t('ana_best_flock'),stats[0].f.name,'Hen-Day: '+fmtNum(stats[0].hd,1)+'%')}`;
h+=kpi(t('ana_worst_flock'),stats[stats.length-1].f.name,'Hen-Day: '+fmtNum(stats[stats.length-1].hd,1)+'%','danger');
h+='</div>';}
return h;
}
function renderAnaSeasonality(D){
const months={};D.dailyProduction.forEach(p=>{const m=p.date?.substring(5,7);if(!m)return;if(!months[m])months[m]={eggs:0,days:new Set()};months[m].eggs+=(p.eggsCollected||0);months[m].days.add(p.date);});
if(!Object.keys(months).length)return emptyState('üìÖ',t('no_data'));
const mNames=Array.from({length:12},(_,i)=>new Date(2024,i,1).toLocaleDateString(locale(),{month:'short'}));
let h='<div class="card"><h3>'+t('ana_seasonality')+'</h3><div class="chart-container"><canvas id="chart-season"></canvas></div></div>';
h+='<div class="card"><div class="table-wrap"><table><thead><tr><th>'+t('fin_month')+'</th><th>'+t('prod_eggs')+'</th><th>'+t('avg_per_day')+'</th></tr></thead><tbody>';
for(let i=1;i<=12;i++){const k=String(i).padStart(2,'0');const d=months[k];
const avg=d?Math.round(d.eggs/d.days.size):0;
h+=`<tr><td>${mNames[i-1]}</td><td>${d?fmtNum(d.eggs):'-'}</td><td>${d?fmtNum(avg):'-'}</td></tr>`;}
h+='</tbody></table></div></div>';
$('sec-analisis').innerHTML?.includes('chart-season')||setTimeout(()=>{
const c=document.getElementById('chart-season');if(!c)return;
const labels=mNames;const vals=[];for(let i=1;i<=12;i++){const k=String(i).padStart(2,'0');const d=months[k];vals.push(d?Math.round(d.eggs/d.days.size):0);}
CHARTS.season=new Chart(c,{type:'bar',data:{labels,datasets:[{label:t('avg_per_day'),data:vals,backgroundColor:themeColor('--primary-light')}]},options:{responsive:true,maintainAspectRatio:false}});
},100);
return h;
}
function renderAnaProfitability(D){
if(!D.flocks.length)return emptyState('üí∞',t('no_data'));
let h='<div class="card"><h3>'+t('ana_profitability')+' / '+t('per_flock')+'</h3><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('flock_name')}</th><th>${t('prod_eggs')}</th><th>${t('fin_income')}</th><th>${t('fin_expenses')}</th><th>${t('fin_net')}</th><th>${t('fin_cost_per_egg')}</th></tr></thead><tbody>`;
D.flocks.forEach(f=>{
const eggs=D.dailyProduction.filter(p=>p.flockId===f.id).reduce((s,p)=>s+(p.eggsCollected||0),0);
const feedCost=D.feed.consumption.filter(c=>c.flockId===f.id).reduce((s,c)=>{
const price=D.feed.purchases.length>0?D.feed.purchases.reduce((s,p)=>s+(p.cost||0),0)/D.feed.purchases.reduce((s,p)=>s+(p.quantityKg||0),0):0;
return s+(c.quantityKg||0)*price;},0);
const inc=eggs*(D.finances.income.length>0?D.finances.income.reduce((s,i)=>s+(i.unitPrice||0),0)/D.finances.income.length:0);
const net=inc-feedCost-(f.cost||0);const cpe=eggs>0?(feedCost+(f.cost||0))/eggs:0;
h+=`<tr><td><strong>${f.name}</strong></td><td>${fmtNum(eggs)}</td><td style="color:var(--success)">${fmtMoney(inc)}</td>
<td style="color:var(--danger)">${fmtMoney(feedCost+(f.cost||0))}</td>
<td style="font-weight:700;color:${net<0?'var(--danger)':'var(--success)'}">${fmtMoney(net)}</td><td>${fmtMoney(cpe)}</td></tr>`;});
h+='</tbody></table></div></div>';
// Profitability by Egg Type
const typeGroups={};const channelGroups={};
D.dailyProduction.forEach(p=>{
const et=p.eggType||'conventional';const mc=p.marketChannel||'wholesale';
if(!typeGroups[et])typeGroups[et]={eggs:0,revenue:0};
if(!channelGroups[mc])channelGroups[mc]={eggs:0,revenue:0};
const eggs=p.eggsCollected||0;
const avgPrice=D.finances.income.length>0?D.finances.income.reduce((s,i)=>s+(i.unitPrice||0),0)/D.finances.income.length:0;
typeGroups[et].eggs+=eggs;typeGroups[et].revenue+=eggs*avgPrice;
channelGroups[mc].eggs+=eggs;channelGroups[mc].revenue+=eggs*avgPrice;
});
if(Object.keys(typeGroups).length>1||D.dailyProduction.some(p=>p.eggType)){
h+=`<div class="card"><h3>${t('ana_segment_profit')}</h3>`;
h+=`<h4 style="margin:8px 0">${t('prod_egg_type')}</h4><div class="table-wrap"><table><thead><tr><th>${t('prod_egg_type')}</th><th>${t('prod_eggs')}</th><th>${t('fin_income')}</th></tr></thead><tbody>`;
Object.entries(typeGroups).forEach(([k,v])=>{h+=`<tr><td>${t('prod_type_'+k)}</td><td>${fmtNum(v.eggs)}</td><td style="color:var(--success)">${fmtMoney(v.revenue)}</td></tr>`;});
h+='</tbody></table></div>';
h+=`<h4 style="margin:12px 0 8px">${t('prod_market')}</h4><div class="table-wrap"><table><thead><tr><th>${t('prod_market')}</th><th>${t('prod_eggs')}</th><th>${t('fin_income')}</th></tr></thead><tbody>`;
Object.entries(channelGroups).forEach(([k,v])=>{h+=`<tr><td>${t('prod_market_'+k)}</td><td>${fmtNum(v.eggs)}</td><td style="color:var(--success)">${fmtMoney(v.revenue)}</td></tr>`;});
h+='</tbody></table></div></div>';}
return h;
}
function renderAnaKpiEvo(D){
if(!D.kpiSnapshots.length)return emptyState('üìä',t('ana_no_snapshots'));
let h='<div class="card"><h3>'+t('ana_kpi_evolution')+'</h3><div class="chart-container"><canvas id="chart-kpi-evo"></canvas></div></div>';
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('kpi_active_hens')}</th><th>Hen-Day %</th><th>FCR</th><th>${t('kpi_mortality')} %</th><th>${t('kpi_cost_egg')}</th><th>${t('kpi_income_net')}</th></tr></thead><tbody>`;
D.kpiSnapshots.slice(-20).reverse().forEach(s=>{
h+=`<tr><td>${fmtDate(s.date)}</td><td>${fmtNum(s.activeHens)}</td><td>${fmtNum(s.henDay,1)}%</td>
<td>${fmtNum(s.fcr,2)}</td><td>${fmtNum(s.mortality,1)}%</td><td>${fmtMoney(s.costPerEgg)}</td><td>${fmtMoney(s.netIncome)}</td></tr>`;});
h+='</tbody></table></div></div>';
setTimeout(()=>{
const c=document.getElementById('chart-kpi-evo');if(!c)return;
const snaps=D.kpiSnapshots.slice(-30);
CHARTS.kpiEvo=new Chart(c,{type:'line',data:{labels:snaps.map(s=>s.date.substring(5)),datasets:[
{label:'Hen-Day %',data:snaps.map(s=>s.henDay),borderColor:themeColor('--primary'),tension:.3,yAxisID:'y'},
{label:'FCR',data:snaps.map(s=>s.fcr),borderColor:'#FF8F00',tension:.3,yAxisID:'y1'},
{label:t('kpi_mortality')+' %',data:snaps.map(s=>s.mortality),borderColor:'#C62828',tension:.3,yAxisID:'y'}
]},options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},
scales:{y:{position:'left',min:0},y1:{position:'right',grid:{drawOnChartArea:false}}}}});
},100);
return h;
}
// === END ANALYSIS ===

// === OPERATIONS MODULE ===
function renderOperations(){
const D=loadData();
let h=`<div class="page-header"><h2>${t('ops_title')}</h2></div>`;
h+=`<div class="tabs"><div class="tab${currentOpsTab==='checklist'?' active':''}" onclick="currentOpsTab='checklist';renderOperations()">‚úÖ ${t('ops_checklist')}</div>
<div class="tab${currentOpsTab==='logbook'?' active':''}" onclick="currentOpsTab='logbook';renderOperations()">üìì ${t('ops_logbook')}</div>
<div class="tab${currentOpsTab==='personnel'?' active':''}" onclick="currentOpsTab='personnel';renderOperations()">üë∑ ${t('ops_personnel')}</div></div>`;
if(currentOpsTab==='checklist')h+=renderOpsChecklist(D);
else if(currentOpsTab==='logbook')h+=renderOpsLogbook(D);
else h+=renderOpsPersonnel(D);
$('sec-operaciones').innerHTML=h;
}
function renderOpsChecklist(D){
const today=todayStr();
let todayItems=D.checklist.filter(c=>c.date===today);
if(!todayItems.length&&D.settings.defaultChecklist){
D.settings.defaultChecklist.forEach(task=>{
D.checklist.push({id:genId(),date:today,task,done:false});});
todayItems=D.checklist.filter(c=>c.date===today);saveData(D);
}
const done=todayItems.filter(c=>c.done).length;const total=todayItems.length;
let h=`<div class="kpi-grid">${kpi(t('ops_done'),done+'/'+total,total>0?fmtNum(done/total*100,0)+'%':'',done===total&&total>0?'':'warning')}</div>`;
h+=`<div class="card"><h3>${t('ops_checklist')} ‚Äî ${fmtDate(today)}</h3>`;
todayItems.forEach(c=>{
h+=`<div class="checklist-item${c.done?' done':''}"><input type="checkbox" ${c.done?'checked':''} onchange="toggleCheck('${c.id}',this.checked)"><span>${t(c.task)}</span>
<button class="btn btn-danger btn-sm" style="margin-left:auto" onclick="deleteCheck('${c.id}')">‚úï</button></div>`;});
h+=`<div style="margin-top:12px;display:flex;gap:8px"><input id="new-task" placeholder="${t('ops_task')}" style="flex:1;padding:8px;border:1px solid var(--border);border-radius:var(--radius)">
<button class="btn btn-primary btn-sm" onclick="addCheckTask()">${t('add')}</button></div></div>`;
// History
const dates=[...new Set(D.checklist.map(c=>c.date))].sort().reverse().filter(d=>d!==today).slice(0,7);
if(dates.length){
h+='<div class="card"><h3>'+t('history')+'</h3>';
dates.forEach(d=>{const items=D.checklist.filter(c=>c.date===d);const dn=items.filter(c=>c.done).length;
h+=`<div class="stat-row"><span class="stat-label">${fmtDate(d)}</span><span class="stat-value">${dn}/${items.length} (${items.length>0?fmtNum(dn/items.length*100,0):0}%)</span></div>`;});
h+='</div>';}
return h;
}
function toggleCheck(id,done){const D=loadData();const c=D.checklist.find(x=>x.id===id);if(c){c.done=done;saveData(D);renderOperations();}}
function deleteCheck(id){const D=loadData();D.checklist=D.checklist.filter(c=>c.id!==id);saveData(D);renderOperations();}
function addCheckTask(){const v=$('new-task')?.value;if(!v)return;const D=loadData();D.checklist.push({id:genId(),date:todayStr(),task:v,done:false});saveData(D);renderOperations();}

function renderOpsLogbook(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('ops_logbook')}</h3>
<button class="btn btn-primary btn-sm" onclick="showLogForm()">${t('ops_log_add')}</button></div>`;
if(!D.logbook.length)return h+emptyState('üìì',t('no_data'));
const cats=['general','health','production','maintenance','observation'];
h+=`<div class="filter-bar"><select id="lf-cat" onchange="renderOperations()"><option value="">${t('all')}</option>${cats.map(c=>`<option value="${c}">${t('ops_log_cat_'+c)}</option>`).join('')}</select></div>`;
const selCat=document.getElementById('lf-cat')?.value||'';
let logs=D.logbook.sort((a,b)=>b.date.localeCompare(a.date));
if(selCat)logs=logs.filter(l=>l.category===selCat);
h+='<div class="card">';
logs.forEach(l=>{
h+=`<div class="alert-card alert-info" style="flex-wrap:wrap"><div style="flex:1"><strong>${fmtDate(l.date)}</strong> ‚Äî <span class="badge badge-info">${t('ops_log_cat_'+l.category)||l.category}</span>
<p style="margin-top:4px">${l.entry}</p></div>
<div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showLogForm('${l.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteLog('${l.id}')">${t('delete')}</button></div></div>`;});
h+='</div>';return h;
}
function showLogForm(id){
const D=loadData();const l=id?D.logbook.find(x=>x.id===id):null;
const cats=['general','health','production','maintenance','observation'];
openModal(l?t('edit'):t('ops_log_add'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="lg-date" value="${l?l.date:todayStr()}"></div>
<div class="form-group"><label>${t('ops_log_category')}</label><select id="lg-cat">${cats.map(c=>`<option value="${c}"${l&&l.category===c?' selected':''}>${t('ops_log_cat_'+c)}</option>`).join('')}</select></div></div>
<div class="form-group"><label>${t('ops_log_entry')}</label><textarea id="lg-entry" rows="4">${l?l.entry||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveLog('${id||''}')">${t('save')}</button></div>`);
}
function saveLog(id){
const D=loadData();const o={date:$('lg-date').value,category:$('lg-cat').value,entry:$('lg-entry').value};
if(!o.entry){toast(t('required'),true);return;}
if(id){const i=D.logbook.findIndex(l=>l.id===id);if(i>=0)D.logbook[i]={...D.logbook[i],...o};}
else{o.id=genId();D.logbook.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderOperations();
}
function deleteLog(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.logbook=D.logbook.filter(l=>l.id!==id);saveData(D);toast(t('cfg_saved'));renderOperations();}

function renderOpsPersonnel(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('ops_personnel')}</h3>
<button class="btn btn-primary btn-sm" onclick="showPersonnelForm()">${t('ops_per_add')}</button></div>`;
if(!D.personnel.length)return h+emptyState('üë∑',t('no_data'));
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('ops_per_name')}</th><th>${t('ops_per_role')}</th><th>${t('ops_per_salary')}</th><th>${t('ops_per_start')}</th><th>${t('ops_per_active')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.personnel.forEach(p=>{
h+=`<tr><td><strong>${p.name}</strong></td><td>${p.role||'-'}</td><td>${fmtMoney(p.salary||0)}</td><td>${fmtDate(p.startDate)}</td>
<td>${p.active?'<span class="badge badge-success">'+t('active')+'</span>':'<span class="badge badge-secondary">'+t('inactive')+'</span>'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showPersonnelForm('${p.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deletePersonnel('${p.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';
const totalSalary=D.personnel.filter(p=>p.active).reduce((s,p)=>s+(p.salary||0),0);
h+=`<div class="kpi-grid">${kpi(t('total_salaries'),fmtMoney(totalSalary),D.personnel.filter(p=>p.active).length+' '+t('active').toLowerCase())}</div>`;
return h;
}
function showPersonnelForm(id){
const D=loadData();const p=id?D.personnel.find(x=>x.id===id):null;
openModal(p?t('edit'):t('ops_per_add'),`
<div class="form-row"><div class="form-group"><label>${t('ops_per_name')}</label><input id="pe-name" value="${p?p.name:''}"></div>
<div class="form-group"><label>${t('ops_per_role')}</label><select id="pe-role">${catalogSelect(CATALOGS.personnelRoles,p?p.role||'':'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('ops_per_salary')}</label><input type="number" id="pe-salary" value="${p?p.salary||'':''}" min="0"></div>
<div class="form-group"><label>${t('ops_per_start')}</label><input type="date" id="pe-start" value="${p?p.startDate||'':''}"></div></div>
<div class="form-group"><label>${t('ops_per_active')}</label><select id="pe-active">
<option value="1"${!p||p.active?' selected':''}>${t('active')}</option>
<option value="0"${p&&!p.active?' selected':''}>${t('inactive')}</option></select></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="pe-notes">${p?p.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="savePersonnel('${id||''}')">${t('save')}</button></div>`);
}
function savePersonnel(id){
const D=loadData();const o={name:$('pe-name').value,role:$('pe-role').value,
salary:parseFloat($('pe-salary').value)||0,startDate:$('pe-start').value,
active:$('pe-active').value==='1',notes:$('pe-notes').value};
if(!o.name){toast(t('required'),true);return;}
if(id){const i=D.personnel.findIndex(p=>p.id===id);if(i>=0)D.personnel[i]={...D.personnel[i],...o};}
else{o.id=genId();D.personnel.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderOperations();
}
function deletePersonnel(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.personnel=D.personnel.filter(p=>p.id!==id);saveData(D);toast(t('cfg_saved'));renderOperations();}
// === END OPERATIONS ===

// === ENVIRONMENT MODULE ===
let currentEnvTab='manual';
function renderEnvironment(){
const D=loadData();
let h=`<div class="page-header"><h2>${t('env_title')}</h2></div>`;
h+=`<div class="tabs"><div class="tab${currentEnvTab==='manual'?' active':''}" onclick="currentEnvTab='manual';renderEnvironment()">üìù ${t('env_manual')}</div>
<div class="tab${currentEnvTab==='iot'?' active':''}" onclick="currentEnvTab='iot';renderEnvironment()">üì° ${t('iot_title')}</div>
<div class="tab${currentEnvTab==='history'?' active':''}" onclick="currentEnvTab='history';renderEnvironment()">üìä ${t('env_history')}</div></div>`;
if(currentEnvTab==='manual')h+=renderEnvManual(D);
else if(currentEnvTab==='iot')h+=renderEnvIoT(D);
else h+=renderEnvHistory(D);
$('sec-ambiente').innerHTML=h;if(currentEnvTab==='iot')updateIoTGauges();
}
function renderEnvManual(D){
let h=`<div style="text-align:right;margin-bottom:8px"><button class="btn btn-primary" onclick="showEnvForm()">${t('env_add')}</button></div>`;
h+=`<div class="card"><h3>${t('env_optimal')}</h3><div class="kpi-grid">
${kpi(t('env_temp'),t('env_temp_range'),'','')}</div><div class="kpi-grid">
${kpi(t('env_humidity'),t('env_humidity_range'),'','')}
${kpi(t('env_light'),t('env_light_range'),'','')}
${kpi(t('env_density'),t('env_density_range'),'','')}</div></div>`;
const latest=D.environment.sort((a,b)=>b.date.localeCompare(a.date))[0];
if(latest){
const tOk=latest.temperature>=18&&latest.temperature<=24;const hOk=latest.humidity>=40&&latest.humidity<=70;
const lOk=latest.lightHours>=14&&latest.lightHours<=16;
h+=`<div class="card"><h3>${t('env_latest_reading')} (${fmtDate(latest.date)})</h3><div class="kpi-grid">`;
h+=`<div class="kpi-card ${tOk?'':'danger'}"><div class="kpi-label">${t('env_temp')}</div><div class="kpi-value">${latest.temperature||'-'}¬∞C</div><div class="kpi-sub">${tOk?'‚úì '+t('env_ok'):'‚ö† '+t('env_out_of_range')}</div></div>`;
h+=`<div class="kpi-card ${hOk?'':'warning'}"><div class="kpi-label">${t('env_humidity')}</div><div class="kpi-value">${latest.humidity||'-'}%</div><div class="kpi-sub">${hOk?'‚úì '+t('env_ok'):'‚ö† '+t('env_out_of_range')}</div></div>`;
h+=`<div class="kpi-card ${lOk?'':'warning'}"><div class="kpi-label">${t('env_light')}</div><div class="kpi-value">${latest.lightHours||'-'} hrs</div><div class="kpi-sub">${lOk?'‚úì '+t('env_ok'):'‚ö† '+t('env_out_of_range')}</div></div>`;
if(latest.temperature&&latest.humidity){const thi=calcTHI(latest.temperature,latest.humidity);
h+=`<div class="kpi-card ${thi>28?'danger':thi>25?'warning':''}"><div class="kpi-label">${t('env_thi')}</div><div class="kpi-value">${thi.toFixed(1)}</div><div class="kpi-sub">${thi>28?t('weather_heat_alert'):'OK'}</div></div>`;}
h+='</div></div>';}
if(!D.environment.length)h+=emptyState('üå°Ô∏è',t('no_data'),t('env_add'),'showEnvForm()');
else{
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('env_temp')}</th><th>${t('env_humidity')}</th><th>${t('env_light')}</th><th>${t('env_ammonia')}</th><th>THI</th><th>${t('notes')}</th><th>${t('actions')}</th>`;
h+='</tr></thead><tbody>';
D.environment.sort((a,b)=>b.date.localeCompare(a.date)).slice(0,20).forEach(e=>{
const tOk=e.temperature>=18&&e.temperature<=24;const hOk=e.humidity>=40&&e.humidity<=70;
const thi=(e.temperature&&e.humidity)?calcTHI(e.temperature,e.humidity):null;
h+=`<tr><td>${fmtDate(e.date)}</td><td style="color:${tOk?'var(--success)':'var(--danger)'}">${e.temperature||'-'}¬∞C</td>
<td style="color:${hOk?'var(--success)':'var(--warning)'}">${e.humidity||'-'}%</td>
<td>${e.lightHours||'-'} hrs</td><td>${e.ammoniaLevel||'-'} ppm</td>
<td>${thi?thi.toFixed(1):'-'}</td><td>${e.notes||'-'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showEnvForm('${e.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteEnv('${e.id}')">${t('delete')}</button></div></td></tr>`;});
h+='</tbody></table></div></div>';}
return h;
}
function renderEnvIoT(D){
let h='';
if(!D.farm.mqttBroker){return `<div class="card"><p>${t('iot_no_config')}</p>
<button class="btn btn-primary" onclick="nav('config')">${t('cfg_title')}</button></div>`;}
h+=`<div class="card"><div style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
<div id="mqtt-indicator"></div>
<button class="btn btn-primary btn-sm" onclick="connectMQTT()">${t('iot_connect')}</button>
<button class="btn btn-secondary btn-sm" onclick="disconnectMQTT()">${t('iot_disconnect')}</button></div>
<div id="iot-gauges"><p style="color:var(--text-light)">${t('iot_no_config')}</p></div></div>`;
return h;
}
function renderEnvHistory(D){
let h='';
if(!D.environment.length)return emptyState('üìä',t('no_data'));
h+='<div class="card"><h3>'+t('env_history')+'</h3><div class="chart-container"><canvas id="chart-env"></canvas></div></div>';
setTimeout(()=>{
const c=document.getElementById('chart-env');if(!c)return;
const recs=D.environment.sort((a,b)=>a.date.localeCompare(b.date)).slice(-30);
CHARTS.env=new Chart(c,{type:'line',data:{labels:recs.map(r=>r.date.substring(5)),datasets:[
{label:t('env_temp')+' ¬∞C',data:recs.map(r=>r.temperature),borderColor:'#C62828',tension:.3,yAxisID:'y'},
{label:t('env_humidity')+' %',data:recs.map(r=>r.humidity),borderColor:themeColor('--primary'),tension:.3,yAxisID:'y1'}
]},options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},
scales:{y:{position:'left',title:{display:true,text:'¬∞C'}},y1:{position:'right',title:{display:true,text:'%'},grid:{drawOnChartArea:false}}}}});
},100);
h+='<div class="card"><div class="table-wrap"><table><thead><tr>';
h+=`<th>${t('date')}</th><th>${t('env_temp')}</th><th>${t('env_humidity')}</th><th>${t('env_light')}</th><th>${t('env_ammonia')}</th><th>THI</th><th>${t('notes')}</th></tr></thead><tbody>`;
D.environment.sort((a,b)=>b.date.localeCompare(a.date)).forEach(e=>{
const thi=(e.temperature&&e.humidity)?calcTHI(e.temperature,e.humidity):null;
h+=`<tr><td>${fmtDate(e.date)}</td><td>${e.temperature||'-'}¬∞C</td><td>${e.humidity||'-'}%</td>
<td>${e.lightHours||'-'} hrs</td><td>${e.ammoniaLevel||'-'} ppm</td><td>${thi?thi.toFixed(1):'-'}</td><td>${e.notes||'-'}</td></tr>`;});
h+='</tbody></table></div></div>';
return h;
}
function showEnvForm(id){
const D=loadData();const e=id?D.environment.find(x=>x.id===id):null;
openModal(e?t('edit'):t('env_add'),`
<div class="form-group"><label>${t('date')}</label><input type="date" id="en-date" value="${e?e.date:todayStr()}"></div>
<div class="form-row"><div class="form-group"><label>${t('env_temp')}</label><input type="number" id="en-temp" value="${e?e.temperature||'':''}" step="0.1"></div>
<div class="form-group"><label>${t('env_humidity')}</label><input type="number" id="en-hum" value="${e?e.humidity||'':''}" step="1" min="0" max="100"></div></div>
<div class="form-row"><div class="form-group"><label>${t('env_light')}</label><input type="number" id="en-light" value="${e?e.lightHours||'':''}" step="0.5" min="0" max="24"></div>
<div class="form-group"><label>${t('env_ammonia')} (ppm)</label><input type="number" id="en-ammonia" value="${e?e.ammoniaLevel||'':''}" step="0.1" min="0"></div></div>
<div class="form-group"><label>${t('env_ventilation')}</label><select id="en-vent">${catalogSelect(CATALOGS.ventilationLevels,e?e.ventilation||'':'',false)}</select></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="en-notes">${e?e.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveEnv('${id||''}')">${t('save')}</button></div>`);
}
function saveEnv(id){
const D=loadData();const o={date:$('en-date').value,temperature:parseFloat($('en-temp').value)||null,
humidity:parseFloat($('en-hum').value)||null,lightHours:parseFloat($('en-light').value)||null,
ammoniaLevel:parseFloat($('en-ammonia')?.value)||null,
ventilation:$('en-vent').value,notes:$('en-notes').value};
if(!o.date){toast(t('required'),true);return;}
if(id){const i=D.environment.findIndex(e=>e.id===id);if(i>=0)D.environment[i]={...D.environment[i],...o};}
else{o.id=genId();D.environment.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderEnvironment();
}
function deleteEnv(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.environment=D.environment.filter(e=>e.id!==id);saveData(D);toast(t('cfg_saved'));renderEnvironment();}
// === END ENVIRONMENT ===

// === CONFIG MODULE ===
function renderConfig(){
const D=loadData();
let h=`<div class="page-header"><h2>${t('cfg_title')}</h2></div>`;
// Theme picker
const curTheme=localStorage.getItem('egglogu_theme')||'blue';
h+='<div class="card"><h3>'+t('cfg_theme')+'</h3><div style="display:flex;gap:12px;flex-wrap:wrap">';
Object.keys(THEMES).forEach(name=>{const th=THEMES[name];const active=curTheme===name;
h+='<button onclick="applyTheme(\''+name+'\');nav(\'config\')" style="width:90px;height:64px;border-radius:var(--radius);border:'+(active?'3px solid var(--secondary)':'2px solid var(--border)')+';background:'+th['sidebar-bg']+';color:#fff;cursor:pointer;font-weight:'+(active?'700':'400')+';font-size:13px;transition:all .2s;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px"><span style="width:24px;height:24px;border-radius:50%;background:'+th.primary+';border:2px solid rgba(255,255,255,.5)"></span>'+t('cfg_theme_'+name)+'</button>';});
h+='</div></div>';
// Accessibility: Font size + Dark mode
const curScale=D.settings.fontScale||'normal';
h+=`<div class="card"><h3>‚ôø ${t('cfg_accessibility')}</h3>
<div class="form-group"><label>${t('cfg_font_size')}</label>
<div style="display:flex;gap:8px;flex-wrap:wrap">
${['small','normal','large','xlarge'].map(s=>`<button class="btn btn-sm${curScale===s?' btn-primary':' btn-secondary'}" onclick="applyFontScale('${s}');const D=loadData();D.settings.fontScale='${s}';saveData(D);nav('config')">${t('cfg_font_'+s)}</button>`).join('')}
</div></div>
<div class="form-group" style="margin-top:12px"><label>${t('cfg_dark_mode')}</label>
<button class="btn btn-sm${D.settings.darkMode?' btn-primary':' btn-secondary'}" onclick="const D=loadData();D.settings.darkMode=!D.settings.darkMode;saveData(D);applyDarkMode(D.settings.darkMode);nav('config')">${D.settings.darkMode?'üåô ON':'‚òÄÔ∏è OFF'}</button>
</div></div>`;
// Farm info
h+=`<div class="card"><h3>${t('cfg_farm')}</h3>
<div class="form-row"><div class="form-group"><label>${t('cfg_farm_name')}</label><input id="cfg-name" value="${D.farm.name||''}"></div>
<div class="form-group"><label>${t('cfg_location')}</label><input id="cfg-loc" value="${D.farm.location||''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('cfg_capacity')}</label><input type="number" id="cfg-cap" value="${D.farm.capacity||''}" min="0"></div>
<div class="form-group"><label>${t('cfg_currency')}</label><input id="cfg-cur" value="${D.farm.currency||'$'}" maxlength="5"></div></div>
<button class="btn btn-primary" onclick="saveConfig()">${t('save')}</button></div>`;
// Geolocation
h+=`<div class="card"><h3>${t('geo_set_location')}</h3>
<p style="color:var(--text-light);margin-bottom:8px">${D.farm.lat?t('geo_lat')+': '+D.farm.lat+' | '+t('geo_lng')+': '+D.farm.lng:t('geo_click_map')}</p>
<button class="btn btn-secondary" onclick="showGeoModal()">${t('geo_set_location')}</button></div>`;
// Weather API
h+=`<div class="card"><h3>${t('weather_title')} (OpenWeatherMap)</h3>
<div class="form-row"><div class="form-group"><label>API Key</label><input id="cfg-owm" value="${D.farm.owmApiKey||''}"></div>
<div class="form-group" style="display:flex;align-items:flex-end"><button class="btn btn-secondary" onclick="testWeatherApi()">Test</button></div></div>
<button class="btn btn-primary" onclick="saveWeatherConfig()">${t('save')}</button></div>`;
// MQTT / IoT
h+=`<div class="card"><h3>${t('iot_title')} (MQTT)</h3>
<div class="form-group"><label>${t('iot_broker')} (wss://)</label><input id="cfg-mqtt-broker" value="${D.farm.mqttBroker||''}" placeholder="wss://broker.example.com:8084/mqtt"></div>
<div class="form-row"><div class="form-group"><label>${t('cfg_farm_name')} (user)</label><input id="cfg-mqtt-user" value="${D.farm.mqttUser||''}"></div>
<div class="form-group"><label>Password</label><input type="password" id="cfg-mqtt-pass" value="${D.farm.mqttPass||''}"></div></div>
<div class="form-group"><label>Topic Prefix</label><input id="cfg-mqtt-prefix" value="${D.farm.mqttTopicPrefix||'egglogu/'}"></div>
<button class="btn btn-primary" onclick="saveMqttConfig()">${t('save')}</button></div>`;
// Alert thresholds
h+=`<div class="card"><h3>${t('cfg_alerts')}</h3>
<div class="form-row-3"><div class="form-group"><label>${t('cfg_min_feed')}</label><input type="number" id="cfg-minfeed" value="${D.settings.minFeedStock||50}" min="0"></div>
<div class="form-group"><label>${t('cfg_max_mortality')}</label><input type="number" id="cfg-maxmort" value="${D.settings.maxMortality||5}" min="0" step="0.5"></div>
<div class="form-group"><label>${t('cfg_alert_days')}</label><input type="number" id="cfg-alertdays" value="${D.settings.alertDaysBefore||3}" min="1"></div></div>
<button class="btn btn-primary" onclick="saveAlertConfig()">${t('save')}</button></div>`;
// Default checklist
h+=`<div class="card"><h3>${t('cfg_checklist')}</h3><p style="color:var(--text-light);font-size:13px;margin-bottom:12px">${t('cfg_checklist_items')}</p>`;
(D.settings.defaultChecklist||[]).forEach((task,i)=>{
h+=`<div class="checklist-item"><span>${t(task)}</span><button class="btn btn-danger btn-sm" style="margin-left:auto" onclick="removeChecklistItem(${i})">‚úï</button></div>`;});
h+=`<div style="margin-top:12px;display:flex;gap:8px"><input id="cfg-newtask" placeholder="${t('ops_task')}" style="flex:1;padding:8px;border:1px solid var(--border);border-radius:var(--radius)">
<button class="btn btn-primary btn-sm" onclick="addChecklistItem()">${t('add')}</button></div></div>`;
// Data management
h+=`<div class="card"><h3>${t('cfg_data')}</h3><div class="btn-group">
<button class="btn btn-secondary" onclick="exportData()">${t('cfg_export')}</button>
<button class="btn btn-secondary" onclick="$('cfg-import-file').click()">${t('cfg_import')}</button>
<input type="file" id="cfg-import-file" accept=".json" style="display:none" onchange="importData(event)">
<button class="btn btn-danger" onclick="resetData()">${t('cfg_reset')}</button></div></div>`;
// Stats
const stats={flocks:D.flocks.length,production:D.dailyProduction.length,vaccines:D.vaccines.length,
medications:D.medications.length,outbreaks:D.outbreaks.length,feedPurchases:D.feed.purchases.length,
feedConsumption:D.feed.consumption.length,clients:D.clients.length,income:D.finances.income.length,
expenses:D.finances.expenses.length,environment:D.environment.length,logbook:D.logbook.length,
personnel:D.personnel.length,snapshots:D.kpiSnapshots.length};
h+='<div class="card"><h3>'+t('data_stats')+'</h3>';
Object.entries(stats).forEach(([k,v])=>{h+=`<div class="stat-row"><span class="stat-label">${k}</span><span class="stat-value">${v}</span></div>`;});
h+='</div>';
$('sec-config').innerHTML=h;
}
function saveConfig(){
const D=loadData();D.farm.name=$('cfg-name').value;D.farm.location=$('cfg-loc').value;
D.farm.capacity=parseInt($('cfg-cap').value)||0;D.farm.currency=$('cfg-cur').value||'$';
saveData(D);toast(t('cfg_saved'));
}
function saveAlertConfig(){
const D=loadData();D.settings.minFeedStock=parseFloat($('cfg-minfeed').value)||50;
D.settings.maxMortality=parseFloat($('cfg-maxmort').value)||5;
D.settings.alertDaysBefore=parseInt($('cfg-alertdays').value)||3;
saveData(D);toast(t('cfg_saved'));
}
function addChecklistItem(){const v=$('cfg-newtask')?.value;if(!v)return;const D=loadData();if(!D.settings.defaultChecklist)D.settings.defaultChecklist=[];D.settings.defaultChecklist.push(v);saveData(D);renderConfig();}
function removeChecklistItem(i){const D=loadData();D.settings.defaultChecklist.splice(i,1);saveData(D);renderConfig();}
function exportData(){
const D=loadData();const blob=new Blob([JSON.stringify(D,null,2)],{type:'application/json'});
const a=document.createElement('a');a.href=URL.createObjectURL(blob);
a.download='egglogu_backup_'+todayStr()+'.json';a.click();toast(t('cfg_exported'));
}
function importData(e){
const file=e.target.files[0];if(!file)return;
const reader=new FileReader();reader.onload=function(ev){
try{const d=JSON.parse(ev.target.result);
DATA=d;saveData(d);toast(t('cfg_imported'));nav('config');
}catch(err){toast(t('error_prefix')+': '+err.message,true);}};
reader.readAsText(file);e.target.value='';
}
function resetData(){
if(!confirm(t('cfg_reset_confirm')))return;if(!confirm(t('final_warning')))return;
localStorage.removeItem('egglogu_data');DATA=null;loadData();toast(t('cfg_reset_done'));nav('dashboard');
}
// === END CONFIG ===

// ============ WEATHER API (OpenWeatherMap) ============
let weatherTimer=null;
function fetchWeather(){
const D=loadData();if(!D.farm.owmApiKey||D.farm.lat===null||D.farm.lng===null)return;
const cached=D.weatherCache.find(w=>Date.now()-w.ts<1800000);
if(cached){renderWeatherWidget(cached);return;}
fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${D.farm.lat}&lon=${D.farm.lng}&appid=${D.farm.owmApiKey}&units=metric`)
.then(r=>r.json()).then(d=>{
if(d.cod&&d.cod!==200)return;
const w={ts:Date.now(),temp:d.main.temp,humidity:d.main.humidity,wind:d.wind.speed,
desc:d.weather[0].description,icon:d.weather[0].icon,feelsLike:d.main.feels_like};
D.weatherCache.push(w);if(D.weatherCache.length>48)D.weatherCache=D.weatherCache.slice(-24);
saveData(D);renderWeatherWidget(w);
const thi=calcTHI(w.temp,w.humidity);
if(thi>28)autoStressEvent(D,'heat',Math.min(5,Math.round((thi-28)/2)+1),`THI=${thi.toFixed(1)}, T=${w.temp}¬∞C, H=${w.humidity}%`);
}).catch(()=>{});
}
function fetchForecast(){
const D=loadData();if(!D.farm.owmApiKey||D.farm.lat===null||D.farm.lng===null)return Promise.resolve([]);
return fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${D.farm.lat}&lon=${D.farm.lng}&appid=${D.farm.owmApiKey}&units=metric`)
.then(r=>r.json()).then(d=>{
if(!d.list)return[];
const days={};d.list.forEach(f=>{const day=f.dt_txt.substring(0,10);if(!days[day])days[day]={temps:[],hums:[],icon:f.weather[0].icon,desc:f.weather[0].description};
days[day].temps.push(f.main.temp);days[day].hums.push(f.main.humidity);});
return Object.entries(days).slice(0,3).map(([date,v])=>({date,
tempMin:Math.min(...v.temps),tempMax:Math.max(...v.temps),
humidity:Math.round(v.hums.reduce((a,b)=>a+b,0)/v.hums.length),icon:v.icon,desc:v.desc}));
}).catch(()=>[]);
}
function calcTHI(t,h){return(1.8*t+32)-(0.55-0.0055*h)*(1.8*t-26);}
function renderWeatherWidget(w){
const el=document.getElementById('weather-widget');if(!el)return;
const thi=calcTHI(w.temp,w.humidity);
const thiClass=thi>28?'danger':thi>25?'warning':'';
el.innerHTML=`<div class="weather-widget">
<div style="display:flex;align-items:center;gap:12px">
<img src="https://openweathermap.org/img/wn/${w.icon}@2x.png" width="48" height="48" alt="">
<div><div style="font-size:24px;font-weight:700">${w.temp.toFixed(1)}¬∞C</div><div style="color:var(--text-light)">${w.desc}</div></div></div>
<div class="kpi-grid" style="margin-top:8px">
${kpi(t('weather_humidity'),w.humidity+'%','','')}
${kpi(t('weather_wind'),w.wind.toFixed(1)+' m/s','','')}
${kpi('THI',thi.toFixed(1),thi>28?t('weather_heat_alert'):'OK',thiClass)}
</div>
<div style="font-size:11px;color:var(--text-light);margin-top:4px">${t('weather_last_update')}: ${new Date(w.ts).toLocaleTimeString()}</div>
</div>`;
}
function testWeatherApi(){
const key=$('cfg-owm')?.value;if(!key){toast(t('required'),true);return;}
const D=loadData();const lat=D.farm.lat||0;const lng=D.farm.lng||0;
fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&appid=${key}&units=metric`)
.then(r=>r.json()).then(d=>{if(d.cod===200)toast('API OK: '+d.main.temp+'¬∞C');else toast('Error: '+(d.message||'unknown'),true);})
.catch(e=>toast('Error: '+e.message,true));
}

// ============ GEOLOCATION & MAP (Leaflet) ============
let geoMap=null;let geoMarker=null;
function showGeoModal(){
const D=loadData();
openModal(t('geo_set_location'),`
<div style="margin-bottom:8px"><button class="btn btn-secondary btn-sm" onclick="useGPS()">${t('geo_use_gps')}</button>
<span style="margin-left:8px;color:var(--text-light)">${t('geo_click_map')}</span></div>
<div id="geo-map" class="leaflet-container" style="height:400px;border-radius:var(--radius)"></div>
<div class="form-row" style="margin-top:8px">
<div class="form-group"><label>${t('geo_lat')}</label><input id="geo-lat" type="number" step="any" value="${D.farm.lat||''}"></div>
<div class="form-group"><label>${t('geo_lng')}</label><input id="geo-lng" type="number" step="any" value="${D.farm.lng||''}"></div></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveGeoLocation()">${t('save')}</button></div>`);
setTimeout(()=>{
const lat=D.farm.lat||0;const lng=D.farm.lng||0;
geoMap=L.map('geo-map').setView([lat||20,lng||-70],lat?10:2);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'OSM'}).addTo(geoMap);
if(lat&&lng){geoMarker=L.marker([lat,lng]).addTo(geoMap);}
geoMap.on('click',function(e){
if(geoMarker)geoMap.removeLayer(geoMarker);
geoMarker=L.marker([e.latlng.lat,e.latlng.lng]).addTo(geoMap);
$('geo-lat').value=e.latlng.lat.toFixed(6);$('geo-lng').value=e.latlng.lng.toFixed(6);
});
},200);
}
function useGPS(){
if(!navigator.geolocation){toast('GPS '+t('not_available'),true);return;}
navigator.geolocation.getCurrentPosition(pos=>{
const lat=pos.coords.latitude;const lng=pos.coords.longitude;
$('geo-lat').value=lat.toFixed(6);$('geo-lng').value=lng.toFixed(6);
if(geoMap){geoMap.setView([lat,lng],12);if(geoMarker)geoMap.removeLayer(geoMarker);
geoMarker=L.marker([lat,lng]).addTo(geoMap);}
},err=>toast('GPS Error: '+err.message,true));
}
function saveGeoLocation(){
const D=loadData();D.farm.lat=parseFloat($('geo-lat').value)||null;D.farm.lng=parseFloat($('geo-lng').value)||null;
saveData(D);closeModal();toast(t('cfg_saved'));renderConfig();
}

// ============ IoT/MQTT INTEGRATION ============
let mqttClient=null;let mqttConnected=false;
function connectMQTT(){
const D=loadData();if(!D.farm.mqttBroker){toast(t('iot_no_config'),true);return;}
try{
mqttClient=mqtt.connect(D.farm.mqttBroker,{username:D.farm.mqttUser||undefined,password:D.farm.mqttPass||undefined,
reconnectPeriod:5000,connectTimeout:10000});
mqttClient.on('connect',()=>{mqttConnected=true;
mqttClient.subscribe(D.farm.mqttTopicPrefix+'sensors/#');updateMqttStatus();toast(t('iot_connect')+' OK');});
mqttClient.on('message',(topic,payload)=>{onMqttMessage(topic,payload);});
mqttClient.on('error',()=>{mqttConnected=false;updateMqttStatus();});
mqttClient.on('close',()=>{mqttConnected=false;updateMqttStatus();});
}catch(e){toast('MQTT Error: '+e.message,true);}
}
function disconnectMQTT(){
if(mqttClient){mqttClient.end();mqttClient=null;}mqttConnected=false;updateMqttStatus();toast(t('iot_disconnect'));
}
function onMqttMessage(topic,payload){
try{const data=JSON.parse(payload.toString());const D=loadData();
const prefix=D.farm.mqttTopicPrefix||'egglogu/';
const sensor=topic.replace(prefix+'sensors/','');
const reading={id:genId(),ts:Date.now(),sensor,value:data.value,unit:data.unit||''};
D.iotReadings.push(reading);if(D.iotReadings.length>500)D.iotReadings=D.iotReadings.slice(-300);
saveData(D);updateIoTGauges();
}catch(e){}
}
function updateMqttStatus(){
const el=document.getElementById('mqtt-indicator');if(!el)return;
el.innerHTML=`<span class="mqtt-status ${mqttConnected?'connected':'disconnected'}">${mqttConnected?'‚óè MQTT':'‚óã MQTT'}</span>`;
}
function updateIoTGauges(){
const D=loadData();const el=document.getElementById('iot-gauges');if(!el)return;
const latest={};D.iotReadings.slice(-20).forEach(r=>{latest[r.sensor]={value:r.value,unit:r.unit,ts:r.ts};});
const sensors=['temperature','humidity','ammonia','light'];
let h='<div class="kpi-grid">';
sensors.forEach(s=>{const d=latest[s];
const val=d?d.value:'--';const unit=d?d.unit:'';
let cls='';
if(s==='temperature'&&d){cls=d.value>30||d.value<15?'danger':d.value>26?'warning':'';}
if(s==='humidity'&&d){cls=d.value>80||d.value<30?'danger':d.value>70?'warning':'';}
if(s==='ammonia'&&d){cls=d.value>25?'danger':d.value>15?'warning':'';}
h+=kpi(t('iot_'+s)||s,typeof val==='number'?val.toFixed(1):val,unit,cls);
});
if(latest.temperature&&latest.humidity){
const thi=calcTHI(latest.temperature.value,latest.humidity.value);
h+=kpi('THI',thi.toFixed(1),thi>28?t('weather_heat_alert'):'OK',thi>28?'danger':thi>25?'warning':'');
}
h+='</div>';
if(Object.keys(latest).length){
h+=`<div style="margin-top:8px"><button class="btn btn-secondary btn-sm" onclick="saveIoTToEnv()">${t('iot_save_reading')}</button>
<span style="margin-left:8px;font-size:11px;color:var(--text-light)">${t('weather_last_update')}: ${new Date(D.iotReadings[D.iotReadings.length-1]?.ts||0).toLocaleTimeString()}</span></div>`;
}
el.innerHTML=h;
}
function saveIoTToEnv(){
const D=loadData();const latest={};D.iotReadings.slice(-20).forEach(r=>{latest[r.sensor]={value:r.value};});
const o={id:genId(),date:todayStr(),temperature:latest.temperature?.value||null,
humidity:latest.humidity?.value||null,lightHours:null,ventilation:'',
ammoniaLevel:latest.ammonia?.value||null,notes:'IoT auto-save'};
D.environment.push(o);saveData(D);toast(t('cfg_saved'));
}

// ============ ML / PREDICTIVE ANALYTICS ============
let forecastDays=7;
function renderPredictionsTab(D){
if(!D.dailyProduction.length)return emptyState('ü§ñ',t('no_data'));
let h='';
const sorted=[...D.dailyProduction].sort((a,b)=>a.date.localeCompare(b.date));
const last30=sorted.slice(-30);
// === Outbreak Risk Classifier (traffic light) ===
const outbreak=computeOutbreakRisk(D);
const obColor=outbreak.classification===1?'red':outbreak.probability>0.4?'yellow':'green';
const obLabel=obColor==='red'?t('pred_outbreak_high'):obColor==='yellow'?t('pred_outbreak_medium'):t('pred_outbreak_low');
h+=`<div class="card"><h3>üî¥ ${t('pred_outbreak_risk')}</h3>
<div style="display:flex;align-items:center;gap:16px;margin-bottom:12px">
<div class="traffic-light"><div class="traffic-dot red${obColor==='red'?' active':''}"></div><div class="traffic-dot yellow${obColor==='yellow'?' active':''}"></div><div class="traffic-dot green${obColor==='green'?' active':''}"></div></div>
<div><strong style="font-size:1.4em">${(outbreak.probability*100).toFixed(0)}%</strong><br><span class="badge badge-${obColor==='red'?'danger':obColor==='yellow'?'warning':'success'}">${obLabel}</span></div></div>`;
if(outbreak.factors.length){
h+='<div class="table-wrap"><table><thead><tr><th>'+t('pred_outbreak_factor')+'</th><th>'+t('pred_outbreak_weight')+'</th><th>'+t('pred_outbreak_value')+'</th></tr></thead><tbody>';
outbreak.factors.forEach(f=>{h+=`<tr><td>${f.name}</td><td>${(f.weight*100).toFixed(0)}%</td><td><div class="severity-bar"><div style="width:${Math.min(100,f.value*100)}%;background:${f.value>0.6?'var(--danger)':f.value>0.3?'var(--warning)':'var(--success)'}"></div></div></td></tr>`;});
h+='</tbody></table></div>';}
if(outbreak.recommendations.length){
h+='<div style="margin-top:12px"><strong>'+t('rec_title')+':</strong><ul style="margin:4px 0 0 16px">';
outbreak.recommendations.forEach(r=>{h+=`<li>${r}</li>`;});h+='</ul></div>';}
h+='</div>';
// === Multi-step Forecast (ensemble) ===
if(last30.length>=7&&typeof ss!=='undefined'){
h+=`<div class="card"><h3>üìà ${t('pred_forecast')}</h3>
<div style="margin-bottom:8px"><button class="btn btn-sm${forecastDays===7?' btn-primary':' btn-secondary'}" onclick="forecastDays=7;renderAnalysis()">7d</button>
<button class="btn btn-sm${forecastDays===14?' btn-primary':' btn-secondary'}" onclick="forecastDays=14;renderAnalysis()">14d</button></div>
<div class="chart-container"><canvas id="chart-forecast"></canvas></div></div>`;
setTimeout(()=>{
const c=document.getElementById('chart-forecast');if(!c)return;
const fc=computeForecast(D,forecastDays);
const allLabels=last30.map(p=>p.date.substring(5));
for(let i=1;i<=forecastDays;i++){const d=new Date();d.setDate(d.getDate()+i);allLabels.push(d.toISOString().substring(5,10));}
const actual=last30.map(p=>p.eggsCollected||0);
const predLine=[...Array(last30.length).fill(null),...fc.forecast];
const upperBand=[...Array(last30.length).fill(null),...fc.upper];
const lowerBand=[...Array(last30.length).fill(null),...fc.lower];
CHARTS.forecast=new Chart(c,{type:'line',data:{labels:allLabels,datasets:[
{label:t('prod_eggs'),data:[...actual,...Array(forecastDays).fill(null)],borderColor:themeColor('--primary'),backgroundColor:themeRgba(.1),fill:true,tension:.3},
{label:t('pred_forecast'),data:predLine,borderColor:'#FF8F00',borderDash:[5,5],tension:.3,pointRadius:4},
{label:t('pred_forecast_upper'),data:upperBand,borderColor:'rgba(255,143,0,.2)',backgroundColor:'rgba(255,143,0,.08)',fill:'+1',borderDash:[2,2],pointRadius:0,tension:.3},
{label:t('pred_forecast_lower'),data:lowerBand,borderColor:'rgba(255,143,0,.2)',pointRadius:0,tension:.3}
]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{filter:item=>!item.text.includes('upper')&&!item.text.includes('lower')}}}}});
},100);
}
// === Anomaly Detection ===
if(last30.length>=7&&typeof ss!=='undefined'){
const vals=last30.map(p=>p.eggsCollected||0);
const mean=ss.mean(vals);const std=ss.standardDeviation(vals);
const anomalies=last30.filter(p=>{const z=std>0?Math.abs((p.eggsCollected-mean)/std):0;return z>2;});
if(anomalies.length){
h+=`<div class="card"><h3>${t('pred_anomaly')} (|Z|>2)</h3><div class="table-wrap"><table><thead><tr>
<th>${t('date')}</th><th>${t('prod_eggs')}</th><th>Z-score</th></tr></thead><tbody>`;
anomalies.forEach(p=>{const z=std>0?((p.eggsCollected-mean)/std):0;
h+=`<tr><td>${fmtDate(p.date)}</td><td>${p.eggsCollected} <span class="anomaly-icon">‚ö†</span></td>
<td style="color:var(--danger)">${z.toFixed(2)}</td></tr>`;});
h+='</tbody></table></div></div>';
}}
// === Breed Benchmark ===
const activeFlocks=D.flocks.filter(f=>f.status!=='descarte'&&f.birthDate);
if(activeFlocks.length){
h+=`<div class="card"><h3>${t('pred_breed_curve')}</h3>`;
activeFlocks.forEach(f=>{
const bkey=f.breed&&BREED_CURVES[f.breed]?f.breed:(f.targetCurve&&BREED_CURVES[f.targetCurve]?f.targetCurve:'generic');
const curve=BREED_CURVES[bkey];const age=flockAge(f);const weekIdx=Math.max(0,age.weeks-18);
const expected=weekIdx<curve.length?curve[weekIdx]:curve[curve.length-1];
const hens=activeHensByFlock(f.id);
const l7=D.dailyProduction.filter(p=>p.flockId===f.id).sort((a,b)=>b.date.localeCompare(a.date)).slice(0,7);
const avgE=l7.length>0?l7.reduce((s,p)=>s+(p.eggsCollected||0),0)/l7.length:0;
const actual=hens>0?(avgE/hens*100):0;
const gap=actual-expected;const gapColor=gap>=0?'var(--success)':'var(--danger)';
h+=`<div class="stat-row"><span class="stat-label">${f.name} (${breed})</span>
<span class="stat-value">${t('actual')}: ${fmtNum(actual,1)}% | ${t('expected')}: ${expected}% |
<span style="color:${gapColor}">Gap: ${gap>0?'+':''}${fmtNum(gap,1)}%</span></span></div>`;
});
h+='</div>';}
return h;
}
function computeDropRisk(D){
let score=0;const hens=activeHens();
// Factor 1: Recent mortality spike (0-30 points)
const l7prod=D.dailyProduction.sort((a,b)=>b.date.localeCompare(a.date)).slice(0,7);
const l7deaths=l7prod.reduce((s,p)=>s+(p.deaths||0),0);
const deathRate=hens>0?(l7deaths/hens*100):0;
score+=Math.min(30,deathRate*6);
// Factor 2: FCR worsening (0-25 points)
const d30=new Date();d30.setDate(d30.getDate()-30);const d30s=d30.toISOString().substring(0,10);
const f30=D.feed.consumption.filter(c=>c.date>=d30s);const e30=D.dailyProduction.filter(p=>p.date>=d30s);
const tfkg=f30.reduce((s,c)=>s+(c.quantityKg||0),0);const tekg=e30.reduce((s,p)=>s+(p.eggsCollected||0),0)*0.06;
const fcr=tekg>0?tfkg/tekg:0;
if(fcr>3)score+=25;else if(fcr>2.5)score+=15;else if(fcr>2)score+=5;
// Factor 3: Weather THI (0-20 points)
const lastW=D.weatherCache.length>0?D.weatherCache[D.weatherCache.length-1]:null;
if(lastW){const thi=calcTHI(lastW.temp,lastW.humidity);if(thi>30)score+=20;else if(thi>28)score+=12;else if(thi>25)score+=5;}
// Factor 4: Production trend (0-25 points)
if(l7prod.length>=7&&typeof ss!=='undefined'){
const points=l7prod.map((p,i)=>[i,p.eggsCollected||0]);
const reg=ss.linearRegression(points);
if(reg.m<-5)score+=25;else if(reg.m<-2)score+=15;else if(reg.m<0)score+=5;
}
return Math.min(100,Math.round(score));
}

// ============ STRESS EVENTS ============
let currentSanidadTab_stress=false;
function renderStressEventsTab(D){
let h=`<div class="page-header" style="margin-bottom:12px"><h3>${t('stress_title')}</h3>
<button class="btn btn-primary btn-sm" onclick="showStressForm()">${t('add')}</button></div>`;
if(!D.stressEvents.length)return h+emptyState('‚ö°',t('no_data'));
// Timeline view
h+='<div class="card"><div class="stress-timeline">';
D.stressEvents.sort((a,b)=>b.date.localeCompare(a.date)).forEach(ev=>{
const sColor=['','#4CAF50','#FFC107','#FF9800','#F44336','#9C27B0'][ev.severity]||'#999';
const f=D.flocks.find(x=>x.id===ev.flockId);
// Production impact
const evDate=new Date(ev.date+'T12:00:00');const after3=new Date(evDate);after3.setDate(after3.getDate()+3);
const before=D.dailyProduction.filter(p=>p.date<ev.date).slice(-3);
const afterP=D.dailyProduction.filter(p=>p.date>ev.date&&p.date<=after3.toISOString().substring(0,10));
const avgBefore=before.length>0?before.reduce((s,p)=>s+(p.eggsCollected||0),0)/before.length:0;
const avgAfter=afterP.length>0?afterP.reduce((s,p)=>s+(p.eggsCollected||0),0)/afterP.length:0;
const impact=avgBefore>0?((avgAfter-avgBefore)/avgBefore*100):0;
h+=`<div class="stress-event" style="border-left:4px solid ${sColor}">
<div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:4px">
<strong>${fmtDate(ev.date)}</strong>
<span class="badge badge-${ev.severity>=4?'danger':ev.severity>=3?'warning':'info'}">${t('stress_'+ev.type)||ev.type} (${ev.severity}/5)</span>
</div>
<p style="margin:4px 0">${ev.description}</p>
<div style="font-size:12px;color:var(--text-light)">${f?f.name:t('all')} | ${t('prod_title')}: <span style="color:${impact<0?'var(--danger)':'var(--success)'}">${impact>0?'+':''}${fmtNum(impact,1)}%</span></div>
<div class="btn-group" style="margin-top:4px"><button class="btn btn-secondary btn-sm" onclick="showStressForm('${ev.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteStress('${ev.id}')">${t('delete')}</button></div></div>`;
});
h+='</div></div>';
return h;
}
function showStressForm(id){
const D=loadData();const ev=id?D.stressEvents.find(x=>x.id===id):null;
const types=['heat','disease','feed_change','power','predator','other'];
openModal(ev?t('edit'):t('stress_title'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="st-date" value="${ev?ev.date:todayStr()}"></div>
<div class="form-group"><label>${t('stress_type')}</label><select id="st-type">${types.map(ty=>`<option value="${ty}"${ev&&ev.type===ty?' selected':''}>${t('stress_'+ty)||ty}</option>`).join('')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('stress_severity')} (1-5)</label><input type="number" id="st-sev" value="${ev?ev.severity:3}" min="1" max="5"></div>
<div class="form-group"><label>${t('prod_flock')}</label><select id="st-flock">${flockSelect(ev?ev.flockId:'',true)}</select></div></div>
<div class="form-group"><label>${t('fin_description')}</label><textarea id="st-desc">${ev?ev.description||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveStress('${id||''}')">${t('save')}</button></div>`);
}
function saveStress(id){
const D=loadData();const o={date:$('st-date').value,type:$('st-type').value,
severity:parseInt($('st-sev').value)||3,flockId:$('st-flock').value,description:$('st-desc').value};
if(!o.date){toast(t('required'),true);return;}
if(id){const i=D.stressEvents.findIndex(e=>e.id===id);if(i>=0)D.stressEvents[i]={...D.stressEvents[i],...o};}
else{o.id=genId();D.stressEvents.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderSanidad();
}
function deleteStress(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.stressEvents=D.stressEvents.filter(e=>e.id!==id);saveData(D);toast(t('cfg_saved'));renderSanidad();}
function autoStressEvent(D,type,severity,desc){
const today=todayStr();
if(D.stressEvents.find(e=>e.date===today&&e.type===type))return;
D.stressEvents.push({id:genId(),date:today,flockId:'',type,severity,description:desc});
saveData(D);
}

// ============ CONFIG SAVE HELPERS ============
function saveWeatherConfig(){
const D=loadData();D.farm.owmApiKey=$('cfg-owm')?.value||'';saveData(D);toast(t('cfg_saved'));
if(D.farm.owmApiKey&&D.farm.lat)fetchWeather();
}
function saveMqttConfig(){
const D=loadData();
D.farm.mqttBroker=$('cfg-mqtt-broker')?.value||'';
D.farm.mqttUser=$('cfg-mqtt-user')?.value||'';
D.farm.mqttPass=$('cfg-mqtt-pass')?.value||'';
D.farm.mqttTopicPrefix=$('cfg-mqtt-prefix')?.value||'egglogu/';
saveData(D);toast(t('cfg_saved'));
}

// ============ BIOSECURITY MODULE ============
let currentBioTab='visitors';
function renderBiosecurity(){
const D=loadData();const bio=D.biosecurity;
let h=`<div class="page-header"><h2>${t('bio_title')}</h2></div>`;
// Pest Score
const ps=computePestScore(D);
h+=`<div class="kpi-grid" style="margin-bottom:16px">`;
h+=kpi(t('bio_pest_score'),ps.toString()+'/100','',ps>60?'danger':ps>30?'warning':'');
h+=kpi(t('bio_unresolved_pests'),bio.pestSightings.filter(p=>!p.resolved).length.toString(),'','');
h+=kpi(t('bio_visitors'),bio.visitors.length.toString(),t('total'),'');
h+=kpi(t('bio_zones'),bio.zones.length.toString(),'','');
h+=`</div>`;
h+=`<div class="tabs">
<div class="tab${currentBioTab==='visitors'?' active':''}" onclick="currentBioTab='visitors';renderBiosecurity()">üë§ ${t('bio_visitors')}</div>
<div class="tab${currentBioTab==='zones'?' active':''}" onclick="currentBioTab='zones';renderBiosecurity()">üè† ${t('bio_zones')}</div>
<div class="tab${currentBioTab==='pests'?' active':''}" onclick="currentBioTab='pests';renderBiosecurity()">üêÄ ${t('bio_pests')}</div>
<div class="tab${currentBioTab==='protocols'?' active':''}" onclick="currentBioTab='protocols';renderBiosecurity()">üìã ${t('bio_protocols')}</div></div>`;
if(currentBioTab==='visitors')h+=renderBioVisitors(D);
else if(currentBioTab==='zones')h+=renderBioZones(D);
else if(currentBioTab==='pests')h+=renderBioPests(D);
else h+=renderBioProtocols(D);
$('sec-bioseguridad').innerHTML=h;
}
function computePestScore(D){
const bio=D.biosecurity;let score=0;
const unresolved=bio.pestSightings.filter(p=>!p.resolved);
score+=Math.min(40,unresolved.length*10);
score+=Math.min(20,unresolved.reduce((s,p)=>s+(p.severity||1),0)*2);
const redZones=bio.zones.filter(z=>z.riskLevel==='red').length;
const yellowZones=bio.zones.filter(z=>z.riskLevel==='yellow').length;
score+=redZones*15+yellowZones*5;
const today=todayStr();
bio.zones.forEach(z=>{
if(z.lastDisinfection&&z.frequencyDays){
const next=new Date(z.lastDisinfection+'T12:00:00');next.setDate(next.getDate()+z.frequencyDays);
if(next.toISOString().substring(0,10)<today)score+=10;
}});
return Math.min(100,Math.round(score));
}
function renderBioVisitors(D){
const bio=D.biosecurity;
let h=`<div class="card"><div class="page-header"><h3>üë§ ${t('bio_visitors')}</h3>
<button class="btn btn-primary btn-sm" onclick="showBioVisitorForm()">${t('bio_add_visitor')}</button></div>`;
if(!bio.visitors.length)return h+emptyState('üë§',t('no_data'))+'</div>';
h+=`<div class="table-wrap"><table><thead><tr><th>${t('date')}</th><th>${t('bio_visitor_name')}</th><th>${t('bio_visitor_company')}</th>
<th>${t('bio_visitor_purpose')}</th><th>${t('bio_visitor_zone')}</th><th>${t('bio_visitor_plate')}</th>
<th>${t('bio_visitor_disinfected')}</th><th>${t('actions')}</th></tr></thead><tbody>`;
bio.visitors.sort((a,b)=>b.date.localeCompare(a.date)).forEach(v=>{
const crossRisk=v.fromFarmHealth&&v.fromFarmHealth!=='healthy';
h+=`<tr${crossRisk?' style="background:#FFF3E0"':''}>
<td>${fmtDate(v.date)}</td><td>${v.name}${crossRisk?' <span title="'+t('bio_cross_risk')+'" style="color:var(--danger)">‚ö†Ô∏è</span>':''}</td>
<td>${v.company||'-'}</td><td>${v.purpose||'-'}</td><td>${v.zone||'-'}</td><td>${v.vehiclePlate||'-'}</td>
<td>${v.disinfected?'‚úÖ':'‚ùå'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showBioVisitorForm('${v.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteBioVisitor('${v.id}')">${t('delete')}</button></div></td></tr>`;});
return h+'</tbody></table></div></div>';
}
function showBioVisitorForm(id){
const D=loadData();const v=id?D.biosecurity.visitors.find(x=>x.id===id):null;
const zoneOpts=D.biosecurity.zones.map(z=>`<option value="${z.name}"${v&&v.zone===z.name?' selected':''}>${z.name}</option>`).join('');
openModal(v?t('edit'):t('bio_add_visitor'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="bv-date" value="${v?v.date:todayStr()}"></div>
<div class="form-group"><label>${t('bio_visitor_name')}</label><input id="bv-name" value="${v?v.name:''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('bio_visitor_company')}</label><input id="bv-company" value="${v?v.company||'':''}"></div>
<div class="form-group"><label>${t('bio_visitor_purpose')}</label><select id="bv-purpose">${catalogSelect(CATALOGS.visitorPurposes,v?v.purpose||'':'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('bio_visitor_zone')}</label><select id="bv-zone"><option value="">--</option>${zoneOpts}</select></div>
<div class="form-group"><label>${t('bio_visitor_plate')}</label><input id="bv-plate" value="${v?v.vehiclePlate||'':''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('bio_visitor_disinfected')}</label><select id="bv-disinf">
<option value="true"${v&&v.disinfected?' selected':''}>‚úÖ</option><option value="false"${v&&!v.disinfected?' selected':''}>‚ùå</option></select></div>
<div class="form-group"><label>${t('bio_visitor_from_farm')}</label><select id="bv-farm">
<option value="">--</option>
<option value="internal"${v&&v.fromFarmId==='internal'?' selected':''}>${D.farm.name||'Mi Granja'} (interna)</option>
<option value="external"${v&&v.fromFarmId==='external'?' selected':(!v?' selected':'')}>Externa</option>
</select></div></div>
<div class="form-group"><label>${t('bio_visitor_from_health')}</label><select id="bv-health">
<option value="healthy"${v&&v.fromFarmHealth==='healthy'?' selected':''}>‚úÖ Healthy</option>
<option value="outbreak"${v&&v.fromFarmHealth==='outbreak'?' selected':''}>‚ö†Ô∏è Outbreak</option>
<option value="unknown"${v&&v.fromFarmHealth==='unknown'?' selected':''}>‚ùì Unknown</option></select></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="bv-notes">${v?v.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveBioVisitor('${id||''}')">${t('save')}</button></div>`);
}
function saveBioVisitor(id){
const D=loadData();const o={date:$('bv-date').value,name:$('bv-name').value,company:$('bv-company').value,
purpose:$('bv-purpose').value,zone:$('bv-zone').value,vehiclePlate:$('bv-plate').value,
disinfected:$('bv-disinf').value==='true',fromFarmId:$('bv-farm').value,
fromFarmHealth:$('bv-health').value,notes:$('bv-notes').value};
if(!o.date||!o.name){toast(t('required'),true);return;}
if(id){const i=D.biosecurity.visitors.findIndex(v=>v.id===id);if(i>=0)D.biosecurity.visitors[i]={...D.biosecurity.visitors[i],...o};}
else{o.id=genId();D.biosecurity.visitors.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderBiosecurity();
}
function deleteBioVisitor(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.biosecurity.visitors=D.biosecurity.visitors.filter(v=>v.id!==id);saveData(D);toast(t('cfg_saved'));renderBiosecurity();}

function renderBioZones(D){
const bio=D.biosecurity;const today=todayStr();
let h=`<div class="card"><div class="page-header"><h3>üè† ${t('bio_zones')}</h3>
<button class="btn btn-primary btn-sm" onclick="showBioZoneForm()">${t('bio_add_zone')}</button></div>`;
if(!bio.zones.length)return h+emptyState('üè†',t('no_data'))+'</div>';
h+='<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px">';
bio.zones.forEach(z=>{
const overdue=z.lastDisinfection&&z.frequencyDays&&(()=>{const n=new Date(z.lastDisinfection+'T12:00:00');n.setDate(n.getDate()+z.frequencyDays);return n.toISOString().substring(0,10)<today;})();
h+=`<div class="card" style="border-left:4px solid ${z.riskLevel==='red'?'#F44336':z.riskLevel==='yellow'?'#FFC107':'#4CAF50'}">
<div style="display:flex;justify-content:space-between;align-items:center">
<h4>${z.name}</h4><span class="risk-badge risk-${z.riskLevel}">${t('bio_risk_'+z.riskLevel)}</span></div>
<p style="font-size:13px;color:var(--text-light)">${t('bio_zone_last_disinfection')}: ${z.lastDisinfection?fmtDate(z.lastDisinfection):'-'}
${overdue?' <span style="color:var(--danger);font-weight:700">'+t('bio_protocol_overdue')+'</span>':''}</p>
<p style="font-size:13px;color:var(--text-light)">${t('bio_zone_frequency')}: ${z.frequencyDays||'-'} ${t('flock_days')}</p>
${z.notes?'<p style="font-size:12px">'+z.notes+'</p>':''}
<div class="btn-group" style="margin-top:8px"><button class="btn btn-secondary btn-sm" onclick="showBioZoneForm('${z.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteBioZone('${z.id}')">${t('delete')}</button></div></div>`;});
return h+'</div></div>';
}
function showBioZoneForm(id){
const D=loadData();const z=id?D.biosecurity.zones.find(x=>x.id===id):null;
openModal(z?t('edit'):t('bio_add_zone'),`
<div class="form-row"><div class="form-group"><label>${t('bio_zone_name')}</label><input id="bz-name" value="${z?z.name:''}"></div>
<div class="form-group"><label>${t('bio_zone_risk')}</label><select id="bz-risk">
<option value="green"${z&&z.riskLevel==='green'?' selected':''}>${t('bio_risk_green')}</option>
<option value="yellow"${z&&z.riskLevel==='yellow'?' selected':''}>${t('bio_risk_yellow')}</option>
<option value="red"${z&&z.riskLevel==='red'?' selected':''}>${t('bio_risk_red')}</option></select></div></div>
<div class="form-row"><div class="form-group"><label>${t('bio_zone_last_disinfection')}</label><input type="date" id="bz-last" value="${z?z.lastDisinfection||'':''}"></div>
<div class="form-group"><label>${t('bio_zone_frequency')}</label><input type="number" id="bz-freq" value="${z?z.frequencyDays||'':''}" min="1"></div></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="bz-notes">${z?z.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveBioZone('${id||''}')">${t('save')}</button></div>`);
}
function saveBioZone(id){
const D=loadData();const o={name:$('bz-name').value,riskLevel:$('bz-risk').value,
lastDisinfection:$('bz-last').value,frequencyDays:parseInt($('bz-freq').value)||0,notes:$('bz-notes').value};
if(!o.name){toast(t('required'),true);return;}
if(id){const i=D.biosecurity.zones.findIndex(z=>z.id===id);if(i>=0)D.biosecurity.zones[i]={...D.biosecurity.zones[i],...o};}
else{o.id=genId();D.biosecurity.zones.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderBiosecurity();
}
function deleteBioZone(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.biosecurity.zones=D.biosecurity.zones.filter(z=>z.id!==id);saveData(D);toast(t('cfg_saved'));renderBiosecurity();}

function renderBioPests(D){
const bio=D.biosecurity;
let h=`<div class="card"><div class="page-header"><h3>üêÄ ${t('bio_pests')}</h3>
<button class="btn btn-primary btn-sm" onclick="showBioPestForm()">${t('bio_add_pest')}</button></div>`;
if(!bio.pestSightings.length)return h+emptyState('üêÄ',t('no_data'))+'</div>';
h+='<div class="stress-timeline" style="padding-left:20px">';
bio.pestSightings.sort((a,b)=>b.date.localeCompare(a.date)).forEach(p=>{
const sColor=['','#4CAF50','#8BC34A','#FFC107','#FF9800','#F44336'][p.severity]||'#999';
const typeIcon={rodent:'üêÄ',fly:'ü™∞',wild_bird:'üê¶',other:'üêõ'}[p.type]||'üêõ';
h+=`<div class="stress-event" style="border-left:4px solid ${sColor}">
<div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:4px">
<strong>${fmtDate(p.date)} ${typeIcon} ${t('bio_pest_'+p.type)||p.type}</strong>
<span>${p.resolved?'‚úÖ '+t('bio_pest_resolved'):'‚ùå '+t('active')}</span></div>
<p style="margin:4px 0">${t('bio_pest_location')}: ${p.location||'-'} | ${t('bio_pest_severity')}: ${'‚≠ê'.repeat(p.severity||1)}</p>
${p.action?'<p style="font-size:12px;color:var(--text-light)">'+t('bio_pest_action')+': '+p.action+'</p>':''}
<div class="btn-group" style="margin-top:4px">
${!p.resolved?'<button class="btn btn-primary btn-sm" onclick="resolveBioPest(\''+p.id+'\')">‚úÖ '+t('bio_pest_resolved')+'</button>':''}
<button class="btn btn-secondary btn-sm" onclick="showBioPestForm('${p.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteBioPest('${p.id}')">${t('delete')}</button></div></div>`;});
return h+'</div></div>';
}
function showBioPestForm(id){
const D=loadData();const p=id?D.biosecurity.pestSightings.find(x=>x.id===id):null;
openModal(p?t('edit'):t('bio_add_pest'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="bp-date" value="${p?p.date:todayStr()}"></div>
<div class="form-group"><label>${t('bio_pest_type')}</label><select id="bp-type">
<option value="rodent"${p&&p.type==='rodent'?' selected':''}>${t('bio_pest_rodent')}</option>
<option value="fly"${p&&p.type==='fly'?' selected':''}>${t('bio_pest_fly')}</option>
<option value="wild_bird"${p&&p.type==='wild_bird'?' selected':''}>${t('bio_pest_wild_bird')}</option>
<option value="other"${p&&p.type==='other'?' selected':''}>${t('bio_pest_other')}</option></select></div></div>
<div class="form-row"><div class="form-group"><label>${t('bio_pest_location')}</label><select id="bp-loc">
<option value="">--</option>
${D.biosecurity.zones.map(z=>`<option value="${z.name}"${p&&p.location===z.name?' selected':''}>${z.name}</option>`).join('')}
<option value="__other__">Otra...</option>
</select></div>
<div class="form-group"><label>${t('bio_pest_severity')} (1-5)</label><input type="number" id="bp-sev" value="${p?p.severity||3:3}" min="1" max="5"></div></div>
<div class="form-group"><label>${t('bio_pest_action')}</label><textarea id="bp-action">${p?p.action||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveBioPest('${id||''}')">${t('save')}</button></div>`);
}
function saveBioPest(id){
const D=loadData();const o={date:$('bp-date').value,type:$('bp-type').value,
location:$('bp-loc').value,severity:parseInt($('bp-sev').value)||3,action:$('bp-action').value,resolved:false};
if(!o.date){toast(t('required'),true);return;}
if(id){const i=D.biosecurity.pestSightings.findIndex(p=>p.id===id);
if(i>=0){o.resolved=D.biosecurity.pestSightings[i].resolved;D.biosecurity.pestSightings[i]={...D.biosecurity.pestSightings[i],...o};}}
else{o.id=genId();D.biosecurity.pestSightings.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderBiosecurity();
}
function resolveBioPest(id){const D=loadData();const p=D.biosecurity.pestSightings.find(x=>x.id===id);if(p){p.resolved=true;saveData(D);toast(t('cfg_saved'));renderBiosecurity();}}
function deleteBioPest(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.biosecurity.pestSightings=D.biosecurity.pestSightings.filter(p=>p.id!==id);saveData(D);toast(t('cfg_saved'));renderBiosecurity();}

function renderBioProtocols(D){
const bio=D.biosecurity;const today=todayStr();
let h=`<div class="card"><div class="page-header"><h3>üìã ${t('bio_protocols')}</h3>
<button class="btn btn-primary btn-sm" onclick="showBioProtocolForm()">${t('bio_add_protocol')}</button></div>`;
if(!bio.protocols.length)return h+emptyState('üìã',t('no_data'))+'</div>';
h+='<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px">';
bio.protocols.forEach(p=>{
const freqDays={daily:1,weekly:7,monthly:30}[p.frequency]||7;
const overdue=p.lastCompleted&&(()=>{const n=new Date(p.lastCompleted+'T12:00:00');n.setDate(n.getDate()+freqDays);return n.toISOString().substring(0,10)<today;})();
h+=`<div class="card" style="border-top:3px solid ${overdue?'var(--danger)':'var(--primary)'}">
<h4>${p.name}</h4>
<p style="font-size:13px;color:var(--text-light)">${t('bio_protocol_frequency')}: ${t('bio_protocol_'+p.frequency)} | ${t('bio_protocol_last')}: ${p.lastCompleted?fmtDate(p.lastCompleted):'-'}
${overdue?' <span style="color:var(--danger);font-weight:700">'+t('bio_protocol_overdue')+'</span>':''}</p>`;
if(p.items&&p.items.length){h+='<ul style="font-size:13px;margin:8px 0">';p.items.forEach(it=>{h+=`<li>${it}</li>`;});h+='</ul>';}
h+=`<div class="btn-group"><button class="btn btn-primary btn-sm" onclick="completeBioProtocol('${p.id}')">‚úÖ ${t('bio_protocol_complete')}</button>
<button class="btn btn-secondary btn-sm" onclick="showBioProtocolForm('${p.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteBioProtocol('${p.id}')">${t('delete')}</button></div></div>`;});
return h+'</div></div>';
}
function showBioProtocolForm(id){
const D=loadData();const p=id?D.biosecurity.protocols.find(x=>x.id===id):null;
openModal(p?t('edit'):t('bio_add_protocol'),`
<div class="form-row"><div class="form-group"><label>${t('bio_protocol_name')}</label><select id="bpr-name">${catalogSelect(CATALOGS.bioProtocols,p?p.name:'')}</select></div>
<div class="form-group"><label>${t('bio_protocol_frequency')}</label><select id="bpr-freq">
<option value="daily"${p&&p.frequency==='daily'?' selected':''}>${t('bio_protocol_daily')}</option>
<option value="weekly"${p&&p.frequency==='weekly'?' selected':''}>${t('bio_protocol_weekly')}</option>
<option value="monthly"${p&&p.frequency==='monthly'?' selected':''}>${t('bio_protocol_monthly')}</option></select></div></div>
<div class="form-group"><label>${t('bio_protocol_items')} (${t('notes')}: uno por l√≠nea)</label>
<textarea id="bpr-items" rows="5">${p&&p.items?p.items.join('\n'):''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveBioProtocol('${id||''}')">${t('save')}</button></div>`);
}
function saveBioProtocol(id){
const D=loadData();const o={name:$('bpr-name').value,frequency:$('bpr-freq').value,
items:$('bpr-items').value.split('\n').map(s=>s.trim()).filter(Boolean),lastCompleted:null};
if(!o.name){toast(t('required'),true);return;}
if(id){const i=D.biosecurity.protocols.findIndex(p=>p.id===id);
if(i>=0){o.lastCompleted=D.biosecurity.protocols[i].lastCompleted;D.biosecurity.protocols[i]={...D.biosecurity.protocols[i],...o};}}
else{o.id=genId();D.biosecurity.protocols.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderBiosecurity();
}
function completeBioProtocol(id){const D=loadData();const p=D.biosecurity.protocols.find(x=>x.id===id);if(p){p.lastCompleted=todayStr();saveData(D);toast(t('cfg_saved'));renderBiosecurity();}}
function deleteBioProtocol(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.biosecurity.protocols=D.biosecurity.protocols.filter(p=>p.id!==id);saveData(D);toast(t('cfg_saved'));renderBiosecurity();}

// ============ EGG TRACEABILITY MODULE ============
function renderTraceability(){
const D=loadData();const batches=D.traceability.batches;
let h=`<div class="page-header"><h2>${t('trace_title')}</h2>
<div class="btn-group"><button class="btn btn-primary" onclick="showBatchForm()">${t('trace_add')}</button>
<button class="btn btn-secondary" onclick="exportBatchCSV()">${t('export_csv')}</button></div></div>`;
// Search
h+=`<div class="card"><div class="form-row"><div class="form-group" style="flex:1">
<input id="trace-search" placeholder="${t('trace_search')}" oninput="filterBatches()"></div></div></div>`;
if(!batches.length){h+=emptyState('üì¶',t('no_data'));$('sec-trazabilidad').innerHTML=h;return;}
h+=`<div id="batch-list">`;h+=renderBatchList(batches,D);h+=`</div>`;
$('sec-trazabilidad').innerHTML=h;
}
function renderBatchList(batches,D){
let h=`<div class="card"><div class="table-wrap"><table><thead><tr>
<th>${t('trace_batch_id')}</th><th>${t('date')}</th><th>${t('prod_flock')}</th><th>${t('trace_house')}</th>
<th>${t('trace_rack')}</th><th>${t('trace_box_count')}</th><th>${t('trace_eggs_per_box')}</th>
<th>${t('prod_egg_type')}</th><th>${t('fin_client')}</th><th>${t('trace_delivery')}</th><th>${t('actions')}</th>
</tr></thead><tbody>`;
batches.sort((a,b)=>b.date.localeCompare(a.date)).forEach(b=>{
const f=D.flocks.find(x=>x.id===b.flockId);const c=D.clients.find(x=>x.id===b.clientId);
h+=`<tr><td><code>${b.id.substring(0,8)}</code></td><td>${fmtDate(b.date)}</td><td>${f?f.name:'-'}</td>
<td>${b.house||'-'}</td><td>${b.rackNumber||'-'}</td><td>${fmtNum(b.boxCount)}</td><td>${fmtNum(b.eggsPerBox)}</td>
<td>${b.eggType?t('prod_type_'+b.eggType)||b.eggType:'-'}</td>
<td>${c?c.name:'-'}</td><td>${b.deliveryDate?fmtDate(b.deliveryDate):'-'}</td>
<td><div class="btn-group"><button class="btn btn-secondary btn-sm" onclick="showBatchTrace('${b.id}')" title="${t('trace_origin')}">üîç</button>
<button class="btn btn-secondary btn-sm" onclick="showBatchForm('${b.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deleteBatch('${b.id}')">${t('delete')}</button></div></td></tr>`;});
return h+'</tbody></table></div></div>';
}
function showBatchForm(id){
const D=loadData();const b=id?D.traceability.batches.find(x=>x.id===id):null;
openModal(b?t('edit'):t('trace_add'),`
<div class="form-row"><div class="form-group"><label>${t('date')}</label><input type="date" id="tb-date" value="${b?b.date:todayStr()}"></div>
<div class="form-group"><label>${t('prod_flock')}</label><select id="tb-flock">${flockSelect(b?b.flockId:'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('trace_house')}</label><select id="tb-house" onchange="onHouseChange()">${houseSelect(b?b.house||'':'')}</select></div>
<div class="form-group"><label>${t('trace_rack')}</label><select id="tb-rack">${rackSelect(b?b.house||'':'',b?b.rackNumber||'':'')}</select></div></div>
<div class="form-row"><div class="form-group"><label>${t('trace_box_count')}</label><input type="number" id="tb-boxes" value="${b?b.boxCount||'':''}" min="1"></div>
<div class="form-group"><label>${t('trace_eggs_per_box')}</label><input type="number" id="tb-epb" value="${b?b.eggsPerBox||30:30}" min="1"></div></div>
<div class="form-row"><div class="form-group"><label>${t('prod_egg_type')}</label><select id="tb-type">
<option value="conventional"${b&&b.eggType==='conventional'?' selected':''}>${t('prod_type_conventional')}</option>
<option value="free_range"${b&&b.eggType==='free_range'?' selected':''}>${t('prod_type_free_range')}</option>
<option value="organic"${b&&b.eggType==='organic'?' selected':''}>${t('prod_type_organic')}</option>
<option value="pasture_raised"${b&&b.eggType==='pasture_raised'?' selected':''}>${t('prod_type_pasture')}</option>
<option value="decorative"${b&&b.eggType==='decorative'?' selected':''}>${t('prod_type_decorative')}</option></select></div>
<div class="form-group"><label>${t('fin_client')}</label><select id="tb-client">${clientSelect(b?b.clientId:'')}</select></div></div>
<div class="form-group"><label>${t('trace_delivery')}</label><input type="date" id="tb-delivery" value="${b?b.deliveryDate||'':''}"></div>
<div class="form-group"><label>${t('notes')}</label><textarea id="tb-notes">${b?b.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveBatch('${id||''}')">${t('save')}</button></div>`);
}
function saveBatch(id){
const D=loadData();const o={date:$('tb-date').value,flockId:$('tb-flock').value,house:$('tb-house').value,
rackNumber:$('tb-rack').value,boxCount:parseInt($('tb-boxes').value)||0,eggsPerBox:parseInt($('tb-epb').value)||30,
eggType:$('tb-type').value,clientId:$('tb-client').value,deliveryDate:$('tb-delivery').value,notes:$('tb-notes').value};
if(!o.date||!o.flockId){toast(t('required'),true);return;}
o.qrCode=`EGGLOGU|BATCH:${id||genId()}|FLOCK:${o.flockId}|DATE:${o.date}|HOUSE:${o.house}|TYPE:${o.eggType}`;
if(id){const i=D.traceability.batches.findIndex(b=>b.id===id);if(i>=0)D.traceability.batches[i]={...D.traceability.batches[i],...o};}
else{o.id=genId();o.qrCode=o.qrCode.replace('BATCH:'+o.id,'BATCH:'+o.id);D.traceability.batches.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderTraceability();
}
function deleteBatch(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.traceability.batches=D.traceability.batches.filter(b=>b.id!==id);saveData(D);toast(t('cfg_saved'));renderTraceability();}
function showBatchTrace(id){
const D=loadData();const b=D.traceability.batches.find(x=>x.id===id);if(!b)return;
const f=D.flocks.find(x=>x.id===b.flockId);const c=D.clients.find(x=>x.id===b.clientId);
const breed=f?f.breed||'generic':'generic';
const l7=D.dailyProduction.filter(p=>p.flockId===b.flockId&&p.date<=b.date).sort((a,c)=>c.date.localeCompare(a.date)).slice(0,7);
const avgFCR=l7.length>0?'~':'N/A';
const hs=f?computeFlockHealthScore(f.id,D):'N/A';
openModal('üîç '+t('trace_origin'),`
<div class="card" style="margin:0"><h4>${t('trace_batch_id')}: ${b.id.substring(0,8)}</h4>
<div class="stat-row"><span class="stat-label">${t('trace_house')}</span><span class="stat-value">${b.house||'-'}</span></div>
<div class="stat-row"><span class="stat-label">${t('prod_flock')}</span><span class="stat-value">${f?f.name+' ('+breed+')':'-'}</span></div>
<div class="stat-row"><span class="stat-label">${t('date')}</span><span class="stat-value">${fmtDate(b.date)}</span></div>
<div class="stat-row"><span class="stat-label">${t('flock_health')}</span><span class="stat-value">${hs}</span></div>
<div class="stat-row"><span class="stat-label">${t('prod_egg_type')}</span><span class="stat-value">${t('prod_type_'+b.eggType)||b.eggType}</span></div>
<div class="stat-row"><span class="stat-label">${t('fin_client')}</span><span class="stat-value">${c?c.name:'-'}</span></div>
<hr><div class="qr-display">${b.qrCode||'N/A'}</div>
</div><div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('close')}</button></div>`);
}
function computeFlockHealthScore(fid,D){
let score=100;
const deaths=D.dailyProduction.filter(p=>p.flockId===fid).reduce((s,p)=>s+(p.deaths||0),0);
const f=D.flocks.find(x=>x.id===fid);if(!f)return 0;
const mortality=f.count>0?(deaths/f.count*100):0;
score-=Math.min(30,mortality*3);
const activeOutbreaks=D.outbreaks.filter(o=>o.flockId===fid&&o.status==='active').length;
score-=activeOutbreaks*20;
return Math.max(0,Math.round(score));
}
function filterBatches(){
const q=($('trace-search')?.value||'').toLowerCase();const D=loadData();
const filtered=q?D.traceability.batches.filter(b=>b.id.toLowerCase().includes(q)||(b.qrCode||'').toLowerCase().includes(q)||(b.house||'').toLowerCase().includes(q)):D.traceability.batches;
const el=$('batch-list');if(el)el.innerHTML=renderBatchList(filtered,D);
}
function exportBatchCSV(){
const D=loadData();const batches=D.traceability.batches;if(!batches.length)return;
let csv='Batch ID,Date,Flock,House,Rack,Boxes,Eggs/Box,Type,Client,Delivery,QR\n';
batches.forEach(b=>{const f=D.flocks.find(x=>x.id===b.flockId);const c=D.clients.find(x=>x.id===b.clientId);
csv+=`"${b.id}","${b.date}","${f?f.name:''}","${b.house||''}","${b.rackNumber||''}",${b.boxCount},${b.eggsPerBox},"${b.eggType||''}","${c?c.name:''}","${b.deliveryDate||''}","${b.qrCode||''}"\n`;});
const blob=new Blob([csv],{type:'text/csv'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='egglogu_batches.csv';a.click();
}

// ============ PRODUCTION PLANNING MODULE ============
function renderPlanning(){
const D=loadData();const plans=D.productionPlans;
let h=`<div class="page-header"><h2>${t('plan_title')}</h2>
<button class="btn btn-primary" onclick="showPlanForm()">${t('plan_add')}</button></div>`;
if(!plans.length){h+=emptyState('üìÖ',t('no_data'));$('sec-planificacion').innerHTML=h;return;}
h+='<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:16px">';
plans.forEach(p=>{
const totalExpected=estimateTotalProduction(D,p);
const gap=totalExpected-p.eggsNeeded;const pct=p.eggsNeeded>0?(totalExpected/p.eggsNeeded*100):0;
const statusColor=pct>=100?'var(--success)':pct>=80?'var(--warning)':'var(--danger)';
const statusText=pct>=100?t('plan_on_track'):pct>=80?t('plan_behind'):t('plan_behind');
const c=D.clients.find(x=>x.id===p.clientId);
h+=`<div class="card" style="border-top:3px solid ${statusColor}">
<div style="display:flex;justify-content:space-between;align-items:center"><h3>${p.name}</h3>
<span style="color:${statusColor};font-weight:700">${fmtNum(pct,0)}%</span></div>
<p style="font-size:13px;color:var(--text-light)">${t('plan_target_date')}: ${fmtDate(p.targetDate)}${c?' | '+c.name:''}</p>
<div class="stat-row"><span class="stat-label">${t('plan_eggs_needed')}</span><span class="stat-value">${fmtNum(p.eggsNeeded)}</span></div>
<div class="stat-row"><span class="stat-label">${t('plan_expected')}</span><span class="stat-value">${fmtNum(totalExpected)}</span></div>
<div class="stat-row"><span class="stat-label">${t('plan_gap')}</span><span class="stat-value" style="color:${statusColor}">${gap>0?'+':''}${fmtNum(gap)} (${statusText})</span></div>`;
if(p.flockAllocations&&p.flockAllocations.length){
h+=`<div style="margin-top:8px;font-size:12px">`;
p.flockAllocations.forEach(a=>{const fl=D.flocks.find(x=>x.id===a.flockId);
h+=`<div class="stat-row"><span class="stat-label">${fl?fl.name:'?'}</span><span class="stat-value">${fmtNum(a.expectedEggs)} ${t('eggs_unit')}</span></div>`;});
h+='</div>';}
h+=`<div class="btn-group" style="margin-top:12px">
<button class="btn btn-secondary btn-sm" onclick="showPlanForm('${p.id}')">${t('edit')}</button>
<button class="btn btn-danger btn-sm" onclick="deletePlan('${p.id}')">${t('delete')}</button></div></div>`;});
h+='</div>';
$('sec-planificacion').innerHTML=h;
}
function estimateProduction(D,flockId,fromDate,toDate){
const f=D.flocks.find(x=>x.id===flockId);if(!f||!f.birthdate)return 0;
const bkey2=f.breed&&BREED_CURVES[f.breed]?f.breed:(f.targetCurve&&BREED_CURVES[f.targetCurve]?f.targetCurve:'generic');const curve=BREED_CURVES[bkey2]||BREED_CURVES.generic;
const birth=new Date(f.birthdate+'T12:00:00');
const from=new Date(fromDate+'T12:00:00');const to=new Date(toDate+'T12:00:00');
let total=0;const hens=activeHensByFlock(flockId);
for(let d=new Date(from);d<=to;d.setDate(d.getDate()+1)){
const ageWeeks=Math.floor((d-birth)/(7*24*3600000));
const weekIdx=ageWeeks-18;
if(weekIdx<0)continue;
const henDay=weekIdx<curve.length?curve[weekIdx]:curve[curve.length-1];
total+=hens*(henDay/100);
}
return Math.round(total);
}
function estimateTotalProduction(D,plan){
if(!plan.flockAllocations||!plan.flockAllocations.length){
let total=0;D.flocks.filter(f=>f.status!=='descarte').forEach(f=>{
total+=estimateProduction(D,f.id,todayStr(),plan.targetDate);});return total;}
return plan.flockAllocations.reduce((s,a)=>s+(a.expectedEggs||estimateProduction(D,a.flockId,todayStr(),plan.targetDate)),0);
}
function showPlanForm(id){
const D=loadData();const p=id?D.productionPlans.find(x=>x.id===id):null;
let flockChecks='';D.flocks.filter(f=>f.status!=='descarte').forEach(f=>{
const alloc=p?p.flockAllocations?.find(a=>a.flockId===f.id):null;
const est=estimateProduction(D,f.id,todayStr(),p?p.targetDate:new Date(Date.now()+30*86400000).toISOString().substring(0,10));
flockChecks+=`<div class="form-row" style="align-items:center"><label><input type="checkbox" class="plan-flock" value="${f.id}"${alloc?' checked':''}> ${f.name}</label>
<span style="font-size:12px;color:var(--text-light)">${t('plan_estimate')}: ~${fmtNum(est)}</span></div>`;});
openModal(p?t('edit'):t('plan_add'),`
<div class="form-row"><div class="form-group"><label>${t('plan_name')}</label><input id="pl-name" value="${p?p.name:''}"></div>
<div class="form-group"><label>${t('plan_target_date')}</label><input type="date" id="pl-date" value="${p?p.targetDate:''}"></div></div>
<div class="form-row"><div class="form-group"><label>${t('plan_eggs_needed')}</label><input type="number" id="pl-eggs" value="${p?p.eggsNeeded:''}" min="0"></div>
<div class="form-group"><label>${t('fin_client')}</label><select id="pl-client">${clientSelect(p?p.clientId:'')}</select></div></div>
<div class="form-group"><label>${t('plan_allocations')}</label>${flockChecks}</div>
<div class="form-group"><label>${t('notes')}</label><textarea id="pl-notes">${p?p.notes||'':''}</textarea></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="savePlan('${id||''}')">${t('save')}</button></div>`);
}
function savePlan(id){
const D=loadData();const checks=document.querySelectorAll('.plan-flock:checked');
const allocs=Array.from(checks).map(c=>({flockId:c.value,expectedEggs:estimateProduction(D,c.value,todayStr(),$('pl-date').value)}));
const o={name:$('pl-name').value,targetDate:$('pl-date').value,eggsNeeded:parseInt($('pl-eggs').value)||0,
clientId:$('pl-client').value,notes:$('pl-notes').value,flockAllocations:allocs};
if(!o.name||!o.targetDate){toast(t('required'),true);return;}
if(id){const i=D.productionPlans.findIndex(p=>p.id===id);if(i>=0)D.productionPlans[i]={...D.productionPlans[i],...o};}
else{o.id=genId();D.productionPlans.push(o);}
saveData(D);closeModal();toast(t('cfg_saved'));renderPlanning();
}
function deletePlan(id){if(!confirm(t('confirm_delete')))return;const D=loadData();D.productionPlans=D.productionPlans.filter(p=>p.id!==id);saveData(D);toast(t('cfg_saved'));renderPlanning();}

// ============ CAMPO MODE ============
function toggleCampoMode(){
const D=loadData();D.settings.campoMode=!D.settings.campoMode;
if(D.settings.campoMode)D.settings.vetMode=false;
saveData(D);applyCampoMode(D);nav('dashboard');
}
function applyCampoMode(D){
document.body.classList.toggle('campo-mode',D.settings.campoMode);
$('btn-campo')?.classList.toggle('active',D.settings.campoMode);
$('btn-vet')?.classList.toggle('active',D.settings.vetMode);
// Hide non-essential nav items in campo mode
document.querySelectorAll('#main-nav a').forEach(a=>{
const s=a.dataset.section;
if(D.settings.campoMode&&s!=='dashboard'&&s!=='produccion'){a.classList.add('campo-hide');}
else{a.classList.remove('campo-hide');}
});
}
function renderCampoDashboard(D){
const snap=computeKpiSnapshot();const alerts=getAlerts(D);
let h=`<div style="text-align:center;padding:20px 0"><h2>üåæ ${t('nav_campo_mode')}</h2></div>`;
h+=`<div style="display:grid;grid-template-columns:repeat(2,1fr);gap:16px;max-width:500px;margin:0 auto">`;
h+=`<div class="kpi-card" style="padding:24px;text-align:center"><div class="kpi-label">${t('kpi_today')}</div><div class="campo-kpi">${fmtNum(snap.eggsToday)}</div></div>`;
h+=`<div class="kpi-card" style="padding:24px;text-align:center"><div class="kpi-label">${t('kpi_henday')}</div><div class="campo-kpi">${fmtNum(snap.henDay,1)}%</div></div>`;
h+=`<div class="kpi-card" style="padding:24px;text-align:center"><div class="kpi-label">${t('kpi_mortality')}</div><div class="campo-kpi">${fmtNum(snap.mortality,1)}%</div></div>`;
h+=`<div class="kpi-card" style="padding:24px;text-align:center"><div class="kpi-label">${t('kpi_alerts')}</div><div class="campo-kpi">${alerts.length}</div></div>`;
h+=`</div>`;
h+=`<button class="campo-btn-big" onclick="showCampoQuickEntry()">üìù ${t('campo_today')}</button>`;
if(alerts.length){h+=`<div class="card" style="margin-top:16px"><h3>${t('dash_alerts')}</h3>`;
alerts.forEach(a=>{h+=`<div class="alert-card alert-${a.type}">${a.icon} ${a.msg}</div>`;});h+='</div>';}
return h;
}
function showCampoQuickEntry(){
const D=loadData();
openModal('üìù '+t('campo_quick_entry'),`
<div class="form-group"><label>${t('prod_flock')}</label><select id="cq-flock">${flockSelect('')}</select></div>
<div class="form-group"><label>${t('prod_eggs')}</label><input type="number" id="cq-eggs" min="0" style="font-size:24px;padding:12px"></div>
<div class="form-group"><label>${t('prod_deaths')}</label><input type="number" id="cq-deaths" min="0" value="0"></div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
<button class="btn btn-primary" onclick="saveCampoQuick()" style="font-size:18px;padding:12px 24px">${t('save')}</button></div>`);
}
function saveCampoQuick(){
const D=loadData();const o={id:genId(),date:todayStr(),flockId:$('cq-flock').value,
eggsCollected:parseInt($('cq-eggs').value)||0,deaths:parseInt($('cq-deaths').value)||0,
eggsBroken:0,eggsS:0,eggsM:0,eggsL:0,eggsXL:0,eggsJumbo:0,shellColor:'',yolkScore:0,deathCause:'',notes:'campo mode'};
if(!o.flockId){toast(t('required'),true);return;}
D.dailyProduction.push(o);saveData(D);closeModal();toast(t('cfg_saved'));nav('dashboard');
}

// ============ VET MODE ============
function toggleVetMode(){
const D=loadData();D.settings.vetMode=!D.settings.vetMode;
if(D.settings.vetMode)D.settings.campoMode=false;
saveData(D);applyCampoMode(D);
if(D.settings.vetMode)showVetDashboard();else nav('dashboard');
}
function showVetDashboard(){
const D=loadData();
let h=`<div style="text-align:center;padding:12px 0"><h2>ü©∫ ${t('nav_vet_mode')}</h2></div>`;
h+=`<div class="form-group"><label>${t('vet_select_farm')}</label><select id="vet-flock" onchange="renderVetFlock()">${flockSelect('',true)}</select></div>`;
h+=`<div id="vet-content"></div>`;
h+=`<div class="card" style="margin-top:16px"><h4>${t('actions')}</h4><div class="btn-group">
<button class="btn btn-primary" onclick="vetAction('visit')">‚úÖ ${t('vet_visit')}</button>
<button class="btn btn-secondary" onclick="vetAction('vaccines')">üíâ ${t('vet_vaccines')}</button>
<button class="btn btn-secondary" onclick="vetAction('pending')">‚è≥ ${t('vet_pending')}</button></div></div>`;
$('sec-dashboard').innerHTML=h;
}
function renderVetFlock(){
const fid=$('vet-flock')?.value;const D=loadData();
if(!fid){$('vet-content').innerHTML='';return;}
const f=D.flocks.find(x=>x.id===fid);if(!f)return;
const hs=computeFlockHealthScore(fid,D);
const outbreaks=D.outbreaks.filter(o=>o.flockId===fid&&o.status==='active');
const lastEnv=D.environment.length>0?D.environment[D.environment.length-1]:null;
const pendingVac=D.vaccines.filter(v=>v.flockId===fid&&v.status!=='applied');
let h=`<div class="kpi-grid">`;
h+=kpi(t('flock_health'),hs+'/100','',hs<50?'danger':hs<70?'warning':'');
h+=kpi(t('out_title'),outbreaks.length.toString(),outbreaks.length?t('out_active'):'‚úÖ',outbreaks.length?'danger':'');
h+=kpi(t('vac_title'),pendingVac.length.toString(),t('vac_pending'),'');
h+=`</div>`;
if(outbreaks.length){h+=`<div class="card"><h4>ü¶† ${t('out_title')}</h4>`;
outbreaks.forEach(o=>{h+=`<div class="alert-card alert-danger">${o.disease} - ${fmtDate(o.startDate)} | ${o.treatment||'-'}</div>`;});h+='</div>';}
if(lastEnv){h+=`<div class="card"><h4>üå°Ô∏è ${t('env_title')}</h4>
<p>${t('env_temp')}: ${lastEnv.temperature||'-'}¬∞C | ${t('env_humidity')}: ${lastEnv.humidity||'-'}%</p></div>`;}
if(pendingVac.length){h+=`<div class="card"><h4>üíâ ${t('vac_title')}</h4>`;
pendingVac.forEach(v=>{h+=`<div class="alert-card alert-${v.scheduledDate<todayStr()?'danger':'warning'}">${v.vaccineName} - ${fmtDate(v.scheduledDate)} (${v.scheduledDate<todayStr()?t('vac_overdue'):t('vac_pending')})</div>`;});h+='</div>';}
// Cross-contamination check from biosecurity visitors
const recentVisitors=D.biosecurity.visitors.filter(v=>v.fromFarmHealth==='outbreak'&&v.date>=new Date(Date.now()-7*86400000).toISOString().substring(0,10));
if(recentVisitors.length){h+=`<div class="alert-card alert-danger">${t('bio_cross_risk')}: ${recentVisitors.map(v=>v.name).join(', ')}</div>`;}
$('vet-content').innerHTML=h;
}
function vetAction(type){
const D=loadData();const fid=$('vet-flock')?.value||'';const f=D.flocks.find(x=>x.id===fid);
const note=type==='visit'?t('vet_visit'):type==='vaccines'?t('vet_vaccines'):t('vet_pending');
D.logbook.push({id:genId(),date:todayStr(),entry:'ü©∫ '+note+(f?' - '+f.name:''),category:'health'});
// Auto-create biosecurity visitor record
D.biosecurity.visitors.push({id:genId(),date:todayStr(),name:'Veterinario',company:'',purpose:note,zone:'',vehiclePlate:'',disinfected:true,fromFarmId:'',fromFarmHealth:'healthy',notes:''});
saveData(D);toast(t('cfg_saved'));
}

// ============ OUTBREAK RISK CLASSIFIER ============
function computeOutbreakRisk(D){
const hens=activeHens();if(hens===0)return{probability:0,classification:0,factors:[],recommendations:[]};
const factors=[];
// 1. Mortality spike (0.25)
const l7prod=D.dailyProduction.sort((a,b)=>b.date.localeCompare(a.date)).slice(0,7);
const l7deaths=l7prod.reduce((s,p)=>s+(p.deaths||0),0);
const deathRate=hens>0?(l7deaths/hens*100):0;
const mortFactor=Math.min(1,deathRate/10);
factors.push({name:tc('Mortalidad')||t('kpi_mortality')||'Mortality',weight:0.25,value:mortFactor,detail:fmtNum(deathRate,2)+'%'});
// 2. FCR deterioration (0.15)
const d30=new Date();d30.setDate(d30.getDate()-30);const d30s=d30.toISOString().substring(0,10);
const f30=D.feed.consumption.filter(c=>c.date>=d30s);const e30=D.dailyProduction.filter(p=>p.date>=d30s);
const tfkg=f30.reduce((s,c)=>s+(c.quantityKg||0),0);const tekg=e30.reduce((s,p)=>s+(p.eggsCollected||0),0)*0.06;
const fcr=tekg>0?tfkg/tekg:0;
const fcrFactor=fcr>0?Math.min(1,(fcr-2)/2):0;
factors.push({name:'FCR',weight:0.15,value:fcrFactor,detail:fmtNum(fcr,2)});
// 3. THI stress (0.15)
const lastW=D.weatherCache.length>0?D.weatherCache[D.weatherCache.length-1]:null;
let thiFactor=0;
if(lastW){const thi=calcTHI(lastW.temp,lastW.humidity);thiFactor=thi>28?Math.min(1,(thi-25)/10):0;
factors.push({name:'THI',weight:0.15,value:thiFactor,detail:fmtNum(thi,1)});}
else factors.push({name:'THI',weight:0.15,value:0,detail:'-'});
// 4. Production drop (0.20)
let prodFactor=0;
if(l7prod.length>=7&&typeof ss!=='undefined'){
const points=l7prod.map((p,i)=>[i,p.eggsCollected||0]);
const reg=ss.linearRegression(points);
prodFactor=reg.m<0?Math.min(1,Math.abs(reg.m)/10):0;
}
factors.push({name:t('pred_drop_risk')||'Production drop',weight:0.20,value:prodFactor,detail:''});
// 5. Active outbreaks (0.10)
const activeOut=D.outbreaks.filter(o=>o.status==='active').length;
const outFactor=Math.min(1,activeOut/3);
factors.push({name:t('out_active')||'Active outbreaks',weight:0.10,value:outFactor,detail:activeOut.toString()});
// 6. Vaccination gaps (0.10)
const today=todayStr();const overdueVac=D.vaccines.filter(v=>v.status!=='applied'&&v.scheduledDate<today).length;
const vacFactor=Math.min(1,overdueVac/5);
factors.push({name:t('vac_overdue')||'Vaccine gaps',weight:0.10,value:vacFactor,detail:overdueVac.toString()});
// 7. Stress events (0.05)
const d7=new Date();d7.setDate(d7.getDate()-7);const d7s=d7.toISOString().substring(0,10);
const recentStress=D.stressEvents.filter(e=>e.date>=d7s).length;
const stressFactor=Math.min(1,recentStress/3);
factors.push({name:t('stress_title')||'Recent stress',weight:0.05,value:stressFactor,detail:recentStress.toString()});
// Compute probability via sigmoid
const z=factors.reduce((s,f)=>s+f.weight*f.value*6,0)-2;
const probability=1/(1+Math.exp(-z));
const classification=probability>=0.5?1:0;
// Recommendations
const recommendations=[];
if(mortFactor>0.5)recommendations.push({priority:'high',icon:'üî¨',msg:t('rec_lab_samples')});
if(thiFactor>0.5)recommendations.push({priority:'high',icon:'üå°Ô∏è',msg:t('rec_ventilation')});
if(fcrFactor>0.5)recommendations.push({priority:'medium',icon:'üåæ',msg:t('rec_check_diet')});
if(prodFactor>0.5)recommendations.push({priority:'medium',icon:'üìâ',msg:t('rec_check_env')});
if(overdueVac>0)recommendations.push({priority:'medium',icon:'üíâ',msg:t('alert_vaccine_overdue')+': '+overdueVac});
return{probability,classification,factors,recommendations};
}

// ============ MULTI-STEP FORECAST ============
function computeForecast(D,days=7){
if(typeof ss==='undefined')return{dates:[],actual:[],forecast:[],upper:[],lower:[]};
const prod=D.dailyProduction.sort((a,b)=>a.date.localeCompare(b.date));
if(prod.length<7)return{dates:[],actual:[],forecast:[],upper:[],lower:[]};
const last14=prod.slice(-14);
const values=last14.map(p=>p.eggsCollected||0);
// Weighted Moving Average
const wmaForecast=[];
const weights=values.map((_,i)=>Math.exp(i*0.2));const wSum=weights.reduce((a,b)=>a+b,0);
const wma=values.reduce((s,v,i)=>s+v*weights[i],0)/wSum;
for(let i=0;i<days;i++)wmaForecast.push(wma);
// Linear regression
const points=values.map((v,i)=>[i,v]);
const reg=ss.linearRegression(points);const regLine=ss.linearRegressionLine(reg);
const lrForecast=[];
for(let i=0;i<days;i++)lrForecast.push(Math.max(0,regLine(values.length+i)));
// Ensemble (average)
const ensemble=wmaForecast.map((w,i)=>(w+lrForecast[i])/2);
// Residuals for confidence bands
const residuals=values.map((v,i)=>v-regLine(i));
const stdDev=typeof ss.standardDeviation==='function'?ss.standardDeviation(residuals):
Math.sqrt(residuals.reduce((s,r)=>s+r*r,0)/residuals.length);
const upper=ensemble.map(v=>v+stdDev);
const lower=ensemble.map(v=>Math.max(0,v-stdDev));
// Generate date labels
const dates=[];const lastDate=new Date(last14[last14.length-1].date+'T12:00:00');
for(let i=1;i<=days;i++){const d=new Date(lastDate);d.setDate(d.getDate()+i);dates.push(d.toISOString().substring(0,10));}
const actualDates=last14.map(p=>p.date);
return{dates,actual:values,actualDates,forecast:ensemble,upper,lower,wma:wmaForecast,lr:lrForecast};
}

// ============ RECOMMENDATION ENGINE ============
function getRecommendations(D){
const recs=[];const today=todayStr();const hens=activeHens();
// FCR check
const d30=new Date();d30.setDate(d30.getDate()-30);const d30s=d30.toISOString().substring(0,10);
const f30=D.feed.consumption.filter(c=>c.date>=d30s);const e30=D.dailyProduction.filter(p=>p.date>=d30s);
const tfkg=f30.reduce((s,c)=>s+(c.quantityKg||0),0);const tekg=e30.reduce((s,p)=>s+(p.eggsCollected||0),0)*0.06;
const fcr=tekg>0?tfkg/tekg:0;
if(fcr>2.4)recs.push({priority:'medium',icon:'üåæ',msg:t('rec_check_diet')});
// Mortality spike 48h
const d2=new Date();d2.setDate(d2.getDate()-2);const d2s=d2.toISOString().substring(0,10);
const recent48=D.dailyProduction.filter(p=>p.date>=d2s);
const deaths48=recent48.reduce((s,p)=>s+(p.deaths||0),0);
const prev48=D.dailyProduction.filter(p=>p.date<d2s).slice(-recent48.length||1);
const deathsPrev=prev48.reduce((s,p)=>s+(p.deaths||0),0);
if(deathsPrev>0&&deaths48>deathsPrev*1.2)recs.push({priority:'high',icon:'‚ö†Ô∏è',msg:t('rec_check_env')});
// Hen-Day vs breed curve
D.flocks.filter(f=>f.status==='produccion'&&f.birthdate).forEach(f=>{
const bkey3=f.breed&&BREED_CURVES[f.breed]?f.breed:(f.targetCurve&&BREED_CURVES[f.targetCurve]?f.targetCurve:'generic');const curve=BREED_CURVES[bkey3]||BREED_CURVES.generic;
const ageWeeks=Math.floor((new Date()-new Date(f.birthdate+'T12:00:00'))/(7*24*3600000));
const weekIdx=ageWeeks-18;if(weekIdx<0||weekIdx>=curve.length)return;
const expected=curve[weekIdx];const fhens=activeHensByFlock(f.id);
const l7=D.dailyProduction.filter(p=>p.flockId===f.id).sort((a,b)=>b.date.localeCompare(a.date)).slice(0,7);
const avgE=l7.length>0?l7.reduce((s,p)=>s+(p.eggsCollected||0),0)/l7.length:0;
const actual=fhens>0?(avgE/fhens*100):0;
if(expected-actual>10)recs.push({priority:'medium',icon:'üìâ',msg:t('rec_below_curve')+' ('+f.name+')'});
});
// Feed stock
const stock=D.feed.purchases.reduce((s,p)=>s+(p.quantityKg||0),0)-D.feed.consumption.reduce((s,c)=>s+(c.quantityKg||0),0);
const avgDaily=D.feed.consumption.length>0?D.feed.consumption.reduce((s,c)=>s+(c.quantityKg||0),0)/Math.max(1,D.feed.consumption.length):0;
if(avgDaily>0&&stock/avgDaily<7)recs.push({priority:'medium',icon:'üåæ',msg:t('rec_buy_feed')});
// No env reading in 3 days
const d3=new Date();d3.setDate(d3.getDate()-3);const d3s=d3.toISOString().substring(0,10);
const recentEnv=D.environment.filter(e=>e.date>=d3s);
if(!recentEnv.length&&D.environment.length>0)recs.push({priority:'low',icon:'üå°Ô∏è',msg:t('rec_record_env')});
// Overdue disinfection
if(D.biosecurity){D.biosecurity.zones.forEach(z=>{
if(z.lastDisinfection&&z.frequencyDays){
const next=new Date(z.lastDisinfection+'T12:00:00');next.setDate(next.getDate()+z.frequencyDays);
if(next.toISOString().substring(0,10)<today)recs.push({priority:'medium',icon:'üõ°Ô∏è',msg:t('rec_disinfect')+' '+z.name});
}});}
// Prolonged heat stress
const lastW=D.weatherCache.slice(-2);
if(lastW.length>=2&&lastW.every(w=>calcTHI(w.temp,w.humidity)>28))recs.push({priority:'high',icon:'üå°Ô∏è',msg:t('rec_heat_plan')});
return recs;
}

// ============ ACCESSIBILITY HELPERS ============
function applyFontScale(scale){
document.body.classList.remove('font-small','font-normal','font-large','font-xlarge');
document.body.classList.add('font-'+scale);
const D=loadData();D.settings.fontScale=scale;saveData(D);
}
function applyDarkMode(on){
document.body.classList.toggle('dark-mode',on);
const D=loadData();D.settings.darkMode=on;saveData(D);
if(on){applyTheme('dark');localStorage.setItem('egglogu_theme','dark');}
}

// ============ INIT ============
function init(){DATA=null;loadData();const savedTheme=localStorage.getItem('egglogu_theme');if(savedTheme&&THEMES[savedTheme])applyTheme(savedTheme);
// Apply saved settings
const D=loadData();
if(D.settings.fontScale&&D.settings.fontScale!=='normal')applyFontScale(D.settings.fontScale);
if(D.settings.darkMode)document.body.classList.add('dark-mode');
applyCampoMode(D);
const ls=$('langSelect');if(ls)ls.value=LANG;switchLang(LANG);nav('dashboard');}
window.addEventListener('DOMContentLoaded',init);
// ============ SERVICE WORKER ============
if('serviceWorker' in navigator){
navigator.serviceWorker.register('sw.js').then(reg=>{
console.log('SW registered',reg.scope);
}).catch(e=>console.log('SW registration failed',e));
}
</script>
</body>
</html>